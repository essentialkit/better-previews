var IS_DEV_BUILD=false;
(()=>{var n={name:"__MSG_@appName__",description:"__MSG_@appDesc__",short_name:"__MSG_@appShortName_",homepage_url:"https://betterpreviews.com/",__package_name__:"search-preview","__comment:version__":"Firefox does not support leading zeros in versions",version:"24.04.12",__sentry_dsn__:"https://bf0a1e40a1784502aad701a201efdf08@o526305.ingest.sentry.io/4504743520436224",__measurement_id__:"G-XN737SN9S2",__ga_api_secret__:"zigXBV_3TjyIjkXuSPjo8w",manifest_version:3,default_locale:"en",author:"Justice Ogbonna",permissions:["storage","declarativeNetRequest","contextMenus","cookies","activeTab"],declarative_net_request:{rule_resources:[{id:"ruleset_1",enabled:!0,path:"assets/rules.json"}]},host_permissions:["*://*/*"],action:{default_icon:{"16":"assets/logo-16x16.png","24":"assets/logo-24x24.png","32":"assets/logo-32x32.png"},default_title:"Search Preview"},icons:{"16":"assets/logo-16x16.png","32":"assets/logo-32x32.png","48":"assets/logo-48x48.png","128":"assets/logo-128x128.png"},content_scripts:[{matches:["http://*/*","https://*/*"],all_frames:!0,js:["content-script/content-script.js"],css:["content-script/content-script.css"]}],background:{__chrome__service_worker:"background-script/service-worker.js",__firefox__scripts:["background-script/service-worker.js"]},side_panel:{default_path:"sidepanel/side-panel.html"},options_page:"options-page/options.html",web_accessible_resources:[{resources:["assets/logo-24x24.png"],matches:["<all_urls>"]},{resources:["options-page/options.html"],matches:["<all_urls>"]},{resources:["welcome/my-element.js"],matches:["<all_urls>"]},{resources:["content-script/floatie/tooltip.js"],matches:["<all_urls>"]}],__firefox__key:"",__firefox__browser_specific_settings:{gecko:{id:"search-preview@essentialkit.org"}}};async function a(){let{sessionData:t}=await chrome.storage.session.get("sessionData"),e=Date.now();return t&&t.timestamp&&((e-t.timestamp)/6e4>30?t=null:(t.timestamp=e,await chrome.storage.session.set({sessionData:t}))),t||(t={session_id:e.toString(),timestamp:e.toString()},await chrome.storage.session.set({sessionData:t})),t.session_id}var l="https://www.google-analytics.com/mp/collect",g="https://www.google-analytics.com/debug/mp/collect",p=n.__measurement_id__,m=n.__ga_api_secret__,d=100,i=class{constructor(){this.debug=IS_DEV_BUILD}async getOrCreateClientId(){let{clientId:e}=await chrome.storage.local.get("clientId");return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:e})),e}async getSessionId(){try{return a()}catch{return new Promise(s=>{chrome.runtime.sendMessage("get_or_create_session_id",o=>{s(o)})})}}async fireEvent(e,s={}){s.session_id||(s.session_id=await this.getSessionId()),s.engagement_time_msec||(s.engagement_time_msec=d);try{let o=await fetch(`${this.debug?g:l}?measurement_id=${p}&api_secret=${m}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e,params:s}]})});if(!this.debug)return;console.log(await o.text())}catch(o){console.error("Google Analytics request failed with an exception",o)}}async firePageViewEvent(e,s,o={}){return this.fireEvent("page_view",{page_title:e,page_location:s,...o})}async fireErrorEvent(e,s={}){return this.fireEvent("extension_error",{...e,...s})}},r=new i;document.getElementById("demo-button").onclick=function(t){window.postMessage({application:"search-preview",action:"search",data:"hello world"},window.location.origin)};document.addEventListener("DOMContentLoaded",async()=>{await r.firePageViewEvent("Welcome Page","/welcome.html"),window.onerror=(t,e,s,o,c)=>{r.fireErrorEvent(c,{event:t,source:e,lineno:s})}});})();
