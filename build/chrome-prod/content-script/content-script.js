var IS_DEV_BUILD=false;
(()=>{var hs=Object.create;var nr=Object.defineProperty;var ps=Object.getOwnPropertyDescriptor;var ms=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,_s=Object.prototype.hasOwnProperty;var mn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rr=(e,t)=>{for(var n in t)nr(e,n,{get:t[n],enumerable:!0})},ys=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ms(t))!_s.call(e,i)&&i!==n&&nr(e,i,{get:()=>t[i],enumerable:!(r=ps(t,i))||r.enumerable});return e};var xi=(e,t,n)=>(n=e!=null?hs(gs(e)):{},ys(t||!e||!e.__esModule?nr(n,"default",{value:e,enumerable:!0}):n,e));var Ro=mn(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.sanitizeUrl=void 0;var Sc=/^([^\w]*)(javascript|data|vbscript)/im,Tc=/&#(\w+)(^\w|;)?/g,Nc=/&(newline|tab);/gi,Ac=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Dc=/^.+(:|&colon;)/gim,Lc=[".","/"];function Ic(e){return Lc.indexOf(e[0])>-1}function Rc(e){return e.replace(Tc,function(t,n){return String.fromCharCode(n)})}function kc(e){var t=Rc(e||"").replace(Nc,"").replace(Ac,"").trim();if(!t)return"about:blank";if(Ic(t))return t;var n=t.match(Dc);if(!n)return t;var r=n[0];return Sc.test(r)?"about:blank":t}qn.sanitizeUrl=kc});var Mo=mn((Xh,Vr)=>{function ko(e,t){if(t&&t.documentElement)e=t,t=arguments[2];else if(!e||!e.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=e,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(n){return n.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let n=function(r){if(r.nodeType==r.TEXT_NODE)return`${r.nodeName} ("${r.textContent}")`;let i=Array.from(r.attributes||[],function(o){return`${o.name}="${o.value}"`}).join(" ");return`<${r.localName} ${i}>`};this.log=function(){if(typeof dump<"u"){var r=Array.prototype.map.call(arguments,function(i){return i&&i.nodeName?n(i):i}).join(" ");dump("Reader: (Readability) "+r+`
`)}else if(typeof console<"u"){let i=Array.from(arguments,o=>o&&o.nodeType==this.ELEMENT_NODE?n(o):o);i.unshift("Reader: (Readability)"),console.log.apply(console,i)}}}else this.log=function(){}}ko.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(e){this._fixRelativeUris(e),this._simplifyNestedElements(e),this._keepClasses||this._cleanClasses(e)},_removeNodes:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var n=e.length-1;n>=0;n--){var r=e[n],i=r.parentNode;i&&(!t||t.call(this,r,n,e))&&i.removeChild(r)}},_replaceNodeTags:function(e,t){if(this._docJSDOMParser&&e._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let n of e)this._setNodeTag(n,t)},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_findNode:function(e,t){return Array.prototype.find.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_everyNode:function(e,t){return Array.prototype.every.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments),n=t.map(function(r){return e.call(r)});return Array.prototype.concat.apply([],n)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(n){var r=e.getElementsByTagName(n);return Array.isArray(r)?r:Array.from(r)}))},_cleanClasses:function(e){var t=this._classesToPreserve,n=(e.getAttribute("class")||"").split(/\s+/).filter(function(r){return t.indexOf(r)!=-1}).join(" ");for(n?e.setAttribute("class",n):e.removeAttribute("class"),e=e.firstElementChild;e;e=e.nextElementSibling)this._cleanClasses(e)},_fixRelativeUris:function(e){var t=this._doc.baseURI,n=this._doc.documentURI;function r(s){if(t==n&&s.charAt(0)=="#")return s;try{return new URL(s,t).href}catch{}return s}var i=this._getAllNodesWithTag(e,["a"]);this._forEachNode(i,function(s){var a=s.getAttribute("href");if(a)if(a.indexOf("javascript:")===0)if(s.childNodes.length===1&&s.childNodes[0].nodeType===this.TEXT_NODE){var l=this._doc.createTextNode(s.textContent);s.parentNode.replaceChild(l,s)}else{for(var u=this._doc.createElement("span");s.firstChild;)u.appendChild(s.firstChild);s.parentNode.replaceChild(u,s)}else s.setAttribute("href",r(a))});var o=this._getAllNodesWithTag(e,["img","picture","figure","video","audio","source"]);this._forEachNode(o,function(s){var a=s.getAttribute("src"),l=s.getAttribute("poster"),u=s.getAttribute("srcset");if(a&&s.setAttribute("src",r(a)),l&&s.setAttribute("poster",r(l)),u){var p=u.replace(this.REGEXPS.srcsetUrl,function(m,y,w,v){return r(y)+(w||"")+v});s.setAttribute("srcset",p)}})},_simplifyNestedElements:function(e){for(var t=e;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var n=t.children[0],r=0;r<t.attributes.length;r++)n.setAttribute(t.attributes[r].name,t.attributes[r].value);t.parentNode.replaceChild(n,t),t=n;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var e=this._doc,t="",n="";try{t=n=e.title.trim(),typeof t!="string"&&(t=n=this._getInnerText(e.getElementsByTagName("title")[0]))}catch{}var r=!1;function i(p){return p.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))r=/ [\\\/>»] /.test(t),t=n.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),i(t)<3&&(t=n.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var o=this._concatNodeLists(e.getElementsByTagName("h1"),e.getElementsByTagName("h2")),s=t.trim(),a=this._someNode(o,function(p){return p.textContent.trim()===s});a||(t=n.substring(n.lastIndexOf(":")+1),i(t)<3?t=n.substring(n.indexOf(":")+1):i(n.substr(0,n.indexOf(":")))>5&&(t=n))}else if(t.length>150||t.length<15){var l=e.getElementsByTagName("h1");l.length===1&&(t=this._getInnerText(l[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var u=i(t);return u<=4&&(!r||u!=i(n.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=n),t},_prepDocument:function(){var e=this._doc;this._removeNodes(this._getAllNodesWithTag(e,["style"])),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(this._getAllNodesWithTag(e,["font"]),"SPAN")},_nextNode:function(e){for(var t=e;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(t){for(var n=t.nextSibling,r=!1;(n=this._nextNode(n))&&n.tagName=="BR";){r=!0;var i=n.nextSibling;n.parentNode.removeChild(n),n=i}if(r){var o=this._doc.createElement("p");for(t.parentNode.replaceChild(o,t),n=o.nextSibling;n;){if(n.tagName=="BR"){var s=this._nextNode(n.nextSibling);if(s&&s.tagName=="BR")break}if(!this._isPhrasingContent(n))break;var a=n.nextSibling;o.appendChild(n),n=a}for(;o.lastChild&&this._isWhitespace(o.lastChild);)o.removeChild(o.lastChild);o.parentNode.tagName==="P"&&this._setNodeTag(o.parentNode,"DIV")}})},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),this._docJSDOMParser)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e;for(var n=e.ownerDocument.createElement(t);e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e),e.readability&&(n.readability=e.readability);for(var r=0;r<e.attributes.length;r++)try{n.setAttribute(e.attributes[r].name,e.attributes[r].value)}catch{}return n},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._fixLazyImages(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"footer"),this._clean(e,"link"),this._clean(e,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(e.children,function(n){this._cleanMatchedNodes(n,function(r,i){return this.REGEXPS.shareElements.test(i)&&r.textContent.length<t})}),this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._replaceNodeTags(this._getAllNodesWithTag(e,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(e,["p"]),function(n){var r=n.getElementsByTagName("img").length,i=n.getElementsByTagName("embed").length,o=n.getElementsByTagName("object").length,s=n.getElementsByTagName("iframe").length,a=r+i+o+s;return a===0&&!this._getInnerText(n,!1)}),this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(n){var r=this._nextNode(n.nextSibling);r&&r.tagName=="P"&&n.parentNode.removeChild(n)}),this._forEachNode(this._getAllNodesWithTag(e,["table"]),function(n){var r=this._hasSingleTagInsideElement(n,"TBODY")?n.firstElementChild:n;if(this._hasSingleTagInsideElement(r,"TR")){var i=r.firstElementChild;if(this._hasSingleTagInsideElement(i,"TD")){var o=i.firstElementChild;o=this._setNodeTag(o,this._everyNode(o.childNodes,this._isPhrasingContent)?"P":"DIV"),n.parentNode.replaceChild(o,n)}}})},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5;break}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0);return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild;if(e.nextElementSibling)return e.nextElementSibling;do e=e.parentNode;while(e&&!e.nextElementSibling);return e&&e.nextElementSibling},_textSimilarity:function(e,t){var n=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),r=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!n.length||!r.length)return 0;var i=r.filter(s=>!n.includes(s)),o=i.join(" ").length/r.join(" ").length;return 1-o},_checkByline:function(e,t){if(this._articleByline)return!1;if(e.getAttribute!==void 0)var n=e.getAttribute("rel"),r=e.getAttribute("itemprop");return(n==="author"||r&&r.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(e.textContent)?(this._articleByline=e.textContent.trim(),!0):!1},_getNodeAncestors:function(e,t){t=t||0;for(var n=0,r=[];e.parentNode&&(r.push(e.parentNode),!(t&&++n===t));)e=e.parentNode;return r},_grabArticle:function(e){this.log("**** grabArticle ****");var t=this._doc,n=e!==null;if(e=e||this._doc.body,!e)return this.log("No body found in document. Abort."),null;for(var r=e.innerHTML;;){this.log("Starting grabArticle loop");var i=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),o=[],s=this._doc.documentElement;let wt=!0;for(;s;){s.tagName==="HTML"&&(this._articleLang=s.getAttribute("lang"));var a=s.className+" "+s.id;if(!this._isProbablyVisible(s)){this.log("Removing hidden node - "+a),s=this._removeAndGetNext(s);continue}if(this._checkByline(s,a)){s=this._removeAndGetNext(s);continue}if(wt&&this._headerDuplicatesTitle(s)){this.log("Removing header: ",s.textContent.trim(),this._articleTitle.trim()),wt=!1,s=this._removeAndGetNext(s);continue}if(i){if(this.REGEXPS.unlikelyCandidates.test(a)&&!this.REGEXPS.okMaybeItsACandidate.test(a)&&!this._hasAncestorTag(s,"table")&&!this._hasAncestorTag(s,"code")&&s.tagName!=="BODY"&&s.tagName!=="A"){this.log("Removing unlikely candidate - "+a),s=this._removeAndGetNext(s);continue}if(this.UNLIKELY_ROLES.includes(s.getAttribute("role"))){this.log("Removing content with role "+s.getAttribute("role")+" - "+a),s=this._removeAndGetNext(s);continue}}if((s.tagName==="DIV"||s.tagName==="SECTION"||s.tagName==="HEADER"||s.tagName==="H1"||s.tagName==="H2"||s.tagName==="H3"||s.tagName==="H4"||s.tagName==="H5"||s.tagName==="H6")&&this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)!==-1&&o.push(s),s.tagName==="DIV"){for(var l=null,u=s.firstChild;u;){var p=u.nextSibling;if(this._isPhrasingContent(u))l!==null?l.appendChild(u):this._isWhitespace(u)||(l=t.createElement("p"),s.replaceChild(l,u),l.appendChild(u));else if(l!==null){for(;l.lastChild&&this._isWhitespace(l.lastChild);)l.removeChild(l.lastChild);l=null}u=p}if(this._hasSingleTagInsideElement(s,"P")&&this._getLinkDensity(s)<.25){var m=s.children[0];s.parentNode.replaceChild(m,s),s=m,o.push(s)}else this._hasChildBlockElement(s)||(s=this._setNodeTag(s,"P"),o.push(s))}s=this._getNextNode(s)}var y=[];this._forEachNode(o,function(q){if(!(!q.parentNode||typeof q.parentNode.tagName>"u")){var z=this._getInnerText(q);if(!(z.length<25)){var lt=this._getNodeAncestors(q,5);if(lt.length!==0){var _t=0;_t+=1,_t+=z.split(",").length,_t+=Math.min(Math.floor(z.length/100),3),this._forEachNode(lt,function(dt,J){if(!(!dt.tagName||!dt.parentNode||typeof dt.parentNode.tagName>"u")){if(typeof dt.readability>"u"&&(this._initializeNode(dt),y.push(dt)),J===0)var Vt=1;else J===1?Vt=2:Vt=J*3;dt.readability.contentScore+=_t/Vt}})}}}});for(var w=[],v=0,D=y.length;v<D;v+=1){var S=y[v],I=S.readability.contentScore*(1-this._getLinkDensity(S));S.readability.contentScore=I,this.log("Candidate:",S,"with score "+I);for(var A=0;A<this._nbTopCandidates;A++){var N=w[A];if(!N||I>N.readability.contentScore){w.splice(A,0,S),w.length>this._nbTopCandidates&&w.pop();break}}}var T=w[0]||null,M=!1,R;if(T===null||T.tagName==="BODY"){for(T=t.createElement("DIV"),M=!0;e.firstChild;)this.log("Moving child out:",e.firstChild),T.appendChild(e.firstChild);e.appendChild(T),this._initializeNode(T)}else if(T){for(var B=[],H=1;H<w.length;H++)w[H].readability.contentScore/T.readability.contentScore>=.75&&B.push(this._getNodeAncestors(w[H]));var G=3;if(B.length>=G)for(R=T.parentNode;R.tagName!=="BODY";){for(var P=0,$=0;$<B.length&&P<G;$++)P+=Number(B[$].includes(R));if(P>=G){T=R;break}R=R.parentNode}T.readability||this._initializeNode(T),R=T.parentNode;for(var K=T.readability.contentScore,bt=K/3;R.tagName!=="BODY";){if(!R.readability){R=R.parentNode;continue}var st=R.readability.contentScore;if(st<bt)break;if(st>K){T=R;break}K=R.readability.contentScore,R=R.parentNode}for(R=T.parentNode;R.tagName!="BODY"&&R.children.length==1;)T=R,R=T.parentNode;T.readability||this._initializeNode(T)}var O=t.createElement("DIV");n&&(O.id="readability-content");var at=Math.max(10,T.readability.contentScore*.2);R=T.parentNode;for(var ft=R.children,et=0,ct=ft.length;et<ct;et++){var j=ft[et],U=!1;if(this.log("Looking at sibling node:",j,j.readability?"with score "+j.readability.contentScore:""),this.log("Sibling has score",j.readability?j.readability.contentScore:"Unknown"),j===T)U=!0;else{var Dt=0;if(j.className===T.className&&T.className!==""&&(Dt+=T.readability.contentScore*.2),j.readability&&j.readability.contentScore+Dt>=at)U=!0;else if(j.nodeName==="P"){var qt=this._getLinkDensity(j),Xt=this._getInnerText(j),Lt=Xt.length;(Lt>80&&qt<.25||Lt<80&&Lt>0&&qt===0&&Xt.search(/\.( |$)/)!==-1)&&(U=!0)}}U&&(this.log("Appending node:",j),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(j.nodeName)===-1&&(this.log("Altering sibling:",j,"to div."),j=this._setNodeTag(j,"DIV")),O.appendChild(j),ft=R.children,et-=1,ct-=1)}if(this._debug&&this.log("Article content pre-prep: "+O.innerHTML),this._prepArticle(O),this._debug&&this.log("Article content post-prep: "+O.innerHTML),M)T.id="readability-page-1",T.className="page";else{var gt=t.createElement("DIV");for(gt.id="readability-page-1",gt.className="page";O.firstChild;)gt.appendChild(O.firstChild);O.appendChild(gt)}this._debug&&this.log("Article content after paging: "+O.innerHTML);var le=!0,Bt=this._getInnerText(O,!0).length;if(Bt<this._charThreshold)if(le=!1,e.innerHTML=r,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:O,textLength:Bt});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:O,textLength:Bt});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:O,textLength:Bt});else{if(this._attempts.push({articleContent:O,textLength:Bt}),this._attempts.sort(function(q,z){return z.textLength-q.textLength}),!this._attempts[0].textLength)return null;O=this._attempts[0].articleContent,le=!0}if(le){var ue=[R,T].concat(this._getNodeAncestors(R));return this._someNode(ue,function(q){if(!q.tagName)return!1;var z=q.getAttribute("dir");return z?(this._articleDir=z,!0):!1}),O}}},_isValidByline:function(e){return typeof e=="string"||e instanceof String?(e=e.trim(),e.length>0&&e.length<100):!1},_unescapeHtmlEntities:function(e){if(!e)return e;var t=this.HTML_ESCAPE_MAP;return e.replace(/&(quot|amp|apos|lt|gt);/g,function(n,r){return t[r]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(n,r,i){var o=parseInt(r||i,r?16:10);return String.fromCharCode(o)})},_getJSONLD:function(e){var t=this._getAllNodesWithTag(e,["script"]),n;return this._forEachNode(t,function(r){if(!n&&r.getAttribute("type")==="application/ld+json")try{var i=r.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),o=JSON.parse(i);if(!o["@context"]||!o["@context"].match(/^https?\:\/\/schema\.org$/)||(!o["@type"]&&Array.isArray(o["@graph"])&&(o=o["@graph"].find(function(u){return(u["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!o||!o["@type"]||!o["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(n={},typeof o.name=="string"&&typeof o.headline=="string"&&o.name!==o.headline){var s=this._getArticleTitle(),a=this._textSimilarity(o.name,s)>.75,l=this._textSimilarity(o.headline,s)>.75;l&&!a?n.title=o.headline:n.title=o.name}else typeof o.name=="string"?n.title=o.name.trim():typeof o.headline=="string"&&(n.title=o.headline.trim());o.author&&(typeof o.author.name=="string"?n.byline=o.author.name.trim():Array.isArray(o.author)&&o.author[0]&&typeof o.author[0].name=="string"&&(n.byline=o.author.filter(function(u){return u&&typeof u.name=="string"}).map(function(u){return u.name.trim()}).join(", "))),typeof o.description=="string"&&(n.excerpt=o.description.trim()),o.publisher&&typeof o.publisher.name=="string"&&(n.siteName=o.publisher.name.trim());return}catch(u){this.log(u.message)}}),n||{}},_getArticleMetadata:function(e){var t={},n={},r=this._doc.getElementsByTagName("meta"),i=/\s*(dc|dcterm|og|twitter)\s*:\s*(author|creator|description|title|site_name)\s*/gi,o=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(r,function(s){var a=s.getAttribute("name"),l=s.getAttribute("property"),u=s.getAttribute("content");if(!!u){var p=null,m=null;l&&(p=l.match(i),p&&(m=p[0].toLowerCase().replace(/\s/g,""),n[m]=u.trim())),!p&&a&&o.test(a)&&(m=a,u&&(m=m.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),n[m]=u.trim()))}}),t.title=e.title||n["dc:title"]||n["dcterm:title"]||n["og:title"]||n["weibo:article:title"]||n["weibo:webpage:title"]||n.title||n["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e.byline||n["dc:creator"]||n["dcterm:creator"]||n.author,t.excerpt=e.excerpt||n["dc:description"]||n["dcterm:description"]||n["og:description"]||n["weibo:article:description"]||n["weibo:webpage:description"]||n.description||n["twitter:description"],t.siteName=e.siteName||n["og:site_name"],t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t},_isSingleImage:function(e){return e.tagName==="IMG"?!0:e.children.length!==1||e.textContent.trim()!==""?!1:this._isSingleImage(e.children[0])},_unwrapNoscriptImages:function(e){var t=Array.from(e.getElementsByTagName("img"));this._forEachNode(t,function(r){for(var i=0;i<r.attributes.length;i++){var o=r.attributes[i];switch(o.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(o.value))return}r.parentNode.removeChild(r)});var n=Array.from(e.getElementsByTagName("noscript"));this._forEachNode(n,function(r){var i=e.createElement("div");if(i.innerHTML=r.innerHTML,!!this._isSingleImage(i)){var o=r.previousElementSibling;if(o&&this._isSingleImage(o)){var s=o;s.tagName!=="IMG"&&(s=o.getElementsByTagName("img")[0]);for(var a=i.getElementsByTagName("img")[0],l=0;l<s.attributes.length;l++){var u=s.attributes[l];if(u.value!==""&&(u.name==="src"||u.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(u.value))){if(a.getAttribute(u.name)===u.value)continue;var p=u.name;a.hasAttribute(p)&&(p="data-old-"+p),a.setAttribute(p,u.value)}}r.parentNode.replaceChild(i.firstElementChild,o)}}})},_removeScripts:function(e){this._removeNodes(this._getAllNodesWithTag(e,["script"]),function(t){return t.nodeValue="",t.removeAttribute("src"),!0}),this._removeNodes(this._getAllNodesWithTag(e,["noscript"]))},_hasSingleTagInsideElement:function(e,t){return e.children.length!=1||e.children[0].tagName!==t?!1:!this._someNode(e.childNodes,function(n){return n.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(n.textContent)})},_isElementWithoutContent:function(e){return e.nodeType===this.ELEMENT_NODE&&e.textContent.trim().length==0&&(e.children.length==0||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(e){return e.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(e.tagName)!==-1||(e.tagName==="A"||e.tagName==="DEL"||e.tagName==="INS")&&this._everyNode(e.childNodes,this._isPhrasingContent)},_isWhitespace:function(e){return e.nodeType===this.TEXT_NODE&&e.textContent.trim().length===0||e.nodeType===this.ELEMENT_NODE&&e.tagName==="BR"},_getInnerText:function(e,t){t=typeof t>"u"?!0:t;var n=e.textContent.trim();return t?n.replace(this.REGEXPS.normalize," "):n},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(!(!e||e.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)e.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(e.tagName)!==-1&&(e.removeAttribute("width"),e.removeAttribute("height"));for(var n=e.firstElementChild;n!==null;)this._cleanStyles(n),n=n.nextElementSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length;if(t===0)return 0;var n=0;return this._forEachNode(e.getElementsByTagName("a"),function(r){var i=r.getAttribute("href"),o=i&&this.REGEXPS.hashUrl.test(i)?.3:1;n+=this._getInnerText(r).length*o}),n/t},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof e.className=="string"&&e.className!==""&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),typeof e.id=="string"&&e.id!==""&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var n=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(e,[t]),function(r){if(n){for(var i=0;i<r.attributes.length;i++)if(this.REGEXPS.videos.test(r.attributes[i].value))return!1;if(r.tagName==="object"&&this.REGEXPS.videos.test(r.innerHTML))return!1}return!0})},_hasAncestorTag:function(e,t,n,r){n=n||3,t=t.toUpperCase();for(var i=0;e.parentNode;){if(n>0&&i>n)return!1;if(e.parentNode.tagName===t&&(!r||r(e.parentNode)))return!0;e=e.parentNode,i++}return!1},_getRowAndColumnCount:function(e){for(var t=0,n=0,r=e.getElementsByTagName("tr"),i=0;i<r.length;i++){var o=r[i].getAttribute("rowspan")||0;o&&(o=parseInt(o,10)),t+=o||1;for(var s=0,a=r[i].getElementsByTagName("td"),l=0;l<a.length;l++){var u=a[l].getAttribute("colspan")||0;u&&(u=parseInt(u,10)),s+=u||1}n=Math.max(n,s)}return{rows:t,columns:n}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),n=0;n<t.length;n++){var r=t[n],i=r.getAttribute("role");if(i=="presentation"){r._readabilityDataTable=!1;continue}var o=r.getAttribute("datatable");if(o=="0"){r._readabilityDataTable=!1;continue}var s=r.getAttribute("summary");if(s){r._readabilityDataTable=!0;continue}var a=r.getElementsByTagName("caption")[0];if(a&&a.childNodes.length>0){r._readabilityDataTable=!0;continue}var l=["col","colgroup","tfoot","thead","th"],u=function(m){return!!r.getElementsByTagName(m)[0]};if(l.some(u)){this.log("Data table because found data-y descendant"),r._readabilityDataTable=!0;continue}if(r.getElementsByTagName("table")[0]){r._readabilityDataTable=!1;continue}var p=this._getRowAndColumnCount(r);if(p.rows>=10||p.columns>4){r._readabilityDataTable=!0;continue}r._readabilityDataTable=p.rows*p.columns>10}},_fixLazyImages:function(e){this._forEachNode(this._getAllNodesWithTag(e,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var n=this.REGEXPS.b64DataUrl.exec(t.src);if(n[1]==="image/svg+xml")return;for(var r=!1,i=0;i<t.attributes.length;i++){var o=t.attributes[i];if(o.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(o.value)){r=!0;break}}if(r){var s=t.src.search(/base64\s*/i)+7,a=t.src.length-s;a<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var l=0;l<t.attributes.length;l++)if(o=t.attributes[l],!(o.name==="src"||o.name==="srcset"||o.name==="alt")){var u=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(o.value)?u="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(o.value)&&(u="src"),u){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(u,o.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var p=this._doc.createElement("img");p.setAttribute(u,o.value),t.appendChild(p)}}}}})},_getTextDensity:function(e,t){var n=this._getInnerText(e,!0).length;if(n===0)return 0;var r=0,i=this._getAllNodesWithTag(e,t);return this._forEachNode(i,o=>r+=this._getInnerText(o,!0).length),r/n},_cleanConditionally:function(e,t){!this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)||this._removeNodes(this._getAllNodesWithTag(e,[t]),function(n){var r=function(M){return M._readabilityDataTable},i=t==="ul"||t==="ol";if(!i){var o=0,s=this._getAllNodesWithTag(n,["ul","ol"]);this._forEachNode(s,M=>o+=this._getInnerText(M).length),i=o/this._getInnerText(n).length>.9}if(t==="table"&&r(n)||this._hasAncestorTag(n,"table",-1,r)||this._hasAncestorTag(n,"code"))return!1;var a=this._getClassWeight(n);this.log("Cleaning Conditionally",n);var l=0;if(a+l<0)return!0;if(this._getCharCount(n,",")<10){for(var u=n.getElementsByTagName("p").length,p=n.getElementsByTagName("img").length,m=n.getElementsByTagName("li").length-100,y=n.getElementsByTagName("input").length,w=this._getTextDensity(n,["h1","h2","h3","h4","h5","h6"]),v=0,D=this._getAllNodesWithTag(n,["object","embed","iframe"]),S=0;S<D.length;S++){for(var I=0;I<D[S].attributes.length;I++)if(this.REGEXPS.videos.test(D[S].attributes[I].value))return!1;if(D[S].tagName==="object"&&this.REGEXPS.videos.test(D[S].innerHTML))return!1;v++}var A=this._getLinkDensity(n),N=this._getInnerText(n).length,T=p>1&&u/p<.5&&!this._hasAncestorTag(n,"figure")||!i&&m>u||y>Math.floor(u/3)||!i&&w<.9&&N<25&&(p===0||p>2)&&!this._hasAncestorTag(n,"figure")||!i&&a<25&&A>.2||a>=25&&A>.5||v===1&&N<75||v>1;return T}return!1})},_cleanMatchedNodes:function(e,t){for(var n=this._getNextNode(e,!0),r=this._getNextNode(e);r&&r!=n;)t.call(this,r,r.className+" "+r.id)?r=this._removeAndGetNext(r):r=this._getNextNode(r)},_cleanHeaders:function(e){let t=this._getAllNodesWithTag(e,["h1","h2"]);this._removeNodes(t,function(n){let r=this._getClassWeight(n)<0;return r&&this.log("Removing header with low class weight:",n),r})},_headerDuplicatesTitle:function(e){if(e.tagName!="H1"&&e.tagName!="H2")return!1;var t=this._getInnerText(e,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(e){return(this._flags&e)>0},_removeFlag:function(e){this._flags=this._flags&~e},_isProbablyVisible:function(e){return(!e.style||e.style.display!="none")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||e.getAttribute("aria-hidden")!="true"||e.className&&e.className.indexOf&&e.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length;if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var n=this._getArticleMetadata(t);this._articleTitle=n.title;var r=this._grabArticle();if(!r)return null;if(this.log("Grabbed: "+r.innerHTML),this._postProcessContent(r),!n.excerpt){var i=r.getElementsByTagName("p");i.length>0&&(n.excerpt=i[0].textContent.trim())}var o=r.textContent;return{title:this._articleTitle,byline:n.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(r),textContent:o,length:o.length,excerpt:n.excerpt,siteName:n.siteName||this._articleSiteName}}};typeof Vr=="object"&&(Vr.exports=ko)});var Oo=mn((Vh,Jr)=>{var Co={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function Mc(e){return(!e.style||e.style.display!="none")&&!e.hasAttribute("hidden")&&(!e.hasAttribute("aria-hidden")||e.getAttribute("aria-hidden")!="true"||e.className&&e.className.indexOf&&e.className.indexOf("fallback-image")!==-1)}function Cc(e,t={}){typeof t=="function"&&(t={visibilityChecker:t});var n={minScore:20,minContentLength:140,visibilityChecker:Mc};t=Object.assign(n,t);var r=e.querySelectorAll("p, pre, article"),i=e.querySelectorAll("div > br");if(i.length){var o=new Set(r);[].forEach.call(i,function(a){o.add(a.parentNode)}),r=Array.from(o)}var s=0;return[].some.call(r,function(a){if(!t.visibilityChecker(a))return!1;var l=a.className+" "+a.id;if(Co.unlikelyCandidates.test(l)&&!Co.okMaybeItsACandidate.test(l)||a.matches("li p"))return!1;var u=a.textContent.trim().length;return u<t.minContentLength?!1:(s+=Math.sqrt(u-t.minContentLength),s>t.minScore)})}typeof Jr=="object"&&(Jr.exports=Cc)});var Bo=mn((Jh,Po)=>{var Oc=Mo(),Pc=Oo();Po.exports={Readability:Oc,isProbablyReaderable:Pc}});var Si=Object.prototype.toString;function ze(e){switch(Si.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return xt(e,Error)}}function Le(e,t){return Si.call(e)===`[object ${t}]`}function Ye(e){return Le(e,"ErrorEvent")}function gn(e){return Le(e,"DOMError")}function ir(e){return Le(e,"DOMException")}function vt(e){return Le(e,"String")}function Ie(e){return e===null||typeof e!="object"&&typeof e!="function"}function It(e){return Le(e,"Object")}function Re(e){return typeof Event<"u"&&xt(e,Event)}function or(e){return typeof Element<"u"&&xt(e,Element)}function sr(e){return Le(e,"RegExp")}function ve(e){return Boolean(e&&e.then&&typeof e.then=="function")}function ar(e){return It(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function cr(e){return typeof e=="number"&&e!==e}function xt(e,t){try{return e instanceof t}catch{return!1}}function _n(e){return e&&e.Math==Math?e:void 0}var rt=typeof globalThis=="object"&&_n(globalThis)||typeof window=="object"&&_n(window)||typeof self=="object"&&_n(self)||typeof global=="object"&&_n(global)||function(){return this}()||{};function Jt(){return rt}function xe(e,t,n){let r=n||rt,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}var Es=Jt(),bs=80;function ke(e,t={}){try{let n=e,r=5,i=[],o=0,s=0,a=" > ",l=a.length,u,p=Array.isArray(t)?t:t.keyAttrs,m=!Array.isArray(t)&&t.maxStringLength||bs;for(;n&&o++<r&&(u=ws(n,p),!(u==="html"||o>1&&s+i.length*l+u.length>=m));)i.push(u),s+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function ws(e,t){let n=e,r=[],i,o,s,a,l;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());let u=t&&t.length?t.filter(m=>n.getAttribute(m)).map(m=>[m,n.getAttribute(m)]):null;if(u&&u.length)u.forEach(m=>{r.push(`[${m[0]}="${m[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&vt(i))for(o=i.split(/\s+/),l=0;l<o.length;l++)r.push(`.${o[l]}`);let p=["type","name","title","alt"];for(l=0;l<p.length;l++)s=p[l],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}function lr(){try{return Es.document.location.href}catch{return""}}var X=class extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}};var vs=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function xs(e){return e==="http"||e==="https"}function de(e,t=!1){let{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${s}`}function Ti(e){let t=vs.exec(e);if(!t)throw new X(`Invalid Sentry Dsn: ${e}`);let[n,r,i="",o,s="",a]=t.slice(1),l="",u=a,p=u.split("/");if(p.length>1&&(l=p.slice(0,-1).join("/"),u=p.pop()),u){let m=u.match(/^\d+/);m&&(u=m[0])}return Ni({host:o,pass:i,path:l,projectId:u,port:s,protocol:n,publicKey:r})}function Ni(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ss(e){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return;let{port:t,projectId:n,protocol:r}=e;if(["protocol","publicKey","host","projectId"].forEach(o=>{if(!e[o])throw new X(`Invalid Sentry Dsn: ${o} missing`)}),!n.match(/^\d+$/))throw new X(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!xs(r))throw new X(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(t&&isNaN(parseInt(t,10)))throw new X(`Invalid Sentry Dsn: Invalid port ${t}`);return!0}function yn(e){let t=typeof e=="string"?Ti(e):Ni(e);return Ss(t),t}var Ts="Sentry Logger ",Me=["debug","info","warn","error","log","assert","trace"];function En(e){if(!("console"in rt))return e();let t=rt.console,n={};Me.forEach(r=>{let i=t[r]&&t[r].__sentry_original__;r in t&&i&&(n[r]=t[r],t[r]=i)});try{return e()}finally{Object.keys(n).forEach(r=>{t[r]=n[r]})}}function Ai(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Me.forEach(n=>{t[n]=(...r)=>{e&&En(()=>{rt.console[n](`${Ts}[${n}]:`,...r)})}}):Me.forEach(n=>{t[n]=()=>{}}),t}var L;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?L=xe("logger",Ai):L=Ai();function he(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.substr(0,t)}...`}function bn(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let i=e[r];try{n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Di(e,t,n=!1){return vt(e)?sr(t)?t.test(e):vt(t)?n?e===t:e.includes(t):!1:!1}function We(e,t=[],n=!1){return t.some(r=>Di(e,r,n))}function Q(e,t,n){if(!(t in e))return;let r=e[t],i=n(r);if(typeof i=="function")try{wn(i,r)}catch{}e[t]=i}function Ce(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function wn(e,t){let n=t.prototype||{};e.prototype=t.prototype=n,Ce(e,"__sentry_original__",t)}function Se(e){return e.__sentry_original__}function fr(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function vn(e){if(ze(e))return{message:e.message,name:e.name,stack:e.stack,...Ii(e)};if(Re(e)){let t={type:e.type,target:Li(e.target),currentTarget:Li(e.currentTarget),...Ii(e)};return typeof CustomEvent<"u"&&xt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Li(e){try{return or(e)?ke(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Ii(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function dr(e,t=40){let n=Object.keys(vn(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return he(n[0],t);for(let r=n.length;r>0;r--){let i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:he(i,t)}return""}function Oe(e){return ur(e,new Map)}function ur(e,t){if(It(e)){let n=t.get(e);if(n!==void 0)return n;let r={};t.set(e,r);for(let i of Object.keys(e))typeof e[i]<"u"&&(r[i]=ur(e[i],t));return r}if(Array.isArray(e)){let n=t.get(e);if(n!==void 0)return n;let r=[];return t.set(e,r),e.forEach(i=>{r.push(ur(i,t))}),r}return e}function hr(e){let t,n=e[0],r=1;for(;r<e.length;){let i=e[r],o=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=o(n)):(i==="call"||i==="optionalCall")&&(n=o((...s)=>n.call(t,...s)),t=void 0)}return n}var Ns=50;function xn(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{let i=[];for(let o of n.split(`
`).slice(r)){if(o.length>1024)continue;let s=o.replace(/\(error: (.*)\)/,"$1");for(let a of t){let l=a(s);if(l){i.push(l);break}}}return Ri(i)}}function mr(e){return Array.isArray(e)?xn(...e):e}function Ri(e){if(!e.length)return[];let t=e,n=t[0].function||"",r=t[t.length-1].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(t=t.slice(1)),r.indexOf("sentryWrapped")!==-1&&(t=t.slice(0,-1)),t.slice(0,Ns).map(i=>({...i,filename:i.filename||t[0].filename,function:i.function||"?"})).reverse()}var pr="<anonymous>";function St(e){try{return!e||typeof e!="function"?pr:e.name||pr}catch{return pr}}var Te=Jt();function Sn(){if(!("fetch"in Te))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function $e(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function gr(){if(!Sn())return!1;if($e(Te.fetch))return!0;let e=!1,t=Te.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=$e(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function _r(){let e=Te.chrome,t=e&&e.app&&e.app.runtime,n="history"in Te&&!!Te.history.pushState&&!!Te.history.replaceState;return!t&&n}var W=Jt(),qe={},ki={};function As(e){if(!ki[e])switch(ki[e]=!0,e){case"console":Ds();break;case"dom":Bs();break;case"xhr":ks();break;case"fetch":Ls();break;case"history":Ms();break;case"error":Us();break;case"unhandledrejection":Fs();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("unknown instrumentation type:",e);return}}function Tt(e,t){qe[e]=qe[e]||[],qe[e].push(t),As(e)}function Rt(e,t){if(!(!e||!qe[e]))for(let n of qe[e]||[])try{n(t)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${St(n)}
Error:`,r)}}function Ds(){"console"in W&&Me.forEach(function(e){e in W.console&&Q(W.console,e,function(t){return function(...n){Rt("console",{args:n,level:e}),t&&t.apply(W.console,n)}})})}function Ls(){!gr()||Q(W,"fetch",function(e){return function(...t){let n={args:t,fetchData:{method:Is(t),url:Rs(t)},startTimestamp:Date.now()};return Rt("fetch",{...n}),e.apply(W,t).then(r=>(Rt("fetch",{...n,endTimestamp:Date.now(),response:r}),r),r=>{throw Rt("fetch",{...n,endTimestamp:Date.now(),error:r}),r})}})}function Is(e=[]){return"Request"in W&&xt(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function Rs(e=[]){return typeof e[0]=="string"?e[0]:"Request"in W&&xt(e[0],Request)?e[0].url:String(e[0])}function ks(){if(!("XMLHttpRequest"in W))return;let e=XMLHttpRequest.prototype;Q(e,"open",function(t){return function(...n){let r=this,i=n[1],o=r.__sentry_xhr__={method:vt(n[0])?n[0].toUpperCase():n[0],url:n[1]};vt(i)&&o.method==="POST"&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);let s=function(){if(r.readyState===4){try{o.status_code=r.status}catch{}Rt("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?Q(r,"onreadystatechange",function(a){return function(...l){return s(),a.apply(r,l)}}):r.addEventListener("readystatechange",s),t.apply(r,n)}}),Q(e,"send",function(t){return function(...n){return this.__sentry_xhr__&&n[0]!==void 0&&(this.__sentry_xhr__.body=n[0]),Rt("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}var Tn;function Ms(){if(!_r())return;let e=W.onpopstate;W.onpopstate=function(...n){let r=W.location.href,i=Tn;if(Tn=r,Rt("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){let i=r.length>2?r[2]:void 0;if(i){let o=Tn,s=String(i);Tn=s,Rt("history",{from:o,to:s})}return n.apply(this,r)}}Q(W.history,"pushState",t),Q(W.history,"replaceState",t)}var Cs=1e3,Nn,An;function Os(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch{}return!1}function Ps(e){if(e.type!=="keypress")return!1;try{let t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function Mi(e,t=!1){return n=>{if(!n||An===n||Ps(n))return;let r=n.type==="keypress"?"input":n.type;Nn===void 0?(e({event:n,name:r,global:t}),An=n):Os(An,n)&&(e({event:n,name:r,global:t}),An=n),clearTimeout(Nn),Nn=W.setTimeout(()=>{Nn=void 0},Cs)}}function Bs(){if(!("document"in W))return;let e=Rt.bind(null,"dom"),t=Mi(e,!0);W.document.addEventListener("click",t,!1),W.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let r=W[n]&&W[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Q(r,"addEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{let l=this,u=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},p=u[o]=u[o]||{refCount:0};if(!p.handler){let m=Mi(e);p.handler=m,i.call(this,o,m,a)}p.refCount++}catch{}return i.call(this,o,s,a)}}),Q(r,"removeEventListener",function(i){return function(o,s,a){if(o==="click"||o=="keypress")try{let l=this,u=l.__sentry_instrumentation_handlers__||{},p=u[o];p&&(p.refCount--,p.refCount<=0&&(i.call(this,o,p.handler,a),p.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,s,a)}}))})}var yr=null;function Us(){yr=W.onerror,W.onerror=function(e,t,n,r,i){return Rt("error",{column:r,error:i,line:n,msg:e,url:t}),yr?yr.apply(this,arguments):!1}}var Er=null;function Fs(){Er=W.onunhandledrejection,W.onunhandledrejection=function(e){return Rt("unhandledrejection",e),Er?Er.apply(this,arguments):!0}}function Ci(){let e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let o=0;o<t.length;o++)if(t[o]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let o=0;o<t.length;o++)if(t[o]===i){t.splice(o,1);break}}return[n,r]}function Ft(){let e=rt,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");let n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Oi(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function jt(e){let{message:t,event_id:n}=e;if(t)return t;let r=Oi(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Pe(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function Kt(e,t){let n=Oi(e);if(!n)return;let r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){let o={...i&&i.data,...t.data};n.mechanism.data=o}}function Dn(e){if(e&&e.__sentry_captured__)return!0;try{Ce(e,"__sentry_captured__",!0)}catch{}return!1}function Xe(e){return Array.isArray(e)?e:[e]}function Pi(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Ve(){return!Pi()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function br(e,t){return e.require(t)}function kt(e,t=1/0,n=1/0){try{return Ln("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function In(e,t=3,n=100*1024){let r=kt(e,t);return Gs(r)>n?In(e,t-1,n):r}function Ln(e,t,n=1/0,r=1/0,i=Ci()){let[o,s]=i;if(t===null||["number","boolean","string"].includes(typeof t)&&!cr(t))return t;let a=js(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;if(n===0)return a.replace("object ","");if(o(t))return"[Circular ~]";let l=t;if(l&&typeof l.toJSON=="function")try{let y=l.toJSON();return Ln("",y,n-1,r,i)}catch{}let u=Array.isArray(t)?[]:{},p=0,m=vn(t);for(let y in m){if(!Object.prototype.hasOwnProperty.call(m,y))continue;if(p>=r){u[y]="[MaxProperties ~]";break}let w=m[y];u[y]=Ln(y,w,n-1,r,i),p++}return s(t),u}function js(e,t){try{return e==="domain"&&t&&typeof t=="object"&&t._events?"[Domain]":e==="domainEmitter"?"[DomainEmitter]":typeof global<"u"&&t===global?"[Global]":typeof window<"u"&&t===window?"[Window]":typeof document<"u"&&t===document?"[Document]":ar(t)?"[SyntheticEvent]":typeof t=="number"&&t!==t?"[NaN]":t===void 0?"[undefined]":typeof t=="function"?`[Function: ${St(t)}]`:typeof t=="symbol"?`[${String(t)}]`:typeof t=="bigint"?`[BigInt: ${String(t)}]`:`[object ${Object.getPrototypeOf(t).constructor.name}]`}catch(n){return`**non-serializable** (${n})`}}function Hs(e){return~-encodeURI(e).split(/%..|./).length}function Gs(e){return Hs(JSON.stringify(e))}var Zt;(function(e){e[e.PENDING=0]="PENDING";let n=1;e[e.RESOLVED=n]="RESOLVED";let r=2;e[e.REJECTED=r]="REJECTED"})(Zt||(Zt={}));function ht(e){return new V(t=>{t(e)})}function pe(e){return new V((t,n)=>{n(e)})}var V=class{__init(){this._state=Zt.PENDING}__init2(){this._handlers=[]}constructor(t){V.prototype.__init.call(this),V.prototype.__init2.call(this),V.prototype.__init3.call(this),V.prototype.__init4.call(this),V.prototype.__init5.call(this),V.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new V((r,i)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(s){i(s)}},o=>{if(!n)i(o);else try{r(n(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new V((n,r)=>{let i,o;return this.then(s=>{o=!1,i=s,t&&t()},s=>{o=!0,i=s,t&&t()}).then(()=>{if(o){r(i);return}n(i)})})}__init3(){this._resolve=t=>{this._setResult(Zt.RESOLVED,t)}}__init4(){this._reject=t=>{this._setResult(Zt.REJECTED,t)}}__init5(){this._setResult=(t,n)=>{if(this._state===Zt.PENDING){if(ve(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===Zt.PENDING)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Zt.RESOLVED&&n[1](this._value),this._state===Zt.REJECTED&&n[2](this._value),n[0]=!0)})}}};function wr(e){let t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]}function i(s){if(!n())return pe(new X("Not adding Promise because buffer limit was reached."));let a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(s){return new V((a,l)=>{let u=t.length;if(!u)return a(!0);let p=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(m=>{ht(m).then(()=>{--u||(clearTimeout(p),a(!0))},l)})})}return{$:t,add:i,drain:o}}function Je(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}var Bi=["fatal","error","warning","log","info","debug"];function vr(e){return e==="warn"?"warning":Bi.includes(e)?e:"log"}var Fi=Jt(),Sr={nowSeconds:()=>Date.now()/1e3};function zs(){let{performance:e}=Fi;if(!e||!e.now)return;let t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function Ys(){try{return br(module,"perf_hooks").performance}catch{return}}var xr=Ve()?Ys():zs(),Ui=xr===void 0?Sr:{nowSeconds:()=>(xr.timeOrigin+xr.now())/1e3},Qt=Sr.nowSeconds.bind(Sr),Rn=Ui.nowSeconds.bind(Ui);var Ke,Ws=(()=>{let{performance:e}=Fi;if(!e||!e.now){Ke="none";return}let t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,s=e.timing&&e.timing.navigationStart,l=typeof s=="number"?Math.abs(s+n-r):t,u=l<t;return o||u?i<=l?(Ke="timeOrigin",e.timeOrigin):(Ke="navigationStart",s):(Ke="dateNow",r)})();function me(e,t=[]){return[e,t]}function Nr(e,t){let[n,r]=e;return[n,[...r,t]]}function kn(e,t){e[1].forEach(r=>{let i=r[0].type;t(r,i)})}function Tr(e,t){return(t||new TextEncoder).encode(e)}function Ze(e,t){let[n,r]=e,i=JSON.stringify(n);function o(s){typeof i=="string"?i=typeof s=="string"?i+s:[Tr(i,t),s]:i.push(typeof s=="string"?Tr(s,t):s)}for(let s of r){let[a,l]=s;if(o(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)o(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(kt(l))}o(u)}}return typeof i=="string"?i:$s(i)}function $s(e){let t=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(t),r=0;for(let i of e)n.set(i,r),r+=i.length;return n}function Ar(e,t){let n=typeof e.data=="string"?Tr(e.data,t):e.data;return[Oe({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}var qs={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay_event",replay_recording:"replay_recording"};function Mn(e){return qs[e]}function Cn(e){if(!e||!e.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function Dr(e,t,n,r){let i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&{dsn:de(r)},...e.type==="transaction"&&i&&{trace:Oe({...i})}}}function Lr(e,t,n){let r=[{type:"client_report"},{timestamp:n||Qt(),discarded_events:e}];return me(t?{dsn:t}:{},[r])}function ji(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Hi(e,t){return e[t]||e.all||0}function Ir(e,t,n=Date.now()){return Hi(e,t)>n}function Rr(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},o=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(o)for(let a of o.trim().split(",")){let[l,u]=a.split(":",2),p=parseInt(l,10),m=(isNaN(p)?60:p)*1e3;if(!u)i.all=r+m;else for(let y of u.split(";"))i[y]=r+m}else s?i.all=r+ji(s,r):t===429&&(i.all=r+60*1e3);return i}function Gi(e){let t=Rn(),n={sid:Ft(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Xs(n)};return e&&te(n,e),n}function te(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Rn(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Ft()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function zi(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),te(e,n)}function Xs(e){return Oe({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}var Vs=100,pt=class{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){let n=new pt;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&te(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){let n=t(this);return n instanceof pt?n:this}return t instanceof pt?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):It(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,n){let r=typeof n=="number"?n:Vs;if(r<=0)return this;let i={timestamp:Qt(),...t};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};let r=this._span.transaction&&this._span.transaction.name;r&&(t.tags={transaction:r,...t.tags})}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Yi(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}_notifyEventProcessors(t,n,r,i=0){return new V((o,s)=>{let a=t[i];if(n===null||typeof a!="function")o(n);else{let l=a({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&l===null&&L.log(`Event processor "${a.id}" dropped event`),ve(l)?l.then(u=>this._notifyEventProcessors(t,u,r,i+1).then(o)).then(null,s):this._notifyEventProcessors(t,l,r,i+1).then(o).then(null,s)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?Xe(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}};function Yi(){return xe("globalEventProcessors",()=>[])}function ge(e){Yi().push(e)}var kr=4,Js=100,ee=class{__init(){this._stack=[{}]}constructor(t,n=new pt,r=kr){this._version=r,ee.prototype.__init.call(this),this.getStackTop().scope=n,t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){let n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){let t=pt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){let n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){let r=this._lastEventId=n&&n.event_id?n.event_id:Ft(),i=new Error("Sentry syntheticException");return this._withClient((o,s)=>{o.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},s)}),r}captureMessage(t,n,r){let i=this._lastEventId=r&&r.event_id?r.event_id:Ft(),o=new Error(t);return this._withClient((s,a)=>{s.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i},a)}),i}captureEvent(t,n){let r=n&&n.event_id?n.event_id:Ft();return t.type||(this._lastEventId=r),this._withClient((i,o)=>{i.captureEvent(t,{...n,event_id:r},o)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){let{scope:r,client:i}=this.getStackTop();if(!r||!i)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:s=Js}=i.getOptions&&i.getOptions()||{};if(s<=0)return;let l={timestamp:Qt(),...t},u=o?En(()=>o(l,n)):l;u!==null&&r.addBreadcrumb(u,s)}setUser(t){let n=this.getScope();n&&n.setUser(t)}setTags(t){let n=this.getScope();n&&n.setTags(t)}setExtras(t){let n=this.getScope();n&&n.setExtras(t)}setTag(t,n){let r=this.getScope();r&&r.setTag(t,n)}setExtra(t,n){let r=this.getScope();r&&r.setExtra(t,n)}setContext(t,n){let r=this.getScope();r&&r.setContext(t,n)}configureScope(t){let{scope:n,client:r}=this.getStackTop();n&&r&&t(n)}run(t){let n=On(this);try{t(this)}finally{On(n)}}getIntegration(t){let n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){return this._callExtensionMethod("startTransaction",t,n)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){let t=this.getStackTop(),n=t&&t.scope,r=n&&n.getSession();r&&zi(r),this._sendSessionUpdate(),n&&n.setSession()}startSession(t){let{scope:n,client:r}=this.getStackTop(),{release:i,environment:o}=r&&r.getOptions()||{},{userAgent:s}=rt.navigator||{},a=Gi({release:i,environment:o,...n&&{user:n.getUser()},...s&&{userAgent:s},...t});if(n){let l=n.getSession&&n.getSession();l&&l.status==="ok"&&te(l,{status:"exited"}),this.endSession(),n.setSession(a)}return a}shouldSendDefaultPii(){let t=this.getClient(),n=t&&t.getOptions();return Boolean(n&&n.sendDefaultPii)}_sendSessionUpdate(){let{scope:t,client:n}=this.getStackTop();if(!t)return;let r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){let{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){let i=Qe().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Extension method ${t} couldn't be found, doing nothing.`)}};function Qe(){return rt.__SENTRY__=rt.__SENTRY__||{extensions:{},hub:void 0},rt}function On(e){let t=Qe(),n=Ht(t);return Pn(t,e),n}function F(){let e=Qe();return(!Wi(e)||Ht(e).isOlderThan(kr))&&Pn(e,new ee),Ve()?Ks(e):Ht(e)}function Ks(e){try{let t=Qe().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return Ht(e);if(!Wi(n)||Ht(n).isOlderThan(kr)){let r=Ht(e).getStackTop();Pn(n,new ee(r.client,pt.clone(r.scope)))}return Ht(n)}catch{return Ht(e)}}function Wi(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Ht(e){return xe("hub",()=>new ee,e)}function Pn(e,t){if(!e)return!1;let n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Be(e,t){return F().captureException(e,{captureContext:t})}function Bn(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return F().captureMessage(e,n,r)}function Un(e){F().withScope(e)}var Zs="7";function Qs(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function ta(e){return`${Qs(e)}${e.projectId}/envelope/`}function ea(e,t){return fr({sentry_key:e.publicKey,sentry_version:Zs,...t&&{sentry_client:`${t.name}/${t.version}`}})}function tn(e,t={}){let n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${ta(e)}?${ea(e,r)}`}function na(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function $i(e,t,n,r){let i=Cn(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&{dsn:de(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e];return me(o,[s])}function qi(e,t,n,r){let i=Cn(n),o=e.type&&e.type!=="replay_event"?e.type:"event";na(e,n&&n.sdk);let s=Dr(e,i,r,t);return delete e.sdkProcessingMetadata,me(s,[[{type:o},e]])}var Xi=[];function ra(e){let t={};return e.forEach(n=>{let{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Mr(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Xe(n(t)):r=t;let i=ra(r),o=i.findIndex(s=>s.name==="Debug");if(o!==-1){let[s]=i.splice(o,1);i.push(s)}return i}function Vi(e){let t={};return e.forEach(n=>{Cr(n,t)}),t}function Cr(e,t){t[e.name]=e,Xi.indexOf(e.name)===-1&&(e.setupOnce(ge,F),Xi.push(e.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log(`Integration installed: ${e.name}`))}function Ji(e,t,n,r){let{normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e,s={...t,event_id:t.event_id||n.event_id||Ft(),timestamp:t.timestamp||Qt()};ia(s,e),oa(s,e.integrations.map(u=>u.name));let a=r;n.captureContext&&(a=pt.clone(a).update(n.captureContext));let l=ht(s);if(a){if(a.getAttachments){let u=[...n.attachments||[],...a.getAttachments()];u.length&&(n.attachments=u)}l=a.applyToEvent(s,n)}return l.then(u=>typeof i=="number"&&i>0?sa(u,i,o):u)}function ia(e,t){let{environment:n,release:r,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:"production"),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=he(e.message,o));let s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=he(s.value,o));let a=e.request;a&&a.url&&(a.url=he(a.url,o))}function oa(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function sa(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:kt(i.data,t,n)}}))},...e.user&&{user:kt(e.user,t,n)},...e.contexts&&{contexts:kt(e.contexts,t,n)},...e.extra&&{extra:kt(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=kt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>(i.data&&(i.data=kt(i.data,t,n)),i))),r}var Ki="Not capturing exception because it's already been captured.",Gt=class{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(t){if(Gt.prototype.__init.call(this),Gt.prototype.__init2.call(this),Gt.prototype.__init3.call(this),Gt.prototype.__init4.call(this),this._options=t,t.dsn){this._dsn=yn(t.dsn);let n=tn(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("No DSN provided, client will not do anything.")}captureException(t,n,r){if(Dn(t)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log(Ki);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(o=>this._captureEvent(o,n,r)).then(o=>{i=o})),i}captureMessage(t,n,r,i){let o=r&&r.event_id,s=Ie(t)?this.eventFromMessage(String(t),n,r):this.eventFromException(t,r);return this._process(s.then(a=>this._captureEvent(a,r,i)).then(a=>{o=a})),o}captureEvent(t,n,r){if(n&&n.originalException&&Dn(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log(Ki);return}let i=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(o=>{i=o})),i}captureSession(t){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("SDK not enabled, will not capture session.");return}typeof t.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),te(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){let n=this._transport;return n?this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i)):ht(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Vi(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){Cr(t,this._integrations)}sendEvent(t,n={}){if(this._dsn){let r=qi(t,this._dsn,this._options._metadata,this._options.tunnel);for(let i of n.attachments||[])r=Nr(r,Ar(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(t){if(this._dsn){let n=$i(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){let i=`${t}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}_updateSessionFromEvent(t,n){let r=!1,i=!1,o=n.exception&&n.exception.values;if(o){i=!0;for(let l of o){let u=l.mechanism;if(u&&u.handled===!1){r=!0;break}}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(te(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new V(n=>{let r=0,i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,t&&r>=t&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(t,n,r){let i=this.getOptions();return Ji(i,t,n,r)}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){let o=i;o.logLevel==="log"?L.log(o.message):L.warn(o)}})}_processEvent(t,n,r){let i=this.getOptions(),{sampleRate:o}=i;if(!this._isEnabled())return pe(new X("SDK not enabled, will not capture event.","log"));let s=Qi(t),a=Zi(t),l=t.type||"error",u=`before send for type \`${l}\``;return a&&typeof o=="number"&&Math.random()>o?(this.recordDroppedEvent("sample_rate","error",t),pe(new X(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"))):this._prepareEvent(t,n,r).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",l,t),new X("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;let y=ca(i,p,n);return aa(y,u)}).then(p=>{if(p===null)throw this.recordDroppedEvent("before_send",t.type||"error",t),new X(`${u} returned \`null\`, will not send event.`,"log");let m=r&&r.getSession();!s&&m&&this._updateSessionFromEvent(m,p);let y=p.transaction_info;if(s&&y&&p.transaction!==t.transaction){let w="custom";p.transaction_info={...y,source:w,changes:[...y.changes,{source:w,timestamp:p.timestamp,propagations:y.propagations}]}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof X?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new X(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){this._transport&&this._dsn?this._transport.send(t).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error("Error while sending event:",n)}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error("Transport disabled")}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{let[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}};function aa(e,t){let n=`${t} must return \`null\` or a valid event.`;if(ve(e))return e.then(r=>{if(!It(r)&&r!==null)throw new X(n);return r},r=>{throw new X(`${t} rejected with ${r}`)});if(!It(e)&&e!==null)throw new X(n);return e}function ca(e,t,n){let{beforeSend:r,beforeSendTransaction:i}=e;return Zi(t)&&r?r(t,n):Qi(t)&&i?i(t,n):t}function Zi(e){return e.type===void 0}function Qi(e){return e.type==="transaction"}function Or(e,t){t.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?L.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));let n=F(),r=n.getScope();r&&r.update(t.initialScope);let i=new e(t);n.bindClient(i)}var la=30;function Ue(e,t,n=wr(e.bufferSize||la)){let r={},i=s=>n.drain(s);function o(s){let a=[];if(kn(s,(m,y)=>{let w=Mn(y);if(Ir(r,w)){let v=to(m,y);e.recordDroppedEvent("ratelimit_backoff",w,v)}else a.push(m)}),a.length===0)return ht();let l=me(s[0],a),u=m=>{kn(l,(y,w)=>{let v=to(y,w);e.recordDroppedEvent(m,Mn(w),v)})},p=()=>t({body:Ze(l,e.textEncoder)}).then(m=>(m.statusCode!==void 0&&(m.statusCode<200||m.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Sentry responded with status code ${m.statusCode} to sent event.`),r=Rr(r,m),m),m=>{throw u("network_error"),m});return n.add(p).then(m=>m,m=>{if(m instanceof X)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error("Skipped sending event because buffer is full."),u("queue_overflow"),ht();throw m})}return{send:o,flush:i}}function to(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}var en="7.30.0";var Ne={};rr(Ne,{FunctionToString:()=>ne,InboundFilters:()=>zt});var eo,ne=class{constructor(){ne.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=ne.id}setupOnce(){eo=Function.prototype.toString,Function.prototype.toString=function(...t){let n=Se(this)||this;return eo.apply(n,t)}}};ne.__initStatic();var ua=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],zt=class{static __initStatic(){this.id="InboundFilters"}__init(){this.name=zt.id}constructor(t={}){this._options=t,zt.prototype.__init.call(this)}setupOnce(t,n){let r=i=>{let o=n();if(o){let s=o.getIntegration(zt);if(s){let a=o.getClient(),l=a?a.getOptions():{},u=fa(s._options,l);return da(i,u)?null:i}}return i};r.id=this.name,t(r)}};zt.__initStatic();function fa(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...ua],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function da(e,t){return t.ignoreInternal&&_a(e)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Event dropped due to being internal Sentry Error.
Event: ${jt(e)}`),!0):ha(e,t.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${jt(e)}`),!0):pa(e,t.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${jt(e)}.
Url: ${Fn(e)}`),!0):ma(e,t.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${jt(e)}.
Url: ${Fn(e)}`),!0)}function ha(e,t){return!t||!t.length?!1:ga(e).some(n=>We(n,t))}function pa(e,t){if(!t||!t.length)return!1;let n=Fn(e);return n?We(n,t):!1}function ma(e,t){if(!t||!t.length)return!0;let n=Fn(e);return n?We(n,t):!0}function ga(e){if(e.message)return[e.message];if(e.exception)try{let{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error(`Cannot extract message for event ${jt(e)}`),[]}return[]}function _a(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function ya(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Fn(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?ya(t):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error(`Cannot extract url for event ${jt(e)}`),null}}var k=rt,Pr=0;function Br(){return Pr>0}function Ia(){Pr++,setTimeout(()=>{Pr--})}function _e(e,t={},n){if(typeof e!="function")return e;try{let i=e.__sentry_wrapped__;if(i)return i;if(Se(e))return e}catch{return e}let r=function(){let i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);let o=i.map(s=>_e(s,t));return e.apply(this,o)}catch(o){throw Ia(),Un(s=>{s.addEventProcessor(a=>(t.mechanism&&(Pe(a,void 0,void 0),Kt(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),Be(o)}),o}};try{for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}wn(r,e),Ce(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function jr(e,t){let n=Hr(e,t),r={type:t&&t.name,value:Ca(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Ra(e,t,n,r){let o=F().getClient(),s=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:Re(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${dr(t)}`}]},extra:{__serialized__:In(t,s)}};if(n){let l=Hr(e,n);l.length&&(a.exception.values[0].stacktrace={frames:l})}return a}function Ur(e,t){return{exception:{values:[jr(e,t)]}}}function Hr(e,t){let n=t.stacktrace||t.stack||"",r=Ma(t);try{return e(n,r)}catch{}return[]}var ka=/Minified React error #\d+;/i;function Ma(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(ka.test(e.message))return 1}return 0}function Ca(e){let t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function no(e,t,n,r){let i=n&&n.syntheticException||void 0,o=jn(e,t,i,r);return Kt(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),ht(o)}function ro(e,t,n="info",r,i){let o=r&&r.syntheticException||void 0,s=Fr(e,t,o,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),ht(s)}function jn(e,t,n,r,i){let o;if(Ye(t)&&t.error)return Ur(e,t.error);if(gn(t)||ir(t)){let s=t;if("stack"in t)o=Ur(e,t);else{let a=s.name||(gn(s)?"DOMError":"DOMException"),l=s.message?`${a}: ${s.message}`:a;o=Fr(e,l,n,r),Pe(o,l)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return ze(t)?Ur(e,t):It(t)||Re(t)?(o=Ra(e,t,n,i),Kt(o,{synthetic:!0}),o):(o=Fr(e,t,n,r),Pe(o,`${t}`,void 0),Kt(o,{synthetic:!0}),o)}function Fr(e,t,n,r){let i={message:t};if(r&&n){let o=Hr(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}return i}var Hn=1024,Gr="Breadcrumbs",Yt=class{static __initStatic(){this.id=Gr}__init(){this.name=Yt.id}constructor(t){Yt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){this.options.console&&Tt("console",Pa),this.options.dom&&Tt("dom",Oa(this.options.dom)),this.options.xhr&&Tt("xhr",Ba),this.options.fetch&&Tt("fetch",Ua),this.options.history&&Tt("history",Fa)}addSentryBreadcrumb(t){this.options.sentry&&F().addBreadcrumb({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:jt(t)},{event:t})}};Yt.__initStatic();function Oa(e){function t(n){let r,i=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>Hn&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn(`\`dom.maxStringLength\` cannot exceed ${Hn}, but a value of ${o} was configured. Sentry will use ${Hn} instead.`),o=Hn),typeof i=="string"&&(i=[i]);try{r=n.event.target?ke(n.event.target,{keyAttrs:i,maxStringLength:o}):ke(n.event,{keyAttrs:i,maxStringLength:o})}catch{r="<unknown>"}r.length!==0&&F().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return t}function Pa(e){for(let n=0;n<e.args.length;n++)if(e.args[n]==="ref=Ref<"){e.args[n+1]="viewRef";break}let t={category:"console",data:{arguments:e.args,logger:"console"},level:vr(e.level),message:bn(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${bn(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;F().addBreadcrumb(t,{input:e.args,level:e.level})}function Ba(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;let{method:t,url:n,status_code:r,body:i}=e.xhr.__sentry_xhr__||{};F().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:r},type:"http"},{xhr:e.xhr,input:i});return}}function Ua(e){!e.endTimestamp||e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"||(e.error?F().addBreadcrumb({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args}):F().addBreadcrumb({category:"fetch",data:{...e.fetchData,status_code:e.response.status},type:"http"},{input:e.args,response:e.response}))}function Fa(e){let t=e.from,n=e.to,r=Je(k.location.href),i=Je(t),o=Je(n);i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),r.protocol===i.protocol&&r.host===i.host&&(t=i.relative),F().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}var Gn=class extends Gt{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:en}],version:en},super(t),t.sendClientReports&&k.document&&k.document.addEventListener("visibilitychange",()=>{k.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return no(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return ro(this._options.stackParser,t,n,r,this._options.attachStacktrace)}sendEvent(t,n){let r=this.getIntegrationById(Gr);hr([r,"optionalAccess",i=>i.addSentryBreadcrumb,"optionalCall",i=>i(t)]),super.sendEvent(t,n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){let t=this._clearOutcomes();if(t.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log("Sending outcomes:",t);let n=tn(this._dsn,this._options),r=Lr(t,this._options.tunnel&&de(this._dsn));try{Object.prototype.toString.call(k&&k.navigator)==="[object Navigator]"&&typeof k.navigator.sendBeacon=="function"&&!this._options.transportOptions?k.navigator.sendBeacon.bind(k.navigator)(n,Ze(r)):this._sendEnvelope(r)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.error(i)}}};var nn;function io(){if(nn)return nn;if($e(k.fetch))return nn=k.fetch.bind(k);let e=k.document,t=k.fetch;if(e&&typeof e.createElement=="function")try{let n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);let r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return nn=t.bind(k)}function oo(){nn=void 0}function so(e,t=io()){function n(r){let i={body:r.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r.body.length<=65536,...e.fetchOptions};try{return t(e.url,i).then(o=>({statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return oo(),pe(o)}}return Ue(e,n)}var ja=4;function ao(e){function t(n){return new V((r,i)=>{let o=new XMLHttpRequest;o.onerror=i,o.onreadystatechange=()=>{o.readyState===ja&&r({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(let s in e.headers)Object.prototype.hasOwnProperty.call(e.headers,s)&&o.setRequestHeader(s,e.headers[s]);o.send(n.body)})}return Ue(e,t)}var zn="?";var Ha=30,Ga=40,za=50;function zr(e,t,n,r){let i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}var Ya=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Wa=/\((\S*)(?::(\d+))(?::(\d+))\)/,$a=e=>{let t=Ya.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){let o=Wa.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}let[r,i]=lo(t[1]||zn,t[2]);return zr(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},qa=[Ha,$a],Xa=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Va=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ja=e=>{let t=Xa.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let o=Va.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],i=t[1]||zn;return[i,r]=lo(i,r),zr(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ka=[za,Ja],Za=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Qa=e=>{let t=Za.exec(e);return t?zr(t[2],t[1]||zn,+t[3],t[4]?+t[4]:void 0):void 0},tc=[Ga,Qa];var ec=[qa,Ka,tc],co=xn(...ec),lo=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:zn,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Yr={};rr(Yr,{Breadcrumbs:()=>Yt,Dedupe:()=>Ot,GlobalHandlers:()=>yt,HttpContext:()=>Ct,LinkedErrors:()=>Mt,TryCatch:()=>Wt});var yt=class{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=yt.id}__init2(){this._installFunc={onerror:nc,onunhandledrejection:rc}}constructor(t){yt.prototype.__init.call(this),yt.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...t}}setupOnce(){Error.stackTraceLimit=50;let t=this._options;for(let n in t){let r=this._installFunc[n];r&&t[n]&&(sc(n),r(),this._installFunc[n]=void 0)}}};yt.__initStatic();function nc(){Tt("error",e=>{let[t,n,r]=ho();if(!t.getIntegration(yt))return;let{msg:i,url:o,line:s,column:a,error:l}=e;if(Br()||l&&l.__sentry_own_request__)return;let u=l===void 0&&vt(i)?oc(i,o,s,a):uo(jn(n,l||i,void 0,r,!1),o,s,a);u.level="error",fo(t,l,u,"onerror")})}function rc(){Tt("unhandledrejection",e=>{let[t,n,r]=ho();if(!t.getIntegration(yt))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch{}if(Br()||i&&i.__sentry_own_request__)return!0;let o=Ie(i)?ic(i):jn(n,i,void 0,r,!0);o.level="error",fo(t,i,o,"onunhandledrejection")})}function ic(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function oc(e,t,n,r){let i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,o=Ye(e)?e.message:e,s="Error",a=o.match(i);return a&&(s=a[1],o=a[2]),uo({exception:{values:[{type:s,value:o}]}},t,n,r)}function uo(e,t,n,r){let i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},l=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,p=isNaN(parseInt(n,10))?void 0:n,m=vt(t)&&t.length>0?t:lr();return l.length===0&&l.push({colno:u,filename:m,function:"?",in_app:!0,lineno:p}),e}function sc(e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.log(`Global Handler attached: ${e}`)}function fo(e,t,n,r){Kt(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function ho(){let e=F(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}var ac=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Wt=class{static __initStatic(){this.id="TryCatch"}__init(){this.name=Wt.id}constructor(t){Wt.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){this._options.setTimeout&&Q(k,"setTimeout",po),this._options.setInterval&&Q(k,"setInterval",po),this._options.requestAnimationFrame&&Q(k,"requestAnimationFrame",cc),this._options.XMLHttpRequest&&"XMLHttpRequest"in k&&Q(XMLHttpRequest.prototype,"send",lc);let t=this._options.eventTarget;t&&(Array.isArray(t)?t:ac).forEach(uc)}};Wt.__initStatic();function po(e){return function(...t){let n=t[0];return t[0]=_e(n,{mechanism:{data:{function:St(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function cc(e){return function(t){return e.apply(this,[_e(t,{mechanism:{data:{function:"requestAnimationFrame",handler:St(e)},handled:!0,type:"instrument"}})])}}function lc(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Q(n,i,function(o){let s={mechanism:{data:{function:i,handler:St(o)},handled:!0,type:"instrument"}},a=Se(o);return a&&(s.mechanism.data.handler=St(a)),_e(o,s)})}),e.apply(this,t)}}function uc(e){let t=k,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Q(n,"addEventListener",function(r){return function(i,o,s){try{typeof o.handleEvent=="function"&&(o.handleEvent=_e(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:St(o),target:e},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[i,_e(o,{mechanism:{data:{function:"addEventListener",handler:St(o),target:e},handled:!0,type:"instrument"}}),s])}}),Q(n,"removeEventListener",function(r){return function(i,o,s){let a=o;try{let l=a&&a.__sentry_wrapped__;l&&r.call(this,i,l,s)}catch{}return r.call(this,i,a,s)}}))}var fc="cause",dc=5,Mt=class{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Mt.id}constructor(t={}){Mt.prototype.__init.call(this),this._key=t.key||fc,this._limit=t.limit||dc}setupOnce(){let t=F().getClient();!t||ge((n,r)=>{let i=F().getIntegration(Mt);return i?hc(t.getOptions().stackParser,i._key,i._limit,n,r):n})}};Mt.__initStatic();function hc(e,t,n,r,i){if(!r.exception||!r.exception.values||!i||!xt(i.originalException,Error))return r;let o=mo(e,n,i.originalException,t);return r.exception.values=[...o,...r.exception.values],r}function mo(e,t,n,r,i=[]){if(!xt(n[r],Error)||i.length+1>=t)return i;let o=jr(e,n[r]);return mo(e,t,n[r],r,[o,...i])}var Ct=class{constructor(){Ct.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Ct.id}setupOnce(){ge(t=>{if(F().getIntegration(Ct)){if(!k.navigator&&!k.location&&!k.document)return t;let n=t.request&&t.request.url||k.location&&k.location.href,{referrer:r}=k.document||{},{userAgent:i}=k.navigator||{},o={...t.request&&t.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}},s={...t.request,...n&&{url:n},headers:o};return{...t,request:s}}return t})}};Ct.__initStatic();var Ot=class{constructor(){Ot.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Ot.id}setupOnce(t,n){let r=i=>{let o=n().getIntegration(Ot);if(o){try{if(pc(i,o._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return o._previousEvent=i}return o._previousEvent=i}return i};r.id=this.name,t(r)}};Ot.__initStatic();function pc(e,t){return t?!!(mc(e,t)||gc(e,t)):!1}function mc(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Eo(e,t)||!yo(e,t))}function gc(e,t){let n=go(t),r=go(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Eo(e,t)||!yo(e,t))}function yo(e,t){let n=_o(e),r=_o(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){let o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function Eo(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function go(e){return e.exception&&e.exception.values&&e.exception.values[0]}function _o(e){let t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}var wo=[new Ne.InboundFilters,new Ne.FunctionToString,new Wt,new Yt,new yt,new Mt,new Ot,new Ct];function Wr(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=wo),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),k.SENTRY_RELEASE&&k.SENTRY_RELEASE.id&&(e.release=k.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);let t={...e,stackParser:mr(e.stackParser||co),integrations:Mr(e),transport:e.transport||(Sn()?so:ao)};Or(Gn,t),e.autoSessionTracking&&_c()}function bo(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function _c(){if(typeof k.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&L.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}let e=F();!e.captureSession||(bo(e),Tt("history",({from:t,to:n})=>{t===void 0||t===n||bo(F())}))}var vo={};k.Sentry&&k.Sentry.Integrations&&(vo=k.Sentry.Integrations);var Ch={...vo,...Ne,...Yr};var nt={name:"__MSG_appName__",description:"__MSG_appDesc__",short_name:"__MSG_appShortName_",homepage_url:"https://betterpreviews.com/",__package_name__:"search-preview","__comment:version__":"Firefox does not support leading zeros in versions",version:"24.03.08",__sentry_dsn__:"https://bf0a1e40a1784502aad701a201efdf08@o526305.ingest.sentry.io/4504743520436224",__measurement_id__:"G-XN737SN9S2",__ga_api_secret__:"zigXBV_3TjyIjkXuSPjo8w",manifest_version:3,default_locale:"en",author:"Justice Ogbonna",permissions:["storage","declarativeNetRequest","contextMenus","cookies","activeTab"],declarative_net_request:{rule_resources:[{id:"ruleset_1",enabled:!0,path:"assets/rules.json"}]},host_permissions:["*://*/*"],action:{default_icon:{"16":"assets/logo-16x16.png","24":"assets/logo-24x24.png","32":"assets/logo-32x32.png"},default_title:"Search Preview"},icons:{"16":"assets/logo-16x16.png","32":"assets/logo-32x32.png","48":"assets/logo-48x48.png","128":"assets/logo-128x128.png"},content_scripts:[{matches:["http://*/*","https://*/*"],all_frames:!0,js:["content-script/content-script.js"],css:["content-script/content-script.css"]}],background:{__chrome__service_worker:"background-script/service-worker.js",__firefox__scripts:["background-script/service-worker.js"]},side_panel:{default_path:"sidepanel/side-panel.html"},options_page:"options-page/options.html",web_accessible_resources:[{resources:["assets/logo-24x24.png"],matches:["<all_urls>"]},{resources:["options-page/options.html"],matches:["<all_urls>"]},{resources:["welcome/my-element.js"],matches:["<all_urls>"]},{resources:["content-script/floatie/tooltip.js"],matches:["<all_urls>"]}],__firefox__key:"",__firefox__browser_specific_settings:{gecko:{id:"search-preview@essentialkit.org"}}};var xo=nt.__package_name__,mt=class{constructor(t){this.tag="";this.debug=(...t)=>this.internalLog(3,...t);this.log=(...t)=>this.internalLog(2,...t);this.warn=(...t)=>this.internalLog(1,...t);this.error=(...t)=>this.internalLog(0,...t);this.tag=xo+"."+(typeof t=="string"?t:t.constructor.name),IS_DEV_BUILD||this.initSentry(),this.listenForBgLogs()}initSentry(){Wr({dsn:nt.__sentry_dsn__,tracesSampleRate:.1,release:xo+"@"+nt.version,environment:"PROD"})}listenForBgLogs(){chrome?.runtime.onMessage.addListener((t,n)=>{n.id!==chrome.runtime.id||t.action!="log"||this.internalLogTagOverride(t.data.level,t.data.tag,...t.data.messages)})}internalLog(t,...n){this.internalLogTagOverride(t,this.tag,...n)}internalLogTagOverride(t,n,...r){let i=new Date(Date.now()),o=["%c%s %s","color: blue",`[${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}]`,n,...r];if(IS_DEV_BUILD)switch(t){case 3:console.debug(...o);break;case 1:console.warn(...o);break;case 2:console.log(...o);break;case 0:console.error(...o);break}else{switch(t){case 1:Bn(o.join(" "));break;case 0:Be(o.join(" "));break}return}}};var So=document.createElement("div");So.innerHTML='<div class=wb-header><div class=wb-control><span title="Minimize" class=wb-min></span><span title="Maximize" class=wb-max></span><span title="Fullscreen" class=wb-full></span><span title="Close" class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-footer><feedback-form size="inline"></feedback-form></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>';function To(e){return(e||So).cloneNode(!0)}var No=`
  .winbox {
    position: fixed;
    left: 0;
    top: 0;
    background: #0050ff;
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
    /* using transform make contents blur when applied and requires more gpu memory */
    transition: width 0.3s, height 0.3s, left 0.3s, top 0.3s;
    transition-timing-function: cubic-bezier(0.3, 1, 0.3, 1);
    /* contain "strict" does not make overflow contents selectable */
    contain: layout size;
    /* explicitly set text align to left fixes an issue with iframes alignment when centered */
    text-align: left;
    /* workaround for using passive listeners */
    touch-action: none;
  }
  .wb-header {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 35px;
    line-height: 35px;
    color: #fff;
    overflow: hidden;
    z-index: 1;
  }
  .wb-body {
    position: absolute;
    top: 35px;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
    will-change: contents;
    background: #fff;
    /* when no border is set there is some thin line visible */
    /* always hide top border visually */
    margin-top: 0 !important;
    contain: strict;
    z-index: 0;
  }
  .wb-footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    display: none;
  }
  .winbox.show-footer .wb-body {
    bottom: 35px; /* height of footer */
  }
  .winbox.show-footer .wb-footer {
    display: block;
  }
  body > .wb-body {
    position: relative;
    display: inline-block;
    visibility: hidden;
    contain: none;
  }
  .wb-drag {
    height: 100%;
    padding-left: 10px;
    cursor: move;
  }
  .wb-title {
    font-family: Arial, sans-serif;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .wb-icon {
    display: none;
    width: 20px;
    height: 100%;
    margin: -1px 8px 0 -3px;
    float: left;
    background-repeat: no-repeat;
    background-size: 100%;
    background-position: center;
  }
  .wb-n {
    position: absolute;
    top: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-e {
    position: absolute;
    top: 0;
    right: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-s {
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-w {
    position: absolute;
    top: 0;
    left: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-nw {
    position: absolute;
    top: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-ne {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-sw {
    position: absolute;
    bottom: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-se {
    position: absolute;
    bottom: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-control {
    float: right;
    height: 100%;
    max-width: 100%;
    text-align: center;
  }
  .wb-control * {
    display: inline-block;
    width: 30px;
    height: 100%;
    max-width: 100%;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
  }
  .wb-min {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);
    background-size: 14px auto;
    background-position: center calc(50% + 6px);
  }
  .wb-max {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);
    background-size: 17px auto;
  }
  .wb-close {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);
    background-size: 15px auto;
    background-position: 5px center;
  }
  .wb-full {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);
    background-size: 16px auto;
  }
  .wb-nav-away {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0yMTIuMzA5LTE0MC4wMDFxLTMwLjMwOCAwLTUxLjMwOC0yMXQtMjEtNTEuMzA4di01MzUuMzgycTAtMzAuMzA4IDIxLTUxLjMwOHQ1MS4zMDgtMjFoMjUyLjMwNVYtNzYwSDIxMi4zMDlxLTQuNjE2IDAtOC40NjMgMy44NDYtMy44NDYgMy44NDctMy44NDYgOC40NjN2NTM1LjM4MnEwIDQuNjE2IDMuODQ2IDguNDYzIDMuODQ3IDMuODQ2IDguNDYzIDMuODQ2aDUzNS4zODJxNC42MTYgMCA4LjQ2My0zLjg0NiAzLjg0Ni0zLjg0NyAzLjg0Ni04LjQ2M3YtMjUyLjMwNWg1OS45OTl2MjUyLjMwNXEwIDMwLjMwOC0yMSA1MS4zMDh0LTUxLjMwOCAyMUgyMTIuMzA5Wm0xNzYuNDYtMjA2LjYxNS00Mi4xNTMtNDIuMTUzTDcxNy44NDctNzYwSDU2MHYtNTkuOTk5aDI1OS45OTlWLTU2MEg3NjB2LTE1Ny44NDdMMzg4Ljc2OS0zNDYuNjE2WiIvPjwvc3ZnPg==);
    
    background-size: 20px auto;
    filter: invert(1);
  }
  .wb-settings {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik00NTAuMDAxLTEzMC4wMDF2LTIxOS45OThoNTkuOTk4djgwaDMyMHY1OS45OThoLTMyMHY4MGgtNTkuOTk4Wm0tMzIwLTgwdi01OS45OThoMjE5Ljk5OHY1OS45OThIMTMwLjAwMVptMTYwLTE2MHYtODBoLTE2MHYtNTkuOTk4aDE2MHYtODBoNTkuOTk4djIxOS45OThoLTU5Ljk5OFptMTYwLTgwdi01OS45OThoMzc5Ljk5OHY1OS45OThINDUwLjAwMVptMTYwLTE2MHYtMjE5Ljk5OGg1OS45OTh2ODBoMTYwdjU5Ljk5OGgtMTYwdjgwaC01OS45OThabS00ODAtODB2LTU5Ljk5OGgzNzkuOTk4djU5Ljk5OEgxMzAuMDAxWiIvPjwvc3ZnPg==);
  
    background-size: 20px auto;
    filter: invert(1);
  }
  /*
  .winbox:not(.max) .wb-max {
    background-image: url(@restore);
    background-size: 20px auto;
    background-position: center bottom 5px;
  }
  */
  /*
  .winbox:fullscreen{
    transition: none !important;
  }
  .winbox:fullscreen .wb-full{
    background-image: url(@minimize);
  }
  .winbox:fullscreen > div,
  .winbox:fullscreen .wb-title,
  */
  .winbox.modal .wb-body ~ div,
  .winbox.modal .wb-drag,
  .winbox.min .wb-body ~ div,
  .winbox.max .wb-body ~ div {
    pointer-events: none;
  }
  .winbox.max .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-full,
  .winbox.min .wb-min {
    display: none;
  }
  .winbox.min .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-body > * {
    display: none;
  }
  .winbox.hide {
    display: none;
  }
  .winbox.max {
    box-shadow: none;
  }
  .winbox.max .wb-body {
    margin: 0 !important;
  }
  .winbox iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 0;
  }
  body.wb-lock .winbox {
    will-change: left, top, width, height;
    transition: none;
  }
  body.wb-lock iframe {
    pointer-events: none;
  }
  .winbox.modal:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    border-radius: inherit;
  }
  .winbox.modal:after {
    content: '';
    position: absolute;
    top: -50vh;
    left: -50vw;
    right: -50vw;
    bottom: -50vh;
    background: #0d1117;
    animation: wb-fade-in 0.2s ease-out forwards;
    z-index: -1;
  }
  .winbox.modal .wb-min,
  .winbox.modal .wb-max,
  .winbox.modal .wb-full {
    display: none;
  }
  @keyframes wb-fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 0.85;
    }
  }
  .no-animation {
    transition: none;
  }
  .no-shadow {
    box-shadow: none;
  }
  .no-header .wb-header {
    display: none;
  }
  .no-header .wb-body {
    top: 0;
  }
  .no-min .wb-min {
    display: none;
  }
  .no-max .wb-max {
    display: none;
  }
  .no-full .wb-full {
    display: none;
  }
  .no-close .wb-close {
    display: none;
  }
  .no-resize .wb-body ~ div {
    display: none;
  }
  .no-move:not(.min) .wb-title {
    pointer-events: none;
  }
  .wb-body .wb-hide {
    display: none;
  }
  .wb-show {
    display: none;
  }
  .wb-body .wb-show {
    display: revert;
  }
`;function Et(e,t,n,r){e&&e.addEventListener(t,n,r||!1)}function rn(e,t,n,r){e&&e.removeEventListener(t,n,r||!1)}function Fe(e,t){e.stopPropagation(),e.cancelable&&e.preventDefault()}function Nt(e,t){return e.getElementsByClassName(t)[0]}function $r(e,t){e.classList.add(t)}function Ao(e,t){return e.classList.contains(t)}function qr(e,t){e.classList.remove(t)}function ut(e,t,n){n=""+n,e["_s_"+t]!==n&&(e.style.setProperty(t,n),e["_s_"+t]=n)}function Do(e,t){let n=e.firstChild;n?n.nodeValue=t:e.textContent=t}var Yn=!1,He=[],on={capture:!0,passive:!0},Pt,bc=0,sn=10,je,ye,ie,Io,oe,se,ae=class{constructor(t,n){if(!(this instanceof ae))return new ae(t);Pt||wc();let r,i,o,s,a,l,u,p,m,y,w,v,D,S,I,A,N,T,M,R,B,H,G,P,$,K,bt,st,O,at,ft,et,ct,j,U,Dt,qt,Xt,Lt,gt,le,Bt,ue,wt,q,z,lt;if(t&&(n&&(a=t,t=n),typeof t=="string"?a=t:(r=t.id,i=t.index,o=t.root,s=t.template,a=a||t.title,l=t.icon,u=t.mount,p=t.html,m=t.url,y=t.shadowel,v=t.framename,D=t.cssurl,S=t.width,I=t.height,A=t.minwidth,N=t.minheight,T=t.maxwidth,M=t.maxheight,R=t.autosize,bt=t.min,st=t.max,O=t.hidden,at=t.modal,B=t.x||(at?"center":0),H=t.y||(at?"center":0),G=t.top,P=t.left,$=t.bottom,K=t.right,ft=t.background,et=t.border,ct=t.header,j=t.class,Dt=t.onclose,qt=t.onfocus,Xt=t.onblur,Lt=t.onmove,gt=t.onresize,le=t.onfullscreen,Bt=t.onmaximize,ue=t.onminimize,wt=t.onrestore,q=t.onhide,z=t.onshow,lt=t.onload)),this.dom=To(s),this.dom.id=this.id=r||"winbox-"+ ++bc,this.dom.className="winbox"+(j?" "+(typeof j=="string"?j:j.join(" ")):"")+(at?" modal":""),this.dom.winbox=this,this.window=this.dom,this.body=Nt(this.dom,"wb-body"),this.header=ct||35,(i||i===0)&&(sn=i),ft&&this.setBackground(ft),et?ut(this.body,"margin",et+(isNaN(et)?"":"px")):et=0,ct){let J=Nt(this.dom,"wb-header");ut(J,"height",ct+"px"),ut(J,"line-height",ct+"px"),ut(this.body,"top",ct+"px")}a&&this.setTitle(a),l&&this.setIcon(l),u?this.mount(u):p?this.body.innerHTML=p:m&&this.setUrl(m,lt),G=G?it(G,se):0,$=$?it($,se):0,P=P?it(P,oe):0,K=K?it(K,oe):0;let _t=oe-P-K,dt=se-G-$;if(T=T?it(T,_t):_t,M=M?it(M,dt):dt,A=A?it(A,T):150,N=N?it(N,M):this.header,R?((o||Pt).appendChild(this.body),S=Math.max(Math.min(this.body.clientWidth+et*2+1,T),A),I=Math.max(Math.min(this.body.clientHeight+this.header+et+1,M),N),this.dom.appendChild(this.body)):(S=S?it(S,T):Math.max(T/2,A)|0,I=I?it(I,M):Math.max(M/2,N)|0),B=B?it(B,_t,S):P,H=H?it(H,dt,I):G,this.x=B,this.y=H,this.width=S,this.height=I,this.minwidth=A,this.minheight=N,this.maxwidth=T,this.maxheight=M,this.top=G,this.right=K,this.bottom=$,this.left=P,this.index=i,this.min=!1,this.max=!1,this.full=!1,this.hidden=!1,this.focused=!1,this.onclose=Dt,this.onfocus=qt,this.onblur=Xt,this.onmove=Lt,this.onresize=gt,this.onfullscreen=le,this.onmaximize=Bt,this.onminimize=ue,this.onrestore=wt,this.onhide=q,this.onshow=z,st?this.maximize():bt?this.minimize():this.resize().move(),O?this.hide():(this.focus(),(i||i===0)&&(this.index=i,i>sn&&(sn=i))),ut(this.shadowdom?this.shadowdom:this.dom,"z-index",i),vc(this),y){let J=document.createElement(y);J.style.position="absolute";let Vt=document.createElement("style");if(Vt.textContent=No,J.appendChild(Vt),D){let fe=document.createElement("link");fe.rel="stylesheet",fe.type="text/css",fe.href=D,fe.itemprop="url",J.appendChild(fe)}J.appendChild(this.dom),J.attachShadow({mode:"open"}).innerHTML="<slot></slot>",this.shadowdom=J,(o||Pt).appendChild(J)}else(o||Pt).appendChild(this.dom);(U=t.oncreate)&&U.call(this,t)}static new(t){return new ae(t)}mount(t){return this.unmount(),t._backstore||(t._backstore=t.parentNode),this.body.textContent="",this.body.appendChild(t),this}unmount(t){let n=this.body.firstChild;if(n){let r=t||n._backstore;r&&r.appendChild(n),n._backstore=t}return this}setTitle(t){let n=Nt(this.dom,"wb-title");return Do(n,this.title=t),this}setIcon(t){let n=Nt(this.dom,"wb-icon");return ut(n,"background-image","url("+t+")"),ut(n,"display","inline-block"),this}setBackground(t){return ut(this.dom,"background",t),this}setUrl(t,n){let r=this.body.firstChild;if(r&&r.tagName.toLowerCase()==="iframe")r.src=t;else{let i=this.framename??"";this.body.innerHTML=`<iframe name="${i}" src="${t}"></iframe>`,n&&(this.body.firstChild.onload=n)}return this}focus(t){return t===!1?this.blur():(ye!==this&&this.dom&&(ye&&ye.blur(),ut(this.shadowdom?this.shadowdom:this.dom,"z-index",++sn),this.index=sn,this.addClass("focus"),ye=this,this.focused=!0,this.onfocus&&this.onfocus()),this)}blur(t){return t===!1?this.focus():(ye===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),ye=null),this)}hide(t){if(t===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")}show(t){if(t===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")}minimize(t){return t===!1?this.restore():(je&&$n(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(He.push(this),Xr(),this.dom.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize()),this)}restore(){return je&&$n(),this.min&&(Wn(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this}maximize(t){return t===!1?this.restore():(je&&$n(),this.min&&Wn(this),this.max||(this.addClass("max").resize(oe-this.left-this.right,se-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)}fullscreen(t){if(this.min&&(Wn(this),this.resize().move()),!je||!$n())this.body[ie](),je=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(t===!1)return this.restore();return this}close(t){if(this.onclose&&this.onclose(t))return!0;this.min&&Wn(this),this.unmount(),this.dom.remove(),this.dom.textContent="",this.dom.winbox=null,this.body=null,this.dom=null,ye===this&&(ye=null)}move(t,n,r){return!t&&t!==0?(t=this.x,n=this.y):r||(this.x=t?t=it(t,oe-this.left-this.right,this.width):0,this.y=n?n=it(n,se-this.top-this.bottom,this.height):0),ut(this.dom,"left",t+"px"),ut(this.dom,"top",n+"px"),this.onmove&&this.onmove(t,n),this}resize(t,n,r){return!t&&t!==0?(t=this.width,n=this.height):r||(this.width=t?t=it(t,this.maxwidth):0,this.height=n?n=it(n,this.maxheight):0,t=Math.max(t,this.minwidth),n=Math.max(n,this.minheight)),ut(this.dom,"width",t+"px"),ut(this.dom,"height",n+"px"),this.onresize&&this.onresize(t,n),this}addControl(t){let n=t.class,r=t.image,i=t.click,o=t.index,s=t.title,a=document.createElement("span"),l=Nt(this.dom,"wb-control"),u=this;return n&&(a.className=n),r&&ut(a,"background-image","url("+r+")"),i&&(a.onclick=function(p){i.call(this,p,u)}),s&&(a.title=s),l.insertBefore(a,l.childNodes[o||0]),this}removeControl(t){return t=Nt(this.dom,t),t&&t.remove(),this}addClass(t){return $r(this.dom,t),this}removeClass(t){return qr(this.dom,t),this}hasClass(t){return Ao(this.dom,t)}toggleClass(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}};function it(e,t,n){if(typeof e=="string")if(e==="center")e=(t-n)/2|0;else if(e==="right"||e==="bottom")e=t-n;else{let r=parseFloat(e);(""+r!==e&&e.substring((""+r).length))==="%"?e=t/100*r|0:e=r}return e}function wc(){Pt=document.body,Pt[ie="requestFullscreen"]||Pt[ie="msRequestFullscreen"]||Pt[ie="webkitRequestFullscreen"]||Pt[ie="mozRequestFullscreen"]||(ie=""),Io=ie&&ie.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),Et(window,"resize",function(){Lo(),Xr()}),Lo()}function vc(e){re(e,"drag"),re(e,"n"),re(e,"s"),re(e,"w"),re(e,"e"),re(e,"nw"),re(e,"ne"),re(e,"se"),re(e,"sw"),Et(Nt(e.dom,"wb-min"),"click",function(t){Fe(t),e.min?e.focus().restore():e.blur().minimize()}),Et(Nt(e.dom,"wb-max"),"click",function(t){e.max?e.restore():e.maximize()}),ie?Et(Nt(e.dom,"wb-full"),"click",function(t){e.fullscreen()}):e.addClass("no-full"),Et(Nt(e.dom,"wb-close"),"click",function(t){Fe(t),e.close()||(e=null)}),Et(e.dom,"click",function(t){e.focus()})}function Wn(e){He.splice(He.indexOf(e),1),Xr(),e.removeClass("min"),e.min=!1,e.dom.title=""}function Xr(){let e=He.length,t={},n={};for(let r=0,i,o;r<e;r++)i=He[r],o=(i.left||i.right)+":"+(i.top||i.bottom),n[o]?n[o]++:(t[o]=0,n[o]=1);for(let r=0,i,o,s;r<e;r++)i=He[r],o=(i.left||i.right)+":"+(i.top||i.bottom),s=Math.min((oe-i.left-i.right)/n[o],250),i.resize(s+1|0,i.header,!0).move(i.left+t[o]*s|0,se-i.bottom-i.header,!0),t[o]++}function re(e,t){let n=Nt(e.dom,"wb-"+t);if(!n)return;let r,i,o,s,a,l,u=0;Et(n,"mousedown",m),Et(n,"touchstart",m,on);function p(){s=requestAnimationFrame(p),l&&(e.resize(),l=!1),a&&(e.move(),a=!1)}function m(v){if(Fe(v),e.focus(),t==="drag"){if(e.min){e.restore();return}let D=Date.now(),S=D-u;if(u=D,S<300&&!e.dom.classList.contains("no-max")){e.max?e.restore():e.maximize();return}}!e.max&&!e.min&&($r(Pt,"wb-lock"),Yn&&p(),(r=v.touches)&&(r=r[0])?(v=r,Et(window,"touchmove",y,on),Et(window,"touchend",w,on)):(Et(window,"mousemove",y),Et(window,"mouseup",w)),i=v.pageX,o=v.pageY)}function y(v){Fe(v),r&&(v=v.touches[0]);let D=v.pageX,S=v.pageY,I=D-i,A=S-o,N=e.width,T=e.height,M=e.x,R=e.y,B,H,G,P;t==="drag"?(e.x+=I,e.y+=A,G=P=1):(t==="e"||t==="se"||t==="ne"?(e.width+=I,B=1):(t==="w"||t==="sw"||t==="nw")&&(e.x+=I,e.width-=I,B=1,G=1),t==="s"||t==="se"||t==="sw"?(e.height+=A,H=1):(t==="n"||t==="ne"||t==="nw")&&(e.y+=A,e.height-=A,H=1,P=1)),B&&(e.width=Math.max(Math.min(e.width,e.maxwidth,oe-e.x-e.right),e.minwidth),B=e.width!==N),H&&(e.height=Math.max(Math.min(e.height,e.maxheight,se-e.y-e.bottom),e.minheight),H=e.height!==T),(B||H)&&(Yn?l=!0:e.resize()),G&&(e.x=Math.max(Math.min(e.x,oe-e.width-e.right),e.left),G=e.x!==M),P&&(e.y=Math.max(Math.min(e.y,se-e.height-e.bottom),e.top),P=e.y!==R),(G||P)&&(Yn?a=!0:e.move()),(B||G)&&(i=D),(H||P)&&(o=S)}function w(v){Fe(v),qr(Pt,"wb-lock"),Yn&&cancelAnimationFrame(s),r?(rn(window,"touchmove",y,on),rn(window,"touchend",w,on)):(rn(window,"mousemove",y),rn(window,"mouseup",w))}}function Lo(){let e=document.documentElement;oe=e.clientWidth,se=e.clientHeight}function xc(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function $n(){if(je.full=!1,xc())return document[Io](),!0}var Ho=xi(Ro()),Go=xi(Bo());(function(){"use strict";var e=window.Document.prototype.createElement,t=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,i=window.Document.prototype.append,o=window.DocumentFragment.prototype.prepend,s=window.DocumentFragment.prototype.append,a=window.Node.prototype.cloneNode,l=window.Node.prototype.appendChild,u=window.Node.prototype.insertBefore,p=window.Node.prototype.removeChild,m=window.Node.prototype.replaceChild,y=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),w=window.Element.prototype.attachShadow,v=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),D=window.Element.prototype.getAttribute,S=window.Element.prototype.setAttribute,I=window.Element.prototype.removeAttribute,A=window.Element.prototype.toggleAttribute,N=window.Element.prototype.getAttributeNS,T=window.Element.prototype.setAttributeNS,M=window.Element.prototype.removeAttributeNS,R=window.Element.prototype.insertAdjacentElement,B=window.Element.prototype.insertAdjacentHTML,H=window.Element.prototype.prepend,G=window.Element.prototype.append,P=window.Element.prototype.before,$=window.Element.prototype.after,K=window.Element.prototype.replaceWith,bt=window.Element.prototype.remove,st=window.HTMLElement,O=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),at=window.HTMLElement.prototype.insertAdjacentElement,ft=window.HTMLElement.prototype.insertAdjacentHTML,et=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(c){return et.add(c)});function ct(c){var f=et.has(c);return c=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(c),!f&&c}var j=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function U(c){var f=c.isConnected;if(f!==void 0)return f;if(j(c))return!0;for(;c&&!(c.__CE_isImportDocument||c instanceof Document);)c=c.parentNode||(window.ShadowRoot&&c instanceof ShadowRoot?c.host:void 0);return!(!c||!(c.__CE_isImportDocument||c instanceof Document))}function Dt(c){var f=c.children;if(f)return Array.prototype.slice.call(f);for(f=[],c=c.firstChild;c;c=c.nextSibling)c.nodeType===Node.ELEMENT_NODE&&f.push(c);return f}function qt(c,f){for(;f&&f!==c&&!f.nextSibling;)f=f.parentNode;return f&&f!==c?f.nextSibling:null}function Xt(c,f,h){for(var _=c;_;){if(_.nodeType===Node.ELEMENT_NODE){var d=_;f(d);var g=d.localName;if(g==="link"&&d.getAttribute("rel")==="import"){if(_=d.import,h===void 0&&(h=new Set),_ instanceof Node&&!h.has(_))for(h.add(_),_=_.firstChild;_;_=_.nextSibling)Xt(_,f,h);_=qt(c,d);continue}else if(g==="template"){_=qt(c,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)Xt(d,f,h)}_=_.firstChild?_.firstChild:qt(c,_)}}function Lt(){var c=!(Ut==null||!Ut.noDocumentConstructionObserver),f=!(Ut==null||!Ut.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=f,this.I=!c}function gt(c,f,h,_){var d=window.ShadyDOM;if(c.shadyDomFastWalk&&d&&d.inUse){if(f.nodeType===Node.ELEMENT_NODE&&h(f),f.querySelectorAll)for(c=d.nativeMethods.querySelectorAll.call(f,"*"),f=0;f<c.length;f++)h(c[f])}else Xt(f,h,_)}function le(c,f){c.j=!0,c.m.push(f)}function Bt(c,f){c.j=!0,c.g.push(f)}function ue(c,f){c.j&&gt(c,f,function(h){return wt(c,h)})}function wt(c,f){if(c.j&&!f.__CE_patched){f.__CE_patched=!0;for(var h=0;h<c.m.length;h++)c.m[h](f);for(h=0;h<c.g.length;h++)c.g[h](f)}}function q(c,f){var h=[];for(gt(c,f,function(d){return h.push(d)}),f=0;f<h.length;f++){var _=h[f];_.__CE_state===1?c.connectedCallback(_):_t(c,_)}}function z(c,f){var h=[];for(gt(c,f,function(d){return h.push(d)}),f=0;f<h.length;f++){var _=h[f];_.__CE_state===1&&c.disconnectedCallback(_)}}function lt(c,f,h){h=h===void 0?{}:h;var _=h.J,d=h.upgrade||function(E){return _t(c,E)},g=[];for(gt(c,f,function(E){if(c.j&&wt(c,E),E.localName==="link"&&E.getAttribute("rel")==="import"){var b=E.import;b instanceof Node&&(b.__CE_isImportDocument=!0,b.__CE_registry=document.__CE_registry),b&&b.readyState==="complete"?b.__CE_documentLoadHandled=!0:E.addEventListener("load",function(){var x=E.import;if(!x.__CE_documentLoadHandled){x.__CE_documentLoadHandled=!0;var C=new Set;_&&(_.forEach(function(Y){return C.add(Y)}),C.delete(x)),lt(c,x,{J:C,upgrade:d})}})}else g.push(E)},_),f=0;f<g.length;f++)d(g[f])}function _t(c,f){try{var h=f.ownerDocument,_=h.__CE_registry,d=_&&(h.defaultView||h.__CE_isImportDocument)?pn(_,f.localName):void 0;if(d&&f.__CE_state===void 0){d.constructionStack.push(f);try{try{if(new d.constructorFunction!==f)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{d.constructionStack.pop()}}catch(x){throw f.__CE_state=2,x}if(f.__CE_state=1,f.__CE_definition=d,d.attributeChangedCallback&&f.hasAttributes()){var g=d.observedAttributes;for(d=0;d<g.length;d++){var E=g[d],b=f.getAttribute(E);b!==null&&c.attributeChangedCallback(f,E,null,b,null)}}U(f)&&c.connectedCallback(f)}}catch(x){J(x)}}Lt.prototype.connectedCallback=function(c){var f=c.__CE_definition;if(f.connectedCallback)try{f.connectedCallback.call(c)}catch(h){J(h)}},Lt.prototype.disconnectedCallback=function(c){var f=c.__CE_definition;if(f.disconnectedCallback)try{f.disconnectedCallback.call(c)}catch(h){J(h)}},Lt.prototype.attributeChangedCallback=function(c,f,h,_,d){var g=c.__CE_definition;if(g.attributeChangedCallback&&-1<g.observedAttributes.indexOf(f))try{g.attributeChangedCallback.call(c,f,h,_,d)}catch(E){J(E)}};function dt(c,f,h,_){var d=f.__CE_registry;if(d&&(_===null||_==="http://www.w3.org/1999/xhtml")&&(d=pn(d,h)))try{var g=new d.constructorFunction;if(g.__CE_state===void 0||g.__CE_definition===void 0)throw Error("Failed to construct '"+h+"': The returned value was not constructed with the HTMLElement constructor.");if(g.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+h+"': The constructed element's namespace must be the HTML namespace.");if(g.hasAttributes())throw Error("Failed to construct '"+h+"': The constructed element must not have any attributes.");if(g.firstChild!==null)throw Error("Failed to construct '"+h+"': The constructed element must not have any children.");if(g.parentNode!==null)throw Error("Failed to construct '"+h+"': The constructed element must not have a parent node.");if(g.ownerDocument!==f)throw Error("Failed to construct '"+h+"': The constructed element's owner document is incorrect.");if(g.localName!==h)throw Error("Failed to construct '"+h+"': The constructed element's local name is incorrect.");return g}catch(E){return J(E),f=_===null?e.call(f,h):t.call(f,_,h),Object.setPrototypeOf(f,HTMLUnknownElement.prototype),f.__CE_state=2,f.__CE_definition=void 0,wt(c,f),f}return f=_===null?e.call(f,h):t.call(f,_,h),wt(c,f),f}function J(c){var f="",h="",_=0,d=0;c instanceof Error?(f=c.message,h=c.sourceURL||c.fileName||"",_=c.line||c.lineNumber||0,d=c.column||c.columnNumber||0):f="Uncaught "+String(c);var g=void 0;ErrorEvent.prototype.initErrorEvent===void 0?g=new ErrorEvent("error",{cancelable:!0,message:f,filename:h,lineno:_,colno:d,error:c}):(g=document.createEvent("ErrorEvent"),g.initErrorEvent("error",!1,!0,f,h,_),g.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),g.error===void 0&&Object.defineProperty(g,"error",{configurable:!0,enumerable:!0,get:function(){return c}}),window.dispatchEvent(g),g.defaultPrevented||console.error(c)}function Vt(){var c=this;this.g=void 0,this.F=new Promise(function(f){c.l=f})}Vt.prototype.resolve=function(c){if(this.g)throw Error("Already resolved.");this.g=c,this.l(c)};function fe(c){var f=document;this.l=void 0,this.h=c,this.g=f,lt(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function _i(c){c.l&&c.l.disconnect()}fe.prototype.G=function(c){var f=this.g.readyState;for(f!=="interactive"&&f!=="complete"||_i(this),f=0;f<c.length;f++)for(var h=c[f].addedNodes,_=0;_<h.length;_++)lt(this.h,h[_])};function Z(c){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(f){return f()},this.i=!1,this.v=[],this.h=c,this.D=c.I?new fe(c):void 0}Z.prototype.H=function(c,f){var h=this;if(!(f instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");yi(this,c),this.s.set(c,f),this.v.push(c),this.i||(this.i=!0,this.o(function(){return bi(h)}))},Z.prototype.define=function(c,f){var h=this;if(!(f instanceof Function))throw new TypeError("Custom element constructors must be functions.");yi(this,c),Ei(this,c,f),this.v.push(c),this.i||(this.i=!0,this.o(function(){return bi(h)}))};function yi(c,f){if(!ct(f))throw new SyntaxError("The element name '"+f+"' is not valid.");if(pn(c,f))throw Error("A custom element with name '"+(f+"' has already been defined."));if(c.A)throw Error("A custom element is already being defined.")}function Ei(c,f,h){c.A=!0;var _;try{var d=h.prototype;if(!(d instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var g=function(Y){var De=d[Y];if(De!==void 0&&!(De instanceof Function))throw Error("The '"+Y+"' callback must be a function.");return De},E=g("connectedCallback"),b=g("disconnectedCallback"),x=g("adoptedCallback"),C=(_=g("attributeChangedCallback"))&&h.observedAttributes||[]}catch(Y){throw Y}finally{c.A=!1}return h={localName:f,constructorFunction:h,connectedCallback:E,disconnectedCallback:b,adoptedCallback:x,attributeChangedCallback:_,observedAttributes:C,constructionStack:[]},c.u.set(f,h),c.C.set(h.constructorFunction,h),h}Z.prototype.upgrade=function(c){lt(this.h,c)};function bi(c){if(c.i!==!1){c.i=!1;for(var f=[],h=c.v,_=new Map,d=0;d<h.length;d++)_.set(h[d],[]);for(lt(c.h,document,{upgrade:function(x){if(x.__CE_state===void 0){var C=x.localName,Y=_.get(C);Y?Y.push(x):c.u.has(C)&&f.push(x)}}}),d=0;d<f.length;d++)_t(c.h,f[d]);for(d=0;d<h.length;d++){for(var g=h[d],E=_.get(g),b=0;b<E.length;b++)_t(c.h,E[b]);(g=c.B.get(g))&&g.resolve(void 0)}h.length=0}}Z.prototype.get=function(c){if(c=pn(this,c))return c.constructorFunction},Z.prototype.whenDefined=function(c){if(!ct(c))return Promise.reject(new SyntaxError("'"+c+"' is not a valid custom element name."));var f=this.B.get(c);if(f)return f.F;f=new Vt,this.B.set(c,f);var h=this.u.has(c)||this.s.has(c);return c=this.v.indexOf(c)===-1,h&&c&&f.resolve(void 0),f.F},Z.prototype.polyfillWrapFlushCallback=function(c){this.D&&_i(this.D);var f=this.o;this.o=function(h){return c(function(){return f(h)})}};function pn(c,f){var h=c.u.get(f);if(h)return h;if(h=c.s.get(f)){c.s.delete(f);try{return Ei(c,f,h())}catch(_){J(_)}}}Z.prototype.define=Z.prototype.define,Z.prototype.upgrade=Z.prototype.upgrade,Z.prototype.get=Z.prototype.get,Z.prototype.whenDefined=Z.prototype.whenDefined,Z.prototype.polyfillDefineLazy=Z.prototype.H,Z.prototype.polyfillWrapFlushCallback=Z.prototype.polyfillWrapFlushCallback;function er(c,f,h){function _(d){return function(g){for(var E=[],b=0;b<arguments.length;++b)E[b]=arguments[b];b=[];for(var x=[],C=0;C<E.length;C++){var Y=E[C];if(Y instanceof Element&&U(Y)&&x.push(Y),Y instanceof DocumentFragment)for(Y=Y.firstChild;Y;Y=Y.nextSibling)b.push(Y);else b.push(Y)}for(d.apply(this,E),E=0;E<x.length;E++)z(c,x[E]);if(U(this))for(E=0;E<b.length;E++)x=b[E],x instanceof Element&&q(c,x)}}h.prepend!==void 0&&(f.prepend=_(h.prepend)),h.append!==void 0&&(f.append=_(h.append))}function cs(c){Document.prototype.createElement=function(f){return dt(c,this,f,null)},Document.prototype.importNode=function(f,h){return f=n.call(this,f,!!h),this.__CE_registry?lt(c,f):ue(c,f),f},Document.prototype.createElementNS=function(f,h){return dt(c,this,h,f)},er(c,Document.prototype,{prepend:r,append:i})}function ls(c){function f(_){return function(d){for(var g=[],E=0;E<arguments.length;++E)g[E]=arguments[E];E=[];for(var b=[],x=0;x<g.length;x++){var C=g[x];if(C instanceof Element&&U(C)&&b.push(C),C instanceof DocumentFragment)for(C=C.firstChild;C;C=C.nextSibling)E.push(C);else E.push(C)}for(_.apply(this,g),g=0;g<b.length;g++)z(c,b[g]);if(U(this))for(g=0;g<E.length;g++)b=E[g],b instanceof Element&&q(c,b)}}var h=Element.prototype;P!==void 0&&(h.before=f(P)),$!==void 0&&(h.after=f($)),K!==void 0&&(h.replaceWith=function(_){for(var d=[],g=0;g<arguments.length;++g)d[g]=arguments[g];g=[];for(var E=[],b=0;b<d.length;b++){var x=d[b];if(x instanceof Element&&U(x)&&E.push(x),x instanceof DocumentFragment)for(x=x.firstChild;x;x=x.nextSibling)g.push(x);else g.push(x)}for(b=U(this),K.apply(this,d),d=0;d<E.length;d++)z(c,E[d]);if(b)for(z(c,this),d=0;d<g.length;d++)E=g[d],E instanceof Element&&q(c,E)}),bt!==void 0&&(h.remove=function(){var _=U(this);bt.call(this),_&&z(c,this)})}function us(c){function f(d,g){Object.defineProperty(d,"innerHTML",{enumerable:g.enumerable,configurable:!0,get:g.get,set:function(E){var b=this,x=void 0;if(U(this)&&(x=[],gt(c,this,function(De){De!==b&&x.push(De)})),g.set.call(this,E),x)for(var C=0;C<x.length;C++){var Y=x[C];Y.__CE_state===1&&c.disconnectedCallback(Y)}return this.ownerDocument.__CE_registry?lt(c,this):ue(c,this),E}})}function h(d,g){d.insertAdjacentElement=function(E,b){var x=U(b);return E=g.call(this,E,b),x&&z(c,b),U(E)&&q(c,b),E}}function _(d,g){function E(b,x){for(var C=[];b!==x;b=b.nextSibling)C.push(b);for(x=0;x<C.length;x++)lt(c,C[x])}d.insertAdjacentHTML=function(b,x){if(b=b.toLowerCase(),b==="beforebegin"){var C=this.previousSibling;g.call(this,b,x),E(C||this.parentNode.firstChild,this)}else if(b==="afterbegin")C=this.firstChild,g.call(this,b,x),E(this.firstChild,C);else if(b==="beforeend")C=this.lastChild,g.call(this,b,x),E(C||this.firstChild,null);else if(b==="afterend")C=this.nextSibling,g.call(this,b,x),E(this.nextSibling,C);else throw new SyntaxError("The value provided ("+String(b)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}w&&(Element.prototype.attachShadow=function(d){if(d=w.call(this,d),c.j&&!d.__CE_patched){d.__CE_patched=!0;for(var g=0;g<c.m.length;g++)c.m[g](d)}return this.__CE_shadowRoot=d}),v&&v.get?f(Element.prototype,v):O&&O.get?f(HTMLElement.prototype,O):Bt(c,function(d){f(d,{enumerable:!0,configurable:!0,get:function(){return a.call(this,!0).innerHTML},set:function(g){var E=this.localName==="template",b=E?this.content:this,x=t.call(document,this.namespaceURI,this.localName);for(x.innerHTML=g;0<b.childNodes.length;)p.call(b,b.childNodes[0]);for(g=E?x.content:x;0<g.childNodes.length;)l.call(b,g.childNodes[0])}})}),Element.prototype.setAttribute=function(d,g){if(this.__CE_state!==1)return S.call(this,d,g);var E=D.call(this,d);S.call(this,d,g),g=D.call(this,d),c.attributeChangedCallback(this,d,E,g,null)},Element.prototype.setAttributeNS=function(d,g,E){if(this.__CE_state!==1)return T.call(this,d,g,E);var b=N.call(this,d,g);T.call(this,d,g,E),E=N.call(this,d,g),c.attributeChangedCallback(this,g,b,E,d)},Element.prototype.removeAttribute=function(d){if(this.__CE_state!==1)return I.call(this,d);var g=D.call(this,d);I.call(this,d),g!==null&&c.attributeChangedCallback(this,d,g,null,null)},A&&(Element.prototype.toggleAttribute=function(d,g){if(this.__CE_state!==1)return A.call(this,d,g);var E=D.call(this,d),b=E!==null;return g=A.call(this,d,g),b!==g&&c.attributeChangedCallback(this,d,E,g?"":null,null),g}),Element.prototype.removeAttributeNS=function(d,g){if(this.__CE_state!==1)return M.call(this,d,g);var E=N.call(this,d,g);M.call(this,d,g);var b=N.call(this,d,g);E!==b&&c.attributeChangedCallback(this,g,E,b,d)},at?h(HTMLElement.prototype,at):R&&h(Element.prototype,R),ft?_(HTMLElement.prototype,ft):B&&_(Element.prototype,B),er(c,Element.prototype,{prepend:H,append:G}),ls(c)}var wi={};function fs(c){function f(){var h=this.constructor,_=document.__CE_registry.C.get(h);if(!_)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var d=_.constructionStack;if(d.length===0)return d=e.call(document,_.localName),Object.setPrototypeOf(d,h.prototype),d.__CE_state=1,d.__CE_definition=_,wt(c,d),d;var g=d.length-1,E=d[g];if(E===wi)throw Error("Failed to construct '"+_.localName+"': This element was already constructed.");return d[g]=wi,Object.setPrototypeOf(E,h.prototype),wt(c,E),E}f.prototype=st.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:f}),window.HTMLElement=f}function ds(c){function f(h,_){Object.defineProperty(h,"textContent",{enumerable:_.enumerable,configurable:!0,get:_.get,set:function(d){if(this.nodeType===Node.TEXT_NODE)_.set.call(this,d);else{var g=void 0;if(this.firstChild){var E=this.childNodes,b=E.length;if(0<b&&U(this)){g=Array(b);for(var x=0;x<b;x++)g[x]=E[x]}}if(_.set.call(this,d),g)for(d=0;d<g.length;d++)z(c,g[d])}}})}Node.prototype.insertBefore=function(h,_){if(h instanceof DocumentFragment){var d=Dt(h);if(h=u.call(this,h,_),U(this))for(_=0;_<d.length;_++)q(c,d[_]);return h}return d=h instanceof Element&&U(h),_=u.call(this,h,_),d&&z(c,h),U(this)&&q(c,h),_},Node.prototype.appendChild=function(h){if(h instanceof DocumentFragment){var _=Dt(h);if(h=l.call(this,h),U(this))for(var d=0;d<_.length;d++)q(c,_[d]);return h}return _=h instanceof Element&&U(h),d=l.call(this,h),_&&z(c,h),U(this)&&q(c,h),d},Node.prototype.cloneNode=function(h){return h=a.call(this,!!h),this.ownerDocument.__CE_registry?lt(c,h):ue(c,h),h},Node.prototype.removeChild=function(h){var _=h instanceof Element&&U(h),d=p.call(this,h);return _&&z(c,h),d},Node.prototype.replaceChild=function(h,_){if(h instanceof DocumentFragment){var d=Dt(h);if(h=m.call(this,h,_),U(this))for(z(c,_),_=0;_<d.length;_++)q(c,d[_]);return h}d=h instanceof Element&&U(h);var g=m.call(this,h,_),E=U(this);return E&&z(c,_),d&&z(c,h),E&&q(c,h),g},y&&y.get?f(Node.prototype,y):le(c,function(h){f(h,{enumerable:!0,configurable:!0,get:function(){for(var _=[],d=this.firstChild;d;d=d.nextSibling)d.nodeType!==Node.COMMENT_NODE&&_.push(d.textContent);return _.join("")},set:function(_){for(;this.firstChild;)p.call(this,this.firstChild);_!=null&&_!==""&&l.call(this,document.createTextNode(_))}})})}var Ut=window.customElements;function vi(){var c=new Lt;fs(c),cs(c),er(c,DocumentFragment.prototype,{prepend:o,append:s}),ds(c),us(c),window.CustomElementRegistry=Z,c=new Z(c),document.__CE_registry=c,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:c})}Ut&&!Ut.forcePolyfill&&typeof Ut.define=="function"&&typeof Ut.get=="function"||vi(),window.__CE_installPolyfill=vi}).call(self);var Uo=`<form data-multi-step class="form inline">
  <div class="row-container">
    <div class="information">
      <div class="logo">
        <img src="" />
        <p></p>
      </div>
      <p data-step="1">How are we doing?</p>
      <p data-step="2">Glad you like it! Can you help us share the \u2764\uFE0F?</p>
      <input name="feedback" data-step="3" placeholder="How can we improve?" />
      <p data-step="4">Thanks for the feedback!</p>
    </div>
    <div class="action">
      <div data-step="1">
        <span class="star" data-star-index="1"></span>
        <span class="star" data-star-index="2"></span>
        <span class="star" data-star-index="3"></span>
        <span class="star" data-star-index="4"></span>
        <span class="star" data-star-index="5"></span>
      </div>
      <div data-step="2">
        <button id="rate-on-store" type="button" data-next-step="4">
          Rate on webstore
        </button>
        <button id="decline-rate-on-rate" type="button" data-next-step="4">
          No thanks
        </button>
      </div>
      <button id="submit-form" type="button" data-step="3" data-next-step="4">
        Submit
      </button>
    </div>
  </div>
</form>
`;var Fo=`/* Start css reset */
/* 1. Use a more-intuitive box-sizing model. */
*,
*::before,
*::after {
  box-sizing: border-box;
}
/* 2. Remove default margin */
* {
  margin: 0;
}
/* 3. Allow percentage-based heights in the application */
html,
body {
  height: 100%;
}
/* Typographic tweaks! 4. Add accessible line-height 5. Improve text rendering */
body {
  line-height: 20px;
  -webkit-font-smoothing: antialiased;
}
/* 6. Improve media defaults */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}
/* 7. Remove built-in form typography styles */
input,
button,
textarea,
select {
  font-size: 12px;
}
/* 8. Avoid text overflows */
p,
h1,
h2,
h3,
h4,
h5,
h6 {
  overflow-wrap: break-word;
}
/* End css reset */

.form {
  width: 100%;
  font-family: Verdana, sans-serif;
}
[data-step],
.form[data-current-step="4"] .action {
  display: none;
}
.form[data-current-step="1"] [data-step="1"],
.form[data-current-step="2"] [data-step="2"],
.form[data-current-step="3"] [data-step="3"],
.form[data-current-step="4"] [data-step="4"] {
  display: block;
}
.row-container {
  align-items: center;
  background: #cce;
  display: grid;
  gap: 8px;
  margin: 0;
  padding: 4px 10px;
}

.information {
  align-items: center;
  display: grid;
  gap: 8px;
  grid-auto-flow: column;
}
.action {
  align-items: center;
  display: flex;
}
.logo {
  align-items: center;
  display: flex;
  gap: 8px;
}
.logo img {
  width: 15px;
}
.logo p {
  display: none;
}
button {
  background-color: transparent;
  border-radius: 5px;
  margin-right: 8px;
}
.star {
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
}
.star:before {
  content: "\u2606";
}
.full.star:before {
  content: "\u2605";
  color: gold;
}

.inline .row-container,
.inline .row-container.active {
  display: flex;
  min-height: 35px;
}
.inline .row-container .information {
  display: flex;
  flex-grow: 100;
}
.row-container .information input {
  flex: 1;
}
.inline .row-container[data-step="4"] .information {
  flex-grow: 0;
}

.small .row-container .information {
  display: flex;
}

.medium .row-container .information {
  grid-auto-flow: row;
}
.medium .logo p {
  display: block;
}
p {
  font-size: 12px;
}

div[data-step="2"] {
  white-space: nowrap;
}
`;var Xn={};rr(Xn,{appDesc:()=>Hc,appName:()=>Fc,appShortName:()=>jc,default:()=>tl,fdbkCareToShare:()=>zc,fdbkHowAreWeDoing:()=>Gc,fdbkHowCanWeImprove:()=>Yc,fdbkNoResponse:()=>qc,fdbkRateOnWebstore:()=>$c,fdbkSumbit:()=>Xc,fdbkThanks:()=>Wc,optionBlockedSites:()=>Zc,optionBlockedSitesDesc:()=>Qc,optionsSaveSuccess:()=>Kc,reportAnIssue:()=>Vc,showDemo:()=>Jc});var Fc={message:"Search & Link Preview",description:"The name of the extension"},jc={message:"Link Previews",description:"The short-version name of the extension name"},Hc={message:"See previews of links and instantly performs searches on the same page using this previewer instead of opening new tabs",description:"A description of its function"},Gc={message:"How are we doing?"},zc={message:"Glad you like it! Can you help us share the \u2764\uFE0F?"},Yc={message:"How can we improve?"},Wc={message:"Thanks for the feedback!"},$c={message:"Rate on Webstore"},qc={message:"No"},Xc={message:"Submit"},Vc={message:"Report an issue",description:"Button text for reporting an issue"},Jc={message:"Show demo",description:"Button text for showing demo"},Kc={message:"Successfully updated settings"},Zc={message:"Disabled on Websites"},Qc={message:"Extension will not run on these sites. Enter one site per line."},tl={appName:Fc,appShortName:jc,appDesc:Hc,fdbkHowAreWeDoing:Gc,fdbkCareToShare:zc,fdbkHowCanWeImprove:Yc,fdbkThanks:Wc,fdbkRateOnWebstore:$c,fdbkNoResponse:qc,fdbkSumbit:Xc,reportAnIssue:Vc,showDemo:Jc,optionsSaveSuccess:Kc,optionBlockedSites:Zc,optionBlockedSitesDesc:Qc};var Kr=new mt("i18n"),Zr=e=>{if(!e)return Kr.error("A valid key is required for i18n, got",e),e;if(chrome?.i18n&&chrome.i18n.getMessage(e)!=="")return chrome.i18n.getMessage(e);Kr.warn("chrome.i18n is not available in the current context, falling back to en-US"),Object.keys(Xn).forEach(t=>{});for(let[t,n]of Object.entries(Xn))if(t===e)return n.message;return Kr.error("No translation available for key:",e),e};var Qr=class extends HTMLElement{constructor(){super();this.logger=new mt("feedback-form");this.attachShadow({mode:"open"})}setProgressHandler(n){this.progressHandler=n}static get observedAttributes(){return["size","app-name","logo-url","store-link","form-link"]}connectedCallback(){this.logger.debug("Feedback form added to page."),this.updateStyle(this)}disconnectedCallback(){this.logger.debug("Feedback form removed from page.")}adoptedCallback(){this.logger.debug("Feedback form moved to new page.")}updateStyle(n){let r=document.createElement("style");r.textContent=Fo;let i=document.createRange();i.selectNode(document.getElementsByTagName("body").item(0));let o=i.createContextualFragment(Uo),s=n.shadowRoot;s.append(r,o);let a=n.getAttribute("size")??"inline",l=n.getAttribute("app-name")??Zr("appName"),u=n.getAttribute("logo-url")??chrome.runtime.getURL("assets/logo-24x24.png"),p=n.getAttribute("store-link")??"https://chrome.google.com/webstore/detail/"+Zr("@@extension_id"),m=n.getAttribute("form-link")??"https://formspree.io/f/mayzdndj";this.logger.debug(`Attributes: size=${a}, app=${l}, logo=${u}`);let y=s.querySelector("[data-multi-step]");y.classList.remove("inline","small","medium"),y.classList.add(a),y.querySelector("img").src=u,y.querySelector(".logo p").innerHTML=l;let w=y.getAttribute("data-current-step");w||(w=1,y.setAttribute("data-current-step",w));let v=[...y.querySelectorAll(".star")],D=[...y.querySelectorAll("[data-next-step]")];if(v.length>0){let S=()=>v.forEach(N=>N.classList=["star"]),I=N=>{let T=N.target.getAttribute("data-star-index");S(),v.forEach((M,R)=>R<T?M.classList.add("full"):null)},A=N=>{let T=N.target.getAttribute("data-star-index");this.progressHandler&&this.progressHandler("started",T),w=T<5?3:2,y.setAttribute("data-current-step",w)};v.forEach(N=>N.addEventListener("mouseover",I)),v.forEach(N=>N.addEventListener("click",A)),y.addEventListener("mouseleave",S)}D.forEach(S=>S.addEventListener("click",I=>{w=I.target.getAttribute("data-next-step"),y.setAttribute("data-current-step",w),S.id==="rate-on-store"&&window.open(p);let A={feedback:y.querySelector("input").value,appName:l};S.id==="submit-form"&&fetch(m,{method:"POST",body:JSON.stringify(A)}).then(function(N){return this.logger.debug("response",N.json())}).then(function(N){this.logger.debug("response 2",N.json())}),w==4&&setTimeout(()=>{this.progressHandler&&this.progressHandler("completed",A)},1300)}))}};customElements.define("feedback-form",Qr);var ei="feedback_data";var ti=class{constructor(){this.storageService=chrome.storage.sync}put(t,n){if(n==null)return Promise.reject("Attempting to save a null value");if(!t)return Promise.reject("Attempting to use a null key");let r={};return r[t]=n,this.storageService.set(r)}async get(t){return(await this.storageService.get(t))[t]}getAll(){return this.storageService.get(null)}async getAndUpdate(t,n){let r=await this.get(t);return this.put(t,await n(r))}},tt=new ti;async function jo(){let{sessionData:e}=await chrome.storage.session.get("sessionData"),t=Date.now();return e&&e.timestamp&&((t-e.timestamp)/6e4>30?e=null:(e.timestamp=t,await chrome.storage.session.set({sessionData:e}))),e||(e={session_id:t.toString(),timestamp:t.toString()},await chrome.storage.session.set({sessionData:e})),e.session_id}var el="https://www.google-analytics.com/mp/collect",nl="https://www.google-analytics.com/debug/mp/collect",rl=nt.__measurement_id__,il=nt.__ga_api_secret__,ol=100,ni=class{constructor(){this.debug=IS_DEV_BUILD}async getOrCreateClientId(){let{clientId:t}=await chrome.storage.local.get("clientId");return t||(t=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:t})),t}async getSessionId(){try{return jo()}catch{return new Promise(n=>{chrome.runtime.sendMessage("get_or_create_session_id",r=>{n(r)})})}}async fireEvent(t,n={}){n.session_id||(n.session_id=await this.getSessionId()),n.engagement_time_msec||(n.engagement_time_msec=ol);try{let r=await fetch(`${this.debug?nl:el}?measurement_id=${rl}&api_secret=${il}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:t,params:n}]})});if(!this.debug)return;console.log(await r.text())}catch(r){console.error("Google Analytics request failed with an exception",r)}}async firePageViewEvent(t,n,r={}){return this.fireEvent("page_view",{page_title:t,page_location:n,...r})}async fireErrorEvent(t,n={}){return this.fireEvent("extension_error",{...t,...n})}},ri=new ni;var an=nt.__package_name__+"/mainframe";ae.prototype.setUrl=function(e,t){let n=this.body.firstChild;return n&&n.tagName.toLowerCase()==="iframe"?n.src=e:(this.body.innerHTML='<iframe name="'+an+'" src="'+e+'"></iframe>',t&&(this.body.firstChild.onload=t)),this};var ii=class{constructor(){this.logger=new mt(this);this.headerIconUrlBase="https://www.google.com/s2/favicons?domain=";this.isVisible=!1;this.navStack=[];this.displayReaderMode=!1;this.isDemo=!1;this.searchUrl={google:"https://www.google.com/search?igu=1&q=",bing:"https://www.bing.com/search?q=",yahoo:"https://search.yahoo.com/search?p=",baidu:"https://www.baidu.com/s?wd=",yandex:"https://yandex.com/search/?text=",duckduckgo:"https://duckduckgo.com/?q=",ecosia:"https://www.ecosia.org/search?q="};this.onEscHandler=t=>{t=t||window.event;var n=!1;"key"in t?n=t.key==="Escape"||t.key==="Esc":n=t.keyCode===27,n&&this.handleMessage({action:"escape",href:document.location.href,sourceFrame:an})}}init(){if(this.inIframe()){this.logger.log("Not inserting previewr in iframe: ",window.location.href);return}this.listenForCspError(),this.listenForWindowMessages(),document.addEventListener("keydown",this.onEscHandler),document.addEventListener("click",t=>this.clickHandler(t)),document.addEventListener("scroll",t=>this.handleScroll(t))}listenForCspError(){document.addEventListener("securitypolicyviolation",t=>{window.name===an&&this.logger.error("CSP error",t,t.blockedURI)})}async clickHandler(t){(await tt.get("automatically-hide-previews")??!1)&&this.dialog&&!this.dialog.dom.contains(t.target)&&this.dialog.close()}async handleScroll(t){(await tt.get("automatically-hide-previews")??!1)&&this.dialog&&!this.dialog.dom.contains(t.target)&&this.dialog.close()}listenForWindowMessages(){window.addEventListener("message",t=>{if(t.origin!==window.location.origin){this.logger.debug("Ignoring message from different origin",t.origin,t.data);return}if(t.data.application!==nt.__package_name__){this.logger.debug("Ignoring origin messsage not initiated by Better Previews",t.data);return}this.logger.log("#WindowMessage: ",t),this.handleMessage(t.data)},!1)}async handleMessage(t){let n;if(t.mode==="demo"&&(this.isDemo=!0),t.action==="copy"){navigator.clipboard.writeText(t.data);return}else if(t.action==="preview")n=t.data;else if(t.action==="search"){let i=await tt.get("search-engine")??"google";n=this.searchUrl[i]+t.data,i==="google"&&await tt.get("disable-incognito-google")==!0&&(n="https://www.google.com/search?q="+t.data)}else if(t.action==="load")t.sourceFrame===an&&this.dialog&&(this.dialog.setTitle(t.data.title),this.dialog.setIcon(this.headerIconUrlBase+new URL(t.href).hostname));else if(t.action==="navigate")n=t.href;else if(t.action==="escape"){(await tt.get("close-on-esc")??!0)&&this.dialog?.close();return}else this.logger.warn("Unhandled action",t);if(!n||(0,Ho.sanitizeUrl)(n)==="about:blank")return;let r;try{r=new URL(n)}catch(i){this.logger.error(i);return}return this.url&&this.url.href!==r.href&&this.navStack.push(this.url),this.previewUrl(r)}async previewUrl(t){this.logger.log("#previewUrl: ",t),this.url=t;let n=await this.getWinboxOptions(t);if(this.displayReaderMode){let i=new Go.Readability(window.document.cloneNode(!0)).parse();i||(console.error("Article is null"),n.html="<h1>Failed to parse article</h1>"),n.html=`<h1>${i.title}</h1> <p>${i.byline}</p> ${i.content}`}else n.url=this.url;this.dialog?(this.logger.debug("restoring dialog"),this.dialog.restore(),this.dialog.setUrl(t.href),this.dialog.setTitle(t.hostname),this.dialog.setIcon(this.headerIconUrlBase+t.hostname)):(this.logger.debug("creating new dialog with options:",n),this.dialog=new ae(t.hostname,n),this.dialog.addControl({index:2,class:"wb-nav-away",title:"Open in New Tab",image:"",click:(r,i)=>{this.logger.log("#onOpenInNewTab: url",this.url),window.open(this.url,"_blank")}}),this.dialog.addControl({index:3,class:"wb-settings",title:"Extension Settings",image:"",click:(r,i)=>{this.logger.log("#onOpenSettings: url",this.url),chrome.runtime.sendMessage("open_options_page")}})),this.dialog.removeControl("nav-back"),this.navStack.length>0&&this.dialog.addControl({index:0,class:"nav-back",image:"",title:"Go Back",click:(r,i)=>{this.navBack()}}),await this.registerFeedbackUI()}async registerFeedbackUI(){(await tt.get(ei))?.status==="eligible"&&this.dialog?.addClass("show-footer"),(this.dialog?.dom.querySelector("feedback-form")).setProgressHandler((i,o)=>{if(i==="started"){this.logger.log("started: this",this,chrome?.storage?.sync);let s={status:"honored",timestamp:Date.now(),rating:o};tt.put(ei,s),ri.fireEvent("user_feedback",{action:"rate_experience",star_rating:o})}i==="completed"&&(this.dialog?.removeClass("show-footer"),ri.fireEvent("user_feedback",{action:"submit_feedback",feedback_text:o}))})}navBack(){let t=this.navStack.pop();t&&this.previewUrl(t)}inIframe(){try{return window.self!==window.top}catch{return!0}}getMaxZIndex(){return new Promise(t=>{let n=Math.max(...Array.from(document.querySelectorAll("body *"),r=>parseFloat(window.getComputedStyle(r).zIndex)).filter(r=>!Number.isNaN(r)),0);t(n)})}async getWinboxOptions(t,n){let r=(await tt.get("previewr-width")??"55")+"%",i=(await tt.get("previewr-height")??"80")+"%",o=await tt.get("previewr-position")??"right",s="80px";this.isDemo&&(r="45%",i="40%",s="500px");let a={icon:this.headerIconUrlBase+t.hostname,y:s,width:r,height:i,class:["no-max","no-full"],index:await this.getMaxZIndex(),hidden:!1,shadowel:"search-preview-window",framename:an,onclose:()=>{this.navStack=[],this.url=void 0,this.dialog=void 0}};return o==="right"?(a.x="right",a.right=10):(a.x="left",a.left=10),a}};new ii().init();var oi=class{constructor(){this.iframeName=nt.__package_name__+"/mainframe";this.logger=new mt(this);this.redirectClicks=t=>{var n=this.getLinkTarget(t);!n||!n.href||n.href.startsWith("#")||(t.stopImmediatePropagation(),t.preventDefault(),this.logger.debug("Prevented click propagation and posting navigate"),this.sendMessage({action:"navigate",href:n.href,source:window.location.href}))}}registerListeners(){!this.inIframe()||this.getFrameName()===this.iframeName&&(this.maybeEnableFrameBustingBuster(),document.addEventListener("click",this.redirectClicks,!0),window.addEventListener("load",()=>{this.sendMessage({action:"load",data:{title:this.getTitle()}})}),window.addEventListener("unload",()=>{this.sendMessage({action:"unload"})}))}async maybeEnableFrameBustingBuster(){if(!(await tt.get("enable-anti-frame-busting")??!1))return;let n=0;window.onbeforeunload=function(){n++},setInterval(function(){n>0&&(n-=2,window.top.location="https://httpstat.us/204")},1)}inIframe(){try{return window.self!==window.top}catch{return!0}}getFrameName(){return window.name}getLinkTarget(t){var n=t.target;do if(n.nodeName.toUpperCase()==="A"&&n.href)return n;while(n=n.parentElement);return null}sendMessage(t){this.logger.debug("#sendMessage",t),chrome.runtime.sendMessage({application:nt.__package_name__,href:document.location.href,sourceFrame:this.getFrameName(),...t})}getTitle(){if(document.title)return document.title;let t=document.querySelector("meta[property='og:site_name'][content]");return t?t.content:window.location.origin}},sl=new oi;sl.registerListeners();function ln(e){return e.split("-")[1]}function ci(e){return e==="y"?"height":"width"}function Ae(e){return e.split("-")[0]}function un(e){return["top","bottom"].includes(Ae(e))?"x":"y"}function zo(e,t,n){let{reference:r,floating:i}=e,o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,a=un(t),l=ci(a),u=r[l]/2-i[l]/2,p=a==="x",m;switch(Ae(t)){case"top":m={x:o,y:r.y-i.height};break;case"bottom":m={x:o,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:s};break;case"left":m={x:r.x-i.width,y:s};break;default:m={x:r.x,y:r.y}}switch(ln(t)){case"start":m[a]-=u*(n&&p?-1:1);break;case"end":m[a]+=u*(n&&p?-1:1)}return m}var Yo=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t)),u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:p,y:m}=zo(u,r,l),y=r,w={},v=0;for(let D=0;D<a.length;D++){let{name:S,fn:I}=a[D],{x:A,y:N,data:T,reset:M}=await I({x:p,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:w,rects:u,platform:s,elements:{reference:e,floating:t}});p=A??p,m=N??m,w={...w,[S]:{...w[S],...T}},M&&v<=50&&(v++,typeof M=="object"&&(M.placement&&(y=M.placement),M.rects&&(u=M.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:p,y:m}=zo(u,y,l)),D=-1)}return{x:p,y:m,placement:y,strategy:i,middlewareData:w}};function Wo(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function cn(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function li(e,t){var n;t===void 0&&(t={});let{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:w=0}=t,v=Wo(w),D=a[y?m==="floating"?"reference":"floating":m],S=cn(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(D)))==null||n?D:D.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:p,strategy:l})),I=m==="floating"?{...s.floating,x:r,y:i}:s.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),N=await(o.isElement==null?void 0:o.isElement(A))&&await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1},T=cn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:I,offsetParent:A,strategy:l}):I);return{top:(S.top-T.top+v.top)/N.y,bottom:(T.bottom-S.bottom+v.bottom)/N.y,left:(S.left-T.left+v.left)/N.x,right:(T.right-S.right+v.right)/N.x}}var al=Math.min,cl=Math.max;function ai(e,t,n){return cl(e,al(t,n))}var ui=e=>({name:"arrow",options:e,async fn(t){let{element:n,padding:r=0}=e||{},{x:i,y:o,placement:s,rects:a,platform:l}=t;if(n==null)return{};let u=Wo(r),p={x:i,y:o},m=un(s),y=ci(m),w=await l.getDimensions(n),v=m==="y"?"top":"left",D=m==="y"?"bottom":"right",S=a.reference[y]+a.reference[m]-p[m]-a.floating[y],I=p[m]-a.reference[m],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n)),N=A?m==="y"?A.clientHeight||0:A.clientWidth||0:0;N===0&&(N=a.floating[y]);let T=S/2-I/2,M=u[v],R=N-w[y]-u[D],B=N/2-w[y]/2+T,H=ai(M,B,R),G=ln(s)!=null&&B!=H&&a.reference[y]/2-(B<M?u[v]:u[D])-w[y]/2<0;return{[m]:p[m]-(G?B<M?M-B:R-B:0),data:{[m]:H,centerOffset:B-H}}}}),ll=["top","right","bottom","left"],Sp=ll.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),ul={left:"right",right:"left",bottom:"top",top:"bottom"};function Vn(e){return e.replace(/left|right|bottom|top/g,t=>ul[t])}function fl(e,t,n){n===void 0&&(n=!1);let r=ln(e),i=un(e),o=ci(i),s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Vn(s)),{main:s,cross:Vn(s)}}var dl={start:"end",end:"start"};function si(e){return e.replace(/start|end/g,t=>dl[t])}var fi=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:l}=t,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...D}=e,S=Ae(r),I=Ae(s)===s,A=await(a.isRTL==null?void 0:a.isRTL(l.floating)),N=m||(I||!v?[Vn(s)]:function(P){let $=Vn(P);return[si(P),$,si($)]}(s));m||w==="none"||N.push(...function(P,$,K,bt){let st=ln(P),O=function(at,ft,et){let ct=["left","right"],j=["right","left"],U=["top","bottom"],Dt=["bottom","top"];switch(at){case"top":case"bottom":return et?ft?j:ct:ft?ct:j;case"left":case"right":return ft?U:Dt;default:return[]}}(Ae(P),K==="start",bt);return st&&(O=O.map(at=>at+"-"+st),$&&(O=O.concat(O.map(si)))),O}(s,v,w,A));let T=[s,...N],M=await li(t,D),R=[],B=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&R.push(M[S]),p){let{main:P,cross:$}=fl(r,o,A);R.push(M[P],M[$])}if(B=[...B,{placement:r,overflows:R}],!R.every(P=>P<=0)){var H;let P=(((H=i.flip)==null?void 0:H.index)||0)+1,$=T[P];if($)return{data:{index:P,overflows:B},reset:{placement:$}};let K="bottom";switch(y){case"bestFit":{var G;let bt=(G=B.map(st=>[st,st.overflows.filter(O=>O>0).reduce((O,at)=>O+at,0)]).sort((st,O)=>st[1]-O[1])[0])==null?void 0:G[0].placement;bt&&(K=bt);break}case"initialPlacement":K=s}if(r!==K)return{reset:{placement:K}}}return{}}}};var di=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:n,y:r}=t,i=await async function(o,s){let{placement:a,platform:l,elements:u}=o,p=await(l.isRTL==null?void 0:l.isRTL(u.floating)),m=Ae(a),y=ln(a),w=un(a)==="x",v=["left","top"].includes(m)?-1:1,D=p&&w?-1:1,S=typeof s=="function"?s(o):s,{mainAxis:I,crossAxis:A,alignmentAxis:N}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...S};return y&&typeof N=="number"&&(A=y==="end"?-1*N:N),w?{x:A*D,y:I*v}:{x:I*v,y:A*D}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function hl(e){return e==="x"?"y":"x"}var hi=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:S=>{let{x:I,y:A}=S;return{x:I,y:A}}},...l}=e,u={x:n,y:r},p=await li(t,l),m=un(Ae(i)),y=hl(m),w=u[m],v=u[y];if(o){let S=m==="y"?"bottom":"right";w=ai(w+p[m==="y"?"top":"left"],w,w-p[S])}if(s){let S=y==="y"?"bottom":"right";v=ai(v+p[y==="y"?"top":"left"],v,v-p[S])}let D=a.fn({...t,[m]:w,[y]:v});return{...D,data:{x:D.x-n,y:D.y-r}}}}};function At(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $t(e){return At(e).getComputedStyle(e)}function we(e){return Zo(e)?(e.nodeName||"").toLowerCase():""}var Jn;function Ko(){if(Jn)return Jn;let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Jn=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Jn):navigator.userAgent}function ce(e){return e instanceof At(e).HTMLElement}function Ee(e){return e instanceof At(e).Element}function Zo(e){return e instanceof At(e).Node}function $o(e){return typeof ShadowRoot>"u"?!1:e instanceof At(e).ShadowRoot||e instanceof ShadowRoot}function Zn(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=$t(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function pl(e){return["table","td","th"].includes(we(e))}function pi(e){let t=/firefox/i.test(Ko()),n=$t(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{let o=n.contain;return o!=null&&o.includes(i)})}function Qo(){return!/^((?!chrome|android).)*safari/i.test(Ko())}function mi(e){return["html","body","#document"].includes(we(e))}var qo=Math.min,fn=Math.max,Kn=Math.round;function ts(e){let t=$t(e),n=parseFloat(t.width),r=parseFloat(t.height),i=e.offsetWidth,o=e.offsetHeight,s=Kn(n)!==i||Kn(r)!==o;return s&&(n=i,r=o),{width:n,height:r,fallback:s}}function es(e){return Ee(e)?e:e.contextElement}var ns={x:1,y:1};function Ge(e){let t=es(e);if(!ce(t))return ns;let n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=ts(t),s=(o?Kn(n.width):n.width)/r,a=(o?Kn(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function dn(e,t,n,r){var i,o;t===void 0&&(t=!1),n===void 0&&(n=!1);let s=e.getBoundingClientRect(),a=es(e),l=ns;t&&(r?Ee(r)&&(l=Ge(r)):l=Ge(e));let u=a?At(a):window,p=!Qo()&&n,m=(s.left+(p&&((i=u.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,y=(s.top+(p&&((o=u.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,w=s.width/l.x,v=s.height/l.y;if(a){let D=At(a),S=r&&Ee(r)?At(r):r,I=D.frameElement;for(;I&&r&&S!==D;){let A=Ge(I),N=I.getBoundingClientRect(),T=getComputedStyle(I);N.x+=(I.clientLeft+parseFloat(T.paddingLeft))*A.x,N.y+=(I.clientTop+parseFloat(T.paddingTop))*A.y,m*=A.x,y*=A.y,w*=A.x,v*=A.y,m+=N.x,y+=N.y,I=At(I).frameElement}}return{width:w,height:v,top:y,right:m+w,bottom:y+v,left:m,x:m,y}}function be(e){return((Zo(e)?e.ownerDocument:e.document)||window.document).documentElement}function Qn(e){return Ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function rs(e){return dn(be(e)).left+Qn(e).scrollLeft}function ml(e,t,n){let r=ce(t),i=be(t),o=dn(e,!0,n==="fixed",t),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(r||!r&&n!=="fixed")if((we(t)!=="body"||Zn(i))&&(s=Qn(t)),ce(t)){let l=dn(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else i&&(a.x=rs(i));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}function hn(e){if(we(e)==="html")return e;let t=e.assignedSlot||e.parentNode||($o(e)?e.host:null)||be(e);return $o(t)?t.host:t}function Xo(e){return ce(e)&&$t(e).position!=="fixed"?e.offsetParent:null}function Vo(e){let t=At(e),n=Xo(e);for(;n&&pl(n)&&$t(n).position==="static";)n=Xo(n);return n&&(we(n)==="html"||we(n)==="body"&&$t(n).position==="static"&&!pi(n))?t:n||function(r){let i=hn(r);for(;ce(i)&&!mi(i);){if(pi(i))return i;i=hn(i)}return null}(e)||t}function is(e){let t=hn(e);return mi(t)?e.ownerDocument.body:ce(t)&&Zn(t)?t:is(t)}function os(e,t){var n;t===void 0&&(t=[]);let r=is(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=At(r);return i?t.concat(o,o.visualViewport||[],Zn(r)?r:[]):t.concat(r,os(r))}function Jo(e,t,n){return t==="viewport"?cn(function(r,i){let o=At(r),s=be(r),a=o.visualViewport,l=s.clientWidth,u=s.clientHeight,p=0,m=0;if(a){l=a.width,u=a.height;let y=Qo();(y||!y&&i==="fixed")&&(p=a.offsetLeft,m=a.offsetTop)}return{width:l,height:u,x:p,y:m}}(e,n)):Ee(t)?function(r,i){let o=dn(r,!0,i==="fixed"),s=o.top+r.clientTop,a=o.left+r.clientLeft,l=ce(r)?Ge(r):{x:1,y:1},u=r.clientWidth*l.x,p=r.clientHeight*l.y,m=a*l.x,y=s*l.y;return{top:y,left:m,right:m+u,bottom:y+p,x:m,y,width:u,height:p}}(t,n):cn(function(r){var i;let o=be(r),s=Qn(r),a=(i=r.ownerDocument)==null?void 0:i.body,l=fn(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=fn(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),p=-s.scrollLeft+rs(r),m=-s.scrollTop;return $t(a||o).direction==="rtl"&&(p+=fn(o.clientWidth,a?a.clientWidth:0)-l),{width:l,height:u,x:p,y:m}}(be(e)))}var gl={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,o=n==="clippingAncestors"?function(u,p){let m=p.get(u);if(m)return m;let y=os(u).filter(S=>Ee(S)&&we(S)!=="body"),w=null,v=$t(u).position==="fixed",D=v?hn(u):u;for(;Ee(D)&&!mi(D);){let S=$t(D),I=pi(D);(v?I||w:I||S.position!=="static"||!w||!["absolute","fixed"].includes(w.position))?w=S:y=y.filter(A=>A!==D),D=hn(D)}return p.set(u,y),y}(t,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce((u,p)=>{let m=Jo(t,p,i);return u.top=fn(m.top,u.top),u.right=qo(m.right,u.right),u.bottom=qo(m.bottom,u.bottom),u.left=fn(m.left,u.left),u},Jo(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e,i=ce(n),o=be(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},a={x:1,y:1},l={x:0,y:0};if((i||!i&&r!=="fixed")&&((we(n)!=="body"||Zn(o))&&(s=Qn(n)),ce(n))){let u=dn(n);a=Ge(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+l.x,y:t.y*a.y-s.scrollTop*a.y+l.y}},isElement:Ee,getDimensions:function(e){return ts(e)},getOffsetParent:Vo,getDocumentElement:be,getScale:Ge,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e,i=this.getOffsetParent||Vo,o=this.getDimensions;return{reference:ml(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>$t(e).direction==="rtl"};var ss=(e,t,n)=>{let r=new Map,i={platform:gl,...n},o={...i.platform,_c:r};return Yo(e,t,{...i,platform:o})};var as=`/* Floatie CSS */
#sp-floatie-container {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  background: #222222;
  color: white;
  border-radius: 4px;
  padding: 2px;
  font-size: 11px;
  font-family: sans-serif;
}

#sp-floatie-arrow {
  position: absolute;
  background: rgb(255, 34, 34);
  background: linear-gradient(
    -45deg,
    rgba(34, 34, 34, 1) 0%,
    rgba(34, 34, 34, 1) 51%,
    rgba(0, 0, 0, 0) 53%,
    rgba(0, 0, 0, 0) 80%
  );
  width: 8px;
  height: 8px;
  transform: rotate(45deg);
}

.sp-floatie-action {
  display: block;
  background-color: #222222;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 8px;
  padding-right: 8px;
  margin: 0 0 !important;
}

.hide-1 {
  transition: opacity 2s;
  opacity: 0;
}
.hide-2 {
  transition: opacity 3s;
  opacity: 0;
}
.hide-3 {
  transition: opacity 4s;
  opacity: 0;
}
.hide-4 {
  transition: opacity 5s;
  opacity: 0;
}
.hide-5 {
  transition: opacity 6s;
  opacity: 0;
}

.sp-floatie-action:hover {
  background-color: #777;
}
`;var tr=class{constructor(){this.isCopyActionEnabled=!1;this.logger=new mt(this);let t=`
        <div id="sp-floatie-container">
            <div id="sp-floatie-arrow"></div>
            <div id="sp-floatie-search" class="sp-floatie-action" data-action="search">Search</div>
            <div id="sp-floatie-preview" class="sp-floatie-action" data-action="preview">Preview</div>
                        <div id="sp-floatie-copy" class="sp-floatie-action" data-action="copy">Copy</div>
        </div>
        `,n=document.createRange();n.selectNode(document.getElementsByTagName("body").item(0)),this.documentFragment=n.createContextualFragment(t);let r=this.documentFragment.getElementById("sp-floatie-container"),i=this.documentFragment.getElementById("sp-floatie-search"),o=this.documentFragment.getElementById("sp-floatie-preview"),s=this.documentFragment.getElementById("sp-floatie-copy"),a=this.documentFragment.getElementById("sp-floatie-arrow");if(!r||!i||!o||!s||!a)throw new Error("Impossible error obtaining action buttons from DOM");this.container=r,this.searchButton=i,this.previewButton=o,this.copyButton=s,this.tooltipArrow=a,this.logger.debug("Initialized floatie")}startListening(){if(this.inIframe())return;let t=document.createElement("better-previews-tooltip"),n=document.createElement("style");n.textContent=as,t.appendChild(n),t.appendChild(this.documentFragment),t.attachShadow({mode:"open"}).innerHTML="<slot></slot>",document.body.appendChild(t),window.onscroll=()=>this.hideAll(),window.onresize=()=>this.hideAll(),window.oncontextmenu=()=>this.hideAll(),document.onmouseup=r=>this.deferredMaybeShow(r),document.onkeydown=()=>this.hideAll(),this.setupLinkPreviews()}setupLinkPreviews(){let t=document.querySelectorAll("a"),n=null,r=null,i=null;t.forEach(o=>{!this.isGoodUrl(o.href)||!o.innerText.trim()||(o.addEventListener("mouseover",s=>{i&&(clearTimeout(i),i=null),n=setTimeout(async()=>{let a=await tt.get("preview-on-hover")??!1;if(this.showActions(o.getBoundingClientRect(),s,o.href,[this.previewButton]),a){let l=await tt.get("preview-on-hover-delay")??3;this.container.classList.add("hide-"+l),r=setTimeout(()=>{this.container.className="",this.container.style.display="none",this.sendMessage("preview",o.href)},l*1e3)}},500)}),o.addEventListener("mouseout",()=>{n&&(clearTimeout(n),n=null),r&&(clearTimeout(r),this.container.className="",this.container.style.display="none",r=null),i=setTimeout(()=>{this.hideAll()},2e3)}))})}stopListening(){document.body.removeChild(this.documentFragment),document.removeEventListener("onmouseup",()=>{}),window.removeEventListener("onscroll",()=>{}),window.removeEventListener("onresize",()=>{})}deferredMaybeShow(t){this.showTimeout=window.setTimeout(()=>this.maybeShow(t),100)}maybeShow(t){if(this.hideAll(),typeof window.getSelection>"u")return;let n=window.getSelection();if(n.isCollapsed)return;let r=n.toString().trim(),o=n.getRangeAt(0).getBoundingClientRect();this.logger.debug("Selected: ",r);let s=[];this.shouldShowPreview(t,r)?s.push(this.previewButton):this.shouldShowSearch(t,r)&&s.push(this.searchButton),this.shouldShowCopy(r)&&s.push(this.copyButton),this.showActions(o,t,r,s)}getAbsoluteUrl(t){let n=new RegExp("^(?:[a-z+]+:)?//","i"),r;try{if(n.test(t))r=new URL(t);else return null}catch{return null}return r}isGoodUrl(t){if(!t||!t.trim())return!1;let n=this.getAbsoluteUrl(t);return!(n===null||n.protocol!=="http:"&&n.protocol!=="https:"||n.hostname===window.location.hostname)}shouldShowCopy(t){return this.isCopyActionEnabled&&t.length>0}shouldShowPreview(t,n){let r=i=>{var o=i.target;do if(o.nodeName.toUpperCase()==="A"&&this.isGoodUrl(o.href))return!0;while(o=o.parentElement);return!1};return this.isGoodUrl(n)||r(t)}getPreviewUrl(t,n){let r=i=>{var o=i.target;do if(o.nodeName.toUpperCase()==="A"&&this.isGoodUrl(o.href))return o.href;while(o=o.parentElement)};return this.isGoodUrl(n)?this.getAbsoluteUrl(n)?.href:r(t)}shouldShowSearch(t,n){let r=a=>a.length>0&&a.length<100,i=a=>String(a).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),o=a=>!isNaN(Date.parse(a)),s=a=>/[a-zA-Z]/.test(a);return r(n)&&s(n)&&!i(n)&&!o(n)&&!this.shouldShowPreview(t,n)}showActions(t,n,r,i){this.hideAll(),i.length!==0&&(this.showContainer(t),i.forEach(o=>{o.style.display="inline-block",o.onclick=()=>{if(typeof window.getSelection<"u"){let s=window.getSelection();if(s.isCollapsed||(r=s.toString().trim()),o.innerText=="Preview"){let a=this.getPreviewUrl(n,r);a&&(r=a)}}this.sendMessage(o.getAttribute("data-action")||"unknown-action",r),this.hideAll()}}))}sendMessage(t,n){window.postMessage({application:nt.__package_name__,action:t,data:n},window.location.origin)}showContainer(t){this.container.style.display="block";let n=()=>new Promise(i=>{let o=Math.max(...Array.from(document.querySelectorAll("body *"),s=>parseFloat(window.getComputedStyle(s).zIndex)).filter(s=>!Number.isNaN(s)),0);i(o)});ss({getBoundingClientRect(){return{width:t.width,height:t.height,x:t.x,y:t.y,top:t.top,left:t.left,right:t.right,bottom:t.bottom}}},this.container,{placement:"top",strategy:"absolute",middleware:[di(12),fi(),hi({padding:5}),ui({element:this.tooltipArrow})]}).then(({x:i,y:o,placement:s,middlewareData:a})=>{Object.assign(this.container.style,{top:`${o}px`,left:`${i}px`});let l=a.arrow,u="bottom";switch(s.split("-")[0]){case"top":u="bottom";break;case"left":u="right";break;case"bottom":u="top";break;case"right":u="left";break}Object.assign(this.tooltipArrow.style,{left:l?.x!=null?`${l.x}px`:"",top:l?.y!=null?`${l.y}px`:"",right:"",bottom:"",[u]:"-4px"}),n().then(p=>{this.container.style.zIndex=""+(p+10),this.tooltipArrow.style.zIndex=""+(p-1)})})}hideAll(){clearTimeout(this.showTimeout),this.container.style.display="none",this.copyButton.style.display="none",this.searchButton.style.display="none",this.previewButton.style.display="none"}inIframe(){try{return window.self!==window.top}catch{return!0}}};var gi=class{constructor(){this.floatie=new tr;this.logger=new mt(this);this.unsupportedHosts=["mail.google.com"]}async start(){if(await this.isDisabledDomain()){this.logger.debug("Better Previews is disabled on ",window.location.host);return}this.floatie.startListening(),this.inIframe()||chrome.runtime.onMessage.addListener((t,n,r)=>{this.logger.debug("Re-posting message for DOM: ",t),window.postMessage({application:nt.__package_name__,...t}),r("ok")})}stop(){this.floatie.stopListening()}async isDisabledDomain(){let t=await tt.get("blocked-sites")??"";if(!t)return!1;let n=window.location.hostname;return t.includes(n)}inIframe(){try{return window.self!==window.top}catch{return!0}}},yl=new gi;yl.start();})();
