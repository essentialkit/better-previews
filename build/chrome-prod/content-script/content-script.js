var IS_DEV_BUILD=false;
(()=>{var ki=Object.create;var ft=Object.defineProperty;var Ri=Object.getOwnPropertyDescriptor;var Oi=Object.getOwnPropertyNames;var Pi=Object.getPrototypeOf,zi=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ji=(t,e)=>{for(var i in e)ft(t,i,{get:e[i],enumerable:!0})},Bi=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Oi(e))!zi.call(t,o)&&o!==i&&ft(t,o,{get:()=>e[o],enumerable:!(n=Ri(e,o))||n.enumerable});return t};var Gt=(t,e,i)=>(i=t!=null?ki(Pi(t)):{},Bi(e||!t||!t.__esModule?ft(i,"default",{value:t,enumerable:!0}):i,t));var Jt=Ke(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.sanitizeUrl=void 0;var Qi=/^([^\w]*)(javascript|data|vbscript)/im,Ji=/&#(\w+)(^\w|;)?/g,Ki=/&(newline|tab);/gi,en=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,tn=/^.+(:|&colon;)/gim,nn=[".","/"];function rn(t){return nn.indexOf(t[0])>-1}function on(t){return t.replace(Ji,function(e,i){return String.fromCharCode(i)})}function sn(t){var e=on(t||"").replace(Ki,"").replace(en,"").trim();if(!e)return"about:blank";if(rn(e))return e;var i=e.match(tn);if(!i)return e;var n=i[0];return Qi.test(n)?"about:blank":e}nt.sanitizeUrl=sn});var ei=Ke((Cr,_t)=>{function Kt(t,e){if(e&&e.documentElement)t=e,e=arguments[2];else if(!t||!t.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(e=e||{},this._doc=t,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!e.debug,this._maxElemsToParse=e.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=e.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=e.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(e.classesToPreserve||[]),this._keepClasses=!!e.keepClasses,this._serializer=e.serializer||function(i){return i.innerHTML},this._disableJSONLD=!!e.disableJSONLD,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let i=function(n){if(n.nodeType==n.TEXT_NODE)return`${n.nodeName} ("${n.textContent}")`;let o=Array.from(n.attributes||[],function(r){return`${r.name}="${r.value}"`}).join(" ");return`<${n.localName} ${o}>`};this.log=function(){if(typeof dump<"u"){var n=Array.prototype.map.call(arguments,function(o){return o&&o.nodeName?i(o):o}).join(" ");dump("Reader: (Readability) "+n+`
`)}else if(typeof console<"u"){let o=Array.from(arguments,r=>r&&r.nodeType==this.ELEMENT_NODE?i(r):r);o.unshift("Reader: (Readability)"),console.log.apply(console,o)}}}else this.log=function(){}}Kt.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(t){this._fixRelativeUris(t),this._simplifyNestedElements(t),this._keepClasses||this._cleanClasses(t)},_removeNodes:function(t,e){if(this._docJSDOMParser&&t._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var i=t.length-1;i>=0;i--){var n=t[i],o=n.parentNode;o&&(!e||e.call(this,n,i,t))&&o.removeChild(n)}},_replaceNodeTags:function(t,e){if(this._docJSDOMParser&&t._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let i of t)this._setNodeTag(i,e)},_forEachNode:function(t,e){Array.prototype.forEach.call(t,e,this)},_findNode:function(t,e){return Array.prototype.find.call(t,e,this)},_someNode:function(t,e){return Array.prototype.some.call(t,e,this)},_everyNode:function(t,e){return Array.prototype.every.call(t,e,this)},_concatNodeLists:function(){var t=Array.prototype.slice,e=t.call(arguments),i=e.map(function(n){return t.call(n)});return Array.prototype.concat.apply([],i)},_getAllNodesWithTag:function(t,e){return t.querySelectorAll?t.querySelectorAll(e.join(",")):[].concat.apply([],e.map(function(i){var n=t.getElementsByTagName(i);return Array.isArray(n)?n:Array.from(n)}))},_cleanClasses:function(t){var e=this._classesToPreserve,i=(t.getAttribute("class")||"").split(/\s+/).filter(function(n){return e.indexOf(n)!=-1}).join(" ");for(i?t.setAttribute("class",i):t.removeAttribute("class"),t=t.firstElementChild;t;t=t.nextElementSibling)this._cleanClasses(t)},_fixRelativeUris:function(t){var e=this._doc.baseURI,i=this._doc.documentURI;function n(a){if(e==i&&a.charAt(0)=="#")return a;try{return new URL(a,e).href}catch{}return a}var o=this._getAllNodesWithTag(t,["a"]);this._forEachNode(o,function(a){var c=a.getAttribute("href");if(c)if(c.indexOf("javascript:")===0)if(a.childNodes.length===1&&a.childNodes[0].nodeType===this.TEXT_NODE){var f=this._doc.createTextNode(a.textContent);a.parentNode.replaceChild(f,a)}else{for(var d=this._doc.createElement("span");a.firstChild;)d.appendChild(a.firstChild);a.parentNode.replaceChild(d,a)}else a.setAttribute("href",n(c))});var r=this._getAllNodesWithTag(t,["img","picture","figure","video","audio","source"]);this._forEachNode(r,function(a){var c=a.getAttribute("src"),f=a.getAttribute("poster"),d=a.getAttribute("srcset");if(c&&a.setAttribute("src",n(c)),f&&a.setAttribute("poster",n(f)),d){var _=d.replace(this.REGEXPS.srcsetUrl,function(p,b,A,x){return n(b)+(A||"")+x});a.setAttribute("srcset",_)}})},_simplifyNestedElements:function(t){for(var e=t;e;){if(e.parentNode&&["DIV","SECTION"].includes(e.tagName)&&!(e.id&&e.id.startsWith("readability"))){if(this._isElementWithoutContent(e)){e=this._removeAndGetNext(e);continue}else if(this._hasSingleTagInsideElement(e,"DIV")||this._hasSingleTagInsideElement(e,"SECTION")){for(var i=e.children[0],n=0;n<e.attributes.length;n++)i.setAttribute(e.attributes[n].name,e.attributes[n].value);e.parentNode.replaceChild(i,e),e=i;continue}}e=this._getNextNode(e)}},_getArticleTitle:function(){var t=this._doc,e="",i="";try{e=i=t.title.trim(),typeof e!="string"&&(e=i=this._getInnerText(t.getElementsByTagName("title")[0]))}catch{}var n=!1;function o(_){return _.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(e))n=/ [\\\/>»] /.test(e),e=i.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),o(e)<3&&(e=i.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(e.indexOf(": ")!==-1){var r=this._concatNodeLists(t.getElementsByTagName("h1"),t.getElementsByTagName("h2")),a=e.trim(),c=this._someNode(r,function(_){return _.textContent.trim()===a});c||(e=i.substring(i.lastIndexOf(":")+1),o(e)<3?e=i.substring(i.indexOf(":")+1):o(i.substr(0,i.indexOf(":")))>5&&(e=i))}else if(e.length>150||e.length<15){var f=t.getElementsByTagName("h1");f.length===1&&(e=this._getInnerText(f[0]))}e=e.trim().replace(this.REGEXPS.normalize," ");var d=o(e);return d<=4&&(!n||d!=o(i.replace(/[\|\-\\\/>»]+/g,""))-1)&&(e=i),e},_prepDocument:function(){var t=this._doc;this._removeNodes(this._getAllNodesWithTag(t,["style"])),t.body&&this._replaceBrs(t.body),this._replaceNodeTags(this._getAllNodesWithTag(t,["font"]),"SPAN")},_nextNode:function(t){for(var e=t;e&&e.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(e.textContent);)e=e.nextSibling;return e},_replaceBrs:function(t){this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(e){for(var i=e.nextSibling,n=!1;(i=this._nextNode(i))&&i.tagName=="BR";){n=!0;var o=i.nextSibling;i.parentNode.removeChild(i),i=o}if(n){var r=this._doc.createElement("p");for(e.parentNode.replaceChild(r,e),i=r.nextSibling;i;){if(i.tagName=="BR"){var a=this._nextNode(i.nextSibling);if(a&&a.tagName=="BR")break}if(!this._isPhrasingContent(i))break;var c=i.nextSibling;r.appendChild(i),i=c}for(;r.lastChild&&this._isWhitespace(r.lastChild);)r.removeChild(r.lastChild);r.parentNode.tagName==="P"&&this._setNodeTag(r.parentNode,"DIV")}})},_setNodeTag:function(t,e){if(this.log("_setNodeTag",t,e),this._docJSDOMParser)return t.localName=e.toLowerCase(),t.tagName=e.toUpperCase(),t;for(var i=t.ownerDocument.createElement(e);t.firstChild;)i.appendChild(t.firstChild);t.parentNode.replaceChild(i,t),t.readability&&(i.readability=t.readability);for(var n=0;n<t.attributes.length;n++)try{i.setAttribute(t.attributes[n].name,t.attributes[n].value)}catch{}return i},_prepArticle:function(t){this._cleanStyles(t),this._markDataTables(t),this._fixLazyImages(t),this._cleanConditionally(t,"form"),this._cleanConditionally(t,"fieldset"),this._clean(t,"object"),this._clean(t,"embed"),this._clean(t,"footer"),this._clean(t,"link"),this._clean(t,"aside");var e=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(t.children,function(i){this._cleanMatchedNodes(i,function(n,o){return this.REGEXPS.shareElements.test(o)&&n.textContent.length<e})}),this._clean(t,"iframe"),this._clean(t,"input"),this._clean(t,"textarea"),this._clean(t,"select"),this._clean(t,"button"),this._cleanHeaders(t),this._cleanConditionally(t,"table"),this._cleanConditionally(t,"ul"),this._cleanConditionally(t,"div"),this._replaceNodeTags(this._getAllNodesWithTag(t,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(t,["p"]),function(i){var n=i.getElementsByTagName("img").length,o=i.getElementsByTagName("embed").length,r=i.getElementsByTagName("object").length,a=i.getElementsByTagName("iframe").length,c=n+o+r+a;return c===0&&!this._getInnerText(i,!1)}),this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(i){var n=this._nextNode(i.nextSibling);n&&n.tagName=="P"&&i.parentNode.removeChild(i)}),this._forEachNode(this._getAllNodesWithTag(t,["table"]),function(i){var n=this._hasSingleTagInsideElement(i,"TBODY")?i.firstElementChild:i;if(this._hasSingleTagInsideElement(n,"TR")){var o=n.firstElementChild;if(this._hasSingleTagInsideElement(o,"TD")){var r=o.firstElementChild;r=this._setNodeTag(r,this._everyNode(r.childNodes,this._isPhrasingContent)?"P":"DIV"),i.parentNode.replaceChild(r,i)}}})},_initializeNode:function(t){switch(t.readability={contentScore:0},t.tagName){case"DIV":t.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":t.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":t.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":t.readability.contentScore-=5;break}t.readability.contentScore+=this._getClassWeight(t)},_removeAndGetNext:function(t){var e=this._getNextNode(t,!0);return t.parentNode.removeChild(t),e},_getNextNode:function(t,e){if(!e&&t.firstElementChild)return t.firstElementChild;if(t.nextElementSibling)return t.nextElementSibling;do t=t.parentNode;while(t&&!t.nextElementSibling);return t&&t.nextElementSibling},_textSimilarity:function(t,e){var i=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),n=e.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!i.length||!n.length)return 0;var o=n.filter(a=>!i.includes(a)),r=o.join(" ").length/n.join(" ").length;return 1-r},_checkByline:function(t,e){if(this._articleByline)return!1;if(t.getAttribute!==void 0)var i=t.getAttribute("rel"),n=t.getAttribute("itemprop");return(i==="author"||n&&n.indexOf("author")!==-1||this.REGEXPS.byline.test(e))&&this._isValidByline(t.textContent)?(this._articleByline=t.textContent.trim(),!0):!1},_getNodeAncestors:function(t,e){e=e||0;for(var i=0,n=[];t.parentNode&&(n.push(t.parentNode),!(e&&++i===e));)t=t.parentNode;return n},_grabArticle:function(t){this.log("**** grabArticle ****");var e=this._doc,i=t!==null;if(t=t||this._doc.body,!t)return this.log("No body found in document. Abort."),null;for(var n=t.innerHTML;;){this.log("Starting grabArticle loop");var o=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),r=[],a=this._doc.documentElement;let he=!0;for(;a;){a.tagName==="HTML"&&(this._articleLang=a.getAttribute("lang"));var c=a.className+" "+a.id;if(!this._isProbablyVisible(a)){this.log("Removing hidden node - "+c),a=this._removeAndGetNext(a);continue}if(this._checkByline(a,c)){a=this._removeAndGetNext(a);continue}if(he&&this._headerDuplicatesTitle(a)){this.log("Removing header: ",a.textContent.trim(),this._articleTitle.trim()),he=!1,a=this._removeAndGetNext(a);continue}if(o){if(this.REGEXPS.unlikelyCandidates.test(c)&&!this.REGEXPS.okMaybeItsACandidate.test(c)&&!this._hasAncestorTag(a,"table")&&!this._hasAncestorTag(a,"code")&&a.tagName!=="BODY"&&a.tagName!=="A"){this.log("Removing unlikely candidate - "+c),a=this._removeAndGetNext(a);continue}if(this.UNLIKELY_ROLES.includes(a.getAttribute("role"))){this.log("Removing content with role "+a.getAttribute("role")+" - "+c),a=this._removeAndGetNext(a);continue}}if((a.tagName==="DIV"||a.tagName==="SECTION"||a.tagName==="HEADER"||a.tagName==="H1"||a.tagName==="H2"||a.tagName==="H3"||a.tagName==="H4"||a.tagName==="H5"||a.tagName==="H6")&&this._isElementWithoutContent(a)){a=this._removeAndGetNext(a);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(a.tagName)!==-1&&r.push(a),a.tagName==="DIV"){for(var f=null,d=a.firstChild;d;){var _=d.nextSibling;if(this._isPhrasingContent(d))f!==null?f.appendChild(d):this._isWhitespace(d)||(f=e.createElement("p"),a.replaceChild(f,d),f.appendChild(d));else if(f!==null){for(;f.lastChild&&this._isWhitespace(f.lastChild);)f.removeChild(f.lastChild);f=null}d=_}if(this._hasSingleTagInsideElement(a,"P")&&this._getLinkDensity(a)<.25){var p=a.children[0];a.parentNode.replaceChild(p,a),a=p,r.push(a)}else this._hasChildBlockElement(a)||(a=this._setNodeTag(a,"P"),r.push(a))}a=this._getNextNode(a)}var b=[];this._forEachNode(r,function(W){if(!(!W.parentNode||typeof W.parentNode.tagName>"u")){var F=this._getInnerText(W);if(!(F.length<25)){var ee=this._getNodeAncestors(W,5);if(ee.length!==0){var ae=0;ae+=1,ae+=F.split(",").length,ae+=Math.min(Math.floor(F.length/100),3),this._forEachNode(ee,function(re,Y){if(!(!re.tagName||!re.parentNode||typeof re.parentNode.tagName>"u")){if(typeof re.readability>"u"&&(this._initializeNode(re),b.push(re)),Y===0)var ye=1;else Y===1?ye=2:ye=Y*3;re.readability.contentScore+=ae/ye}})}}}});for(var A=[],x=0,S=b.length;x<S;x+=1){var E=b[x],M=E.readability.contentScore*(1-this._getLinkDensity(E));E.readability.contentScore=M,this.log("Candidate:",E,"with score "+M);for(var L=0;L<this._nbTopCandidates;L++){var T=A[L];if(!T||M>T.readability.contentScore){A.splice(L,0,E),A.length>this._nbTopCandidates&&A.pop();break}}}var N=A[0]||null,D=!1,C;if(N===null||N.tagName==="BODY"){for(N=e.createElement("DIV"),D=!0;t.firstChild;)this.log("Moving child out:",t.firstChild),N.appendChild(t.firstChild);t.appendChild(N),this._initializeNode(N)}else if(N){for(var P=[],B=1;B<A.length;B++)A[B].readability.contentScore/N.readability.contentScore>=.75&&P.push(this._getNodeAncestors(A[B]));var H=3;if(P.length>=H)for(C=N.parentNode;C.tagName!=="BODY";){for(var O=0,G=0;G<P.length&&O<H;G++)O+=Number(P[G].includes(C));if(O>=H){N=C;break}C=C.parentNode}N.readability||this._initializeNode(N),C=N.parentNode;for(var X=N.readability.contentScore,ce=X/3;C.tagName!=="BODY";){if(!C.readability){C=C.parentNode;continue}var Q=C.readability.contentScore;if(Q<ce)break;if(Q>X){N=C;break}X=C.readability.contentScore,C=C.parentNode}for(C=N.parentNode;C.tagName!="BODY"&&C.children.length==1;)N=C,C=N.parentNode;N.readability||this._initializeNode(N)}var R=e.createElement("DIV");i&&(R.id="readability-content");var J=Math.max(10,N.readability.contentScore*.2);C=N.parentNode;for(var ne=C.children,Z=0,K=ne.length;Z<K;Z++){var j=ne[Z],z=!1;if(this.log("Looking at sibling node:",j,j.readability?"with score "+j.readability.contentScore:""),this.log("Sibling has score",j.readability?j.readability.contentScore:"Unknown"),j===N)z=!0;else{var fe=0;if(j.className===N.className&&N.className!==""&&(fe+=N.readability.contentScore*.2),j.readability&&j.readability.contentScore+fe>=J)z=!0;else if(j.nodeName==="P"){var ve=this._getLinkDensity(j),be=this._getInnerText(j),ge=be.length;(ge>80&&ve<.25||ge<80&&ge>0&&ve===0&&be.search(/\.( |$)/)!==-1)&&(z=!0)}}z&&(this.log("Appending node:",j),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(j.nodeName)===-1&&(this.log("Altering sibling:",j,"to div."),j=this._setNodeTag(j,"DIV")),R.appendChild(j),ne=C.children,Z-=1,K-=1)}if(this._debug&&this.log("Article content pre-prep: "+R.innerHTML),this._prepArticle(R),this._debug&&this.log("Article content post-prep: "+R.innerHTML),D)N.id="readability-page-1",N.className="page";else{var se=e.createElement("DIV");for(se.id="readability-page-1",se.className="page";R.firstChild;)se.appendChild(R.firstChild);R.appendChild(se)}this._debug&&this.log("Article content after paging: "+R.innerHTML);var Se=!0,pe=this._getInnerText(R,!0).length;if(pe<this._charThreshold)if(Se=!1,t.innerHTML=n,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:R,textLength:pe});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:R,textLength:pe});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:R,textLength:pe});else{if(this._attempts.push({articleContent:R,textLength:pe}),this._attempts.sort(function(W,F){return F.textLength-W.textLength}),!this._attempts[0].textLength)return null;R=this._attempts[0].articleContent,Se=!0}if(Se){var Me=[C,N].concat(this._getNodeAncestors(C));return this._someNode(Me,function(W){if(!W.tagName)return!1;var F=W.getAttribute("dir");return F?(this._articleDir=F,!0):!1}),R}}},_isValidByline:function(t){return typeof t=="string"||t instanceof String?(t=t.trim(),t.length>0&&t.length<100):!1},_unescapeHtmlEntities:function(t){if(!t)return t;var e=this.HTML_ESCAPE_MAP;return t.replace(/&(quot|amp|apos|lt|gt);/g,function(i,n){return e[n]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(i,n,o){var r=parseInt(n||o,n?16:10);return String.fromCharCode(r)})},_getJSONLD:function(t){var e=this._getAllNodesWithTag(t,["script"]),i;return this._forEachNode(e,function(n){if(!i&&n.getAttribute("type")==="application/ld+json")try{var o=n.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),r=JSON.parse(o);if(!r["@context"]||!r["@context"].match(/^https?\:\/\/schema\.org$/)||(!r["@type"]&&Array.isArray(r["@graph"])&&(r=r["@graph"].find(function(d){return(d["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!r||!r["@type"]||!r["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(i={},typeof r.name=="string"&&typeof r.headline=="string"&&r.name!==r.headline){var a=this._getArticleTitle(),c=this._textSimilarity(r.name,a)>.75,f=this._textSimilarity(r.headline,a)>.75;f&&!c?i.title=r.headline:i.title=r.name}else typeof r.name=="string"?i.title=r.name.trim():typeof r.headline=="string"&&(i.title=r.headline.trim());r.author&&(typeof r.author.name=="string"?i.byline=r.author.name.trim():Array.isArray(r.author)&&r.author[0]&&typeof r.author[0].name=="string"&&(i.byline=r.author.filter(function(d){return d&&typeof d.name=="string"}).map(function(d){return d.name.trim()}).join(", "))),typeof r.description=="string"&&(i.excerpt=r.description.trim()),r.publisher&&typeof r.publisher.name=="string"&&(i.siteName=r.publisher.name.trim());return}catch(d){this.log(d.message)}}),i||{}},_getArticleMetadata:function(t){var e={},i={},n=this._doc.getElementsByTagName("meta"),o=/\s*(dc|dcterm|og|twitter)\s*:\s*(author|creator|description|title|site_name)\s*/gi,r=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(n,function(a){var c=a.getAttribute("name"),f=a.getAttribute("property"),d=a.getAttribute("content");if(!!d){var _=null,p=null;f&&(_=f.match(o),_&&(p=_[0].toLowerCase().replace(/\s/g,""),i[p]=d.trim())),!_&&c&&r.test(c)&&(p=c,d&&(p=p.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),i[p]=d.trim()))}}),e.title=t.title||i["dc:title"]||i["dcterm:title"]||i["og:title"]||i["weibo:article:title"]||i["weibo:webpage:title"]||i.title||i["twitter:title"],e.title||(e.title=this._getArticleTitle()),e.byline=t.byline||i["dc:creator"]||i["dcterm:creator"]||i.author,e.excerpt=t.excerpt||i["dc:description"]||i["dcterm:description"]||i["og:description"]||i["weibo:article:description"]||i["weibo:webpage:description"]||i.description||i["twitter:description"],e.siteName=t.siteName||i["og:site_name"],e.title=this._unescapeHtmlEntities(e.title),e.byline=this._unescapeHtmlEntities(e.byline),e.excerpt=this._unescapeHtmlEntities(e.excerpt),e.siteName=this._unescapeHtmlEntities(e.siteName),e},_isSingleImage:function(t){return t.tagName==="IMG"?!0:t.children.length!==1||t.textContent.trim()!==""?!1:this._isSingleImage(t.children[0])},_unwrapNoscriptImages:function(t){var e=Array.from(t.getElementsByTagName("img"));this._forEachNode(e,function(n){for(var o=0;o<n.attributes.length;o++){var r=n.attributes[o];switch(r.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(r.value))return}n.parentNode.removeChild(n)});var i=Array.from(t.getElementsByTagName("noscript"));this._forEachNode(i,function(n){var o=t.createElement("div");if(o.innerHTML=n.innerHTML,!!this._isSingleImage(o)){var r=n.previousElementSibling;if(r&&this._isSingleImage(r)){var a=r;a.tagName!=="IMG"&&(a=r.getElementsByTagName("img")[0]);for(var c=o.getElementsByTagName("img")[0],f=0;f<a.attributes.length;f++){var d=a.attributes[f];if(d.value!==""&&(d.name==="src"||d.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(d.value))){if(c.getAttribute(d.name)===d.value)continue;var _=d.name;c.hasAttribute(_)&&(_="data-old-"+_),c.setAttribute(_,d.value)}}n.parentNode.replaceChild(o.firstElementChild,r)}}})},_removeScripts:function(t){this._removeNodes(this._getAllNodesWithTag(t,["script"]),function(e){return e.nodeValue="",e.removeAttribute("src"),!0}),this._removeNodes(this._getAllNodesWithTag(t,["noscript"]))},_hasSingleTagInsideElement:function(t,e){return t.children.length!=1||t.children[0].tagName!==e?!1:!this._someNode(t.childNodes,function(i){return i.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(i.textContent)})},_isElementWithoutContent:function(t){return t.nodeType===this.ELEMENT_NODE&&t.textContent.trim().length==0&&(t.children.length==0||t.children.length==t.getElementsByTagName("br").length+t.getElementsByTagName("hr").length)},_hasChildBlockElement:function(t){return this._someNode(t.childNodes,function(e){return this.DIV_TO_P_ELEMS.has(e.tagName)||this._hasChildBlockElement(e)})},_isPhrasingContent:function(t){return t.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(t.tagName)!==-1||(t.tagName==="A"||t.tagName==="DEL"||t.tagName==="INS")&&this._everyNode(t.childNodes,this._isPhrasingContent)},_isWhitespace:function(t){return t.nodeType===this.TEXT_NODE&&t.textContent.trim().length===0||t.nodeType===this.ELEMENT_NODE&&t.tagName==="BR"},_getInnerText:function(t,e){e=typeof e>"u"?!0:e;var i=t.textContent.trim();return e?i.replace(this.REGEXPS.normalize," "):i},_getCharCount:function(t,e){return e=e||",",this._getInnerText(t).split(e).length-1},_cleanStyles:function(t){if(!(!t||t.tagName.toLowerCase()==="svg")){for(var e=0;e<this.PRESENTATIONAL_ATTRIBUTES.length;e++)t.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[e]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(t.tagName)!==-1&&(t.removeAttribute("width"),t.removeAttribute("height"));for(var i=t.firstElementChild;i!==null;)this._cleanStyles(i),i=i.nextElementSibling}},_getLinkDensity:function(t){var e=this._getInnerText(t).length;if(e===0)return 0;var i=0;return this._forEachNode(t.getElementsByTagName("a"),function(n){var o=n.getAttribute("href"),r=o&&this.REGEXPS.hashUrl.test(o)?.3:1;i+=this._getInnerText(n).length*r}),i/e},_getClassWeight:function(t){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var e=0;return typeof t.className=="string"&&t.className!==""&&(this.REGEXPS.negative.test(t.className)&&(e-=25),this.REGEXPS.positive.test(t.className)&&(e+=25)),typeof t.id=="string"&&t.id!==""&&(this.REGEXPS.negative.test(t.id)&&(e-=25),this.REGEXPS.positive.test(t.id)&&(e+=25)),e},_clean:function(t,e){var i=["object","embed","iframe"].indexOf(e)!==-1;this._removeNodes(this._getAllNodesWithTag(t,[e]),function(n){if(i){for(var o=0;o<n.attributes.length;o++)if(this.REGEXPS.videos.test(n.attributes[o].value))return!1;if(n.tagName==="object"&&this.REGEXPS.videos.test(n.innerHTML))return!1}return!0})},_hasAncestorTag:function(t,e,i,n){i=i||3,e=e.toUpperCase();for(var o=0;t.parentNode;){if(i>0&&o>i)return!1;if(t.parentNode.tagName===e&&(!n||n(t.parentNode)))return!0;t=t.parentNode,o++}return!1},_getRowAndColumnCount:function(t){for(var e=0,i=0,n=t.getElementsByTagName("tr"),o=0;o<n.length;o++){var r=n[o].getAttribute("rowspan")||0;r&&(r=parseInt(r,10)),e+=r||1;for(var a=0,c=n[o].getElementsByTagName("td"),f=0;f<c.length;f++){var d=c[f].getAttribute("colspan")||0;d&&(d=parseInt(d,10)),a+=d||1}i=Math.max(i,a)}return{rows:e,columns:i}},_markDataTables:function(t){for(var e=t.getElementsByTagName("table"),i=0;i<e.length;i++){var n=e[i],o=n.getAttribute("role");if(o=="presentation"){n._readabilityDataTable=!1;continue}var r=n.getAttribute("datatable");if(r=="0"){n._readabilityDataTable=!1;continue}var a=n.getAttribute("summary");if(a){n._readabilityDataTable=!0;continue}var c=n.getElementsByTagName("caption")[0];if(c&&c.childNodes.length>0){n._readabilityDataTable=!0;continue}var f=["col","colgroup","tfoot","thead","th"],d=function(p){return!!n.getElementsByTagName(p)[0]};if(f.some(d)){this.log("Data table because found data-y descendant"),n._readabilityDataTable=!0;continue}if(n.getElementsByTagName("table")[0]){n._readabilityDataTable=!1;continue}var _=this._getRowAndColumnCount(n);if(_.rows>=10||_.columns>4){n._readabilityDataTable=!0;continue}n._readabilityDataTable=_.rows*_.columns>10}},_fixLazyImages:function(t){this._forEachNode(this._getAllNodesWithTag(t,["img","picture","figure"]),function(e){if(e.src&&this.REGEXPS.b64DataUrl.test(e.src)){var i=this.REGEXPS.b64DataUrl.exec(e.src);if(i[1]==="image/svg+xml")return;for(var n=!1,o=0;o<e.attributes.length;o++){var r=e.attributes[o];if(r.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(r.value)){n=!0;break}}if(n){var a=e.src.search(/base64\s*/i)+7,c=e.src.length-a;c<133&&e.removeAttribute("src")}}if(!((e.src||e.srcset&&e.srcset!="null")&&e.className.toLowerCase().indexOf("lazy")===-1)){for(var f=0;f<e.attributes.length;f++)if(r=e.attributes[f],!(r.name==="src"||r.name==="srcset"||r.name==="alt")){var d=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(r.value)?d="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(r.value)&&(d="src"),d){if(e.tagName==="IMG"||e.tagName==="PICTURE")e.setAttribute(d,r.value);else if(e.tagName==="FIGURE"&&!this._getAllNodesWithTag(e,["img","picture"]).length){var _=this._doc.createElement("img");_.setAttribute(d,r.value),e.appendChild(_)}}}}})},_getTextDensity:function(t,e){var i=this._getInnerText(t,!0).length;if(i===0)return 0;var n=0,o=this._getAllNodesWithTag(t,e);return this._forEachNode(o,r=>n+=this._getInnerText(r,!0).length),n/i},_cleanConditionally:function(t,e){!this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)||this._removeNodes(this._getAllNodesWithTag(t,[e]),function(i){var n=function(D){return D._readabilityDataTable},o=e==="ul"||e==="ol";if(!o){var r=0,a=this._getAllNodesWithTag(i,["ul","ol"]);this._forEachNode(a,D=>r+=this._getInnerText(D).length),o=r/this._getInnerText(i).length>.9}if(e==="table"&&n(i)||this._hasAncestorTag(i,"table",-1,n)||this._hasAncestorTag(i,"code"))return!1;var c=this._getClassWeight(i);this.log("Cleaning Conditionally",i);var f=0;if(c+f<0)return!0;if(this._getCharCount(i,",")<10){for(var d=i.getElementsByTagName("p").length,_=i.getElementsByTagName("img").length,p=i.getElementsByTagName("li").length-100,b=i.getElementsByTagName("input").length,A=this._getTextDensity(i,["h1","h2","h3","h4","h5","h6"]),x=0,S=this._getAllNodesWithTag(i,["object","embed","iframe"]),E=0;E<S.length;E++){for(var M=0;M<S[E].attributes.length;M++)if(this.REGEXPS.videos.test(S[E].attributes[M].value))return!1;if(S[E].tagName==="object"&&this.REGEXPS.videos.test(S[E].innerHTML))return!1;x++}var L=this._getLinkDensity(i),T=this._getInnerText(i).length,N=_>1&&d/_<.5&&!this._hasAncestorTag(i,"figure")||!o&&p>d||b>Math.floor(d/3)||!o&&A<.9&&T<25&&(_===0||_>2)&&!this._hasAncestorTag(i,"figure")||!o&&c<25&&L>.2||c>=25&&L>.5||x===1&&T<75||x>1;return N}return!1})},_cleanMatchedNodes:function(t,e){for(var i=this._getNextNode(t,!0),n=this._getNextNode(t);n&&n!=i;)e.call(this,n,n.className+" "+n.id)?n=this._removeAndGetNext(n):n=this._getNextNode(n)},_cleanHeaders:function(t){let e=this._getAllNodesWithTag(t,["h1","h2"]);this._removeNodes(e,function(i){let n=this._getClassWeight(i)<0;return n&&this.log("Removing header with low class weight:",i),n})},_headerDuplicatesTitle:function(t){if(t.tagName!="H1"&&t.tagName!="H2")return!1;var e=this._getInnerText(t,!1);return this.log("Evaluating similarity of header:",e,this._articleTitle),this._textSimilarity(this._articleTitle,e)>.75},_flagIsActive:function(t){return(this._flags&t)>0},_removeFlag:function(t){this._flags=this._flags&~t},_isProbablyVisible:function(t){return(!t.style||t.style.display!="none")&&!t.hasAttribute("hidden")&&(!t.hasAttribute("aria-hidden")||t.getAttribute("aria-hidden")!="true"||t.className&&t.className.indexOf&&t.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var t=this._doc.getElementsByTagName("*").length;if(t>this._maxElemsToParse)throw new Error("Aborting parsing document; "+t+" elements found")}this._unwrapNoscriptImages(this._doc);var e=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var i=this._getArticleMetadata(e);this._articleTitle=i.title;var n=this._grabArticle();if(!n)return null;if(this.log("Grabbed: "+n.innerHTML),this._postProcessContent(n),!i.excerpt){var o=n.getElementsByTagName("p");o.length>0&&(i.excerpt=o[0].textContent.trim())}var r=n.textContent;return{title:this._articleTitle,byline:i.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(n),textContent:r,length:r.length,excerpt:i.excerpt,siteName:i.siteName||this._articleSiteName}}};typeof _t=="object"&&(_t.exports=Kt)});var ii=Ke((Dr,vt)=>{var ti={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function an(t){return(!t.style||t.style.display!="none")&&!t.hasAttribute("hidden")&&(!t.hasAttribute("aria-hidden")||t.getAttribute("aria-hidden")!="true"||t.className&&t.className.indexOf&&t.className.indexOf("fallback-image")!==-1)}function ln(t,e={}){typeof e=="function"&&(e={visibilityChecker:e});var i={minScore:20,minContentLength:140,visibilityChecker:an};e=Object.assign(i,e);var n=t.querySelectorAll("p, pre, article"),o=t.querySelectorAll("div > br");if(o.length){var r=new Set(n);[].forEach.call(o,function(c){r.add(c.parentNode)}),n=Array.from(r)}var a=0;return[].some.call(n,function(c){if(!e.visibilityChecker(c))return!1;var f=c.className+" "+c.id;if(ti.unlikelyCandidates.test(f)&&!ti.okMaybeItsACandidate.test(f)||c.matches("li p"))return!1;var d=c.textContent.trim().length;return d<e.minContentLength?!1:(a+=Math.sqrt(d-e.minContentLength),a>e.minScore)})}typeof vt=="object"&&(vt.exports=ln)});var ri=Ke((Ir,ni)=>{var cn=ei(),hn=ii();ni.exports={Readability:cn,isProbablyReaderable:hn}});var te={name:"__MSG_@appName__",description:"__MSG_@appDesc__",short_name:"__MSG_@appShortName_",homepage_url:"https://betterpreviews.com/",__package_name__:"search-preview","__comment:version__":"Firefox does not support leading zeros in versions",version:"24.04.12",__sentry_dsn__:"https://bf0a1e40a1784502aad701a201efdf08@o526305.ingest.sentry.io/4504743520436224",__measurement_id__:"G-XN737SN9S2",__ga_api_secret__:"zigXBV_3TjyIjkXuSPjo8w",manifest_version:3,default_locale:"en",author:"Justice Ogbonna",permissions:["storage","declarativeNetRequest","contextMenus","cookies","activeTab"],declarative_net_request:{rule_resources:[{id:"ruleset_1",enabled:!0,path:"assets/rules.json"}]},host_permissions:["*://*/*"],action:{default_icon:{"16":"assets/logo-16x16.png","24":"assets/logo-24x24.png","32":"assets/logo-32x32.png"},default_title:"Search Preview"},icons:{"16":"assets/logo-16x16.png","32":"assets/logo-32x32.png","48":"assets/logo-48x48.png","128":"assets/logo-128x128.png"},content_scripts:[{matches:["http://*/*","https://*/*"],all_frames:!0,js:["content-script/content-script.js"],css:["content-script/content-script.css"]}],background:{__chrome__service_worker:"background-script/service-worker.js",__firefox__scripts:["background-script/service-worker.js"]},side_panel:{default_path:"sidepanel/side-panel.html"},options_page:"options-page/options.html",web_accessible_resources:[{resources:["assets/logo-24x24.png"],matches:["<all_urls>"]},{resources:["options-page/options.html"],matches:["<all_urls>"]},{resources:["welcome/my-element.js"],matches:["<all_urls>"]},{resources:["content-script/floatie/tooltip.js"],matches:["<all_urls>"]}],__firefox__key:"",__firefox__browser_specific_settings:{gecko:{id:"search-preview@essentialkit.org"}}};async function Wt(){let{sessionData:t}=await chrome.storage.session.get("sessionData"),e=Date.now();return t&&t.timestamp&&((e-t.timestamp)/6e4>30?t=null:(t.timestamp=e,await chrome.storage.session.set({sessionData:t}))),t||(t={session_id:e.toString(),timestamp:e.toString()},await chrome.storage.session.set({sessionData:t})),t.session_id}var Fi="https://www.google-analytics.com/mp/collect",Ui="https://www.google-analytics.com/debug/mp/collect",Gi=te.__measurement_id__,Wi=te.__ga_api_secret__,Yi=100,gt=class{constructor(){this.debug=IS_DEV_BUILD}async getOrCreateClientId(){let{clientId:e}=await chrome.storage.local.get("clientId");return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:e})),e}async getSessionId(){try{return Wt()}catch{return new Promise(i=>{chrome.runtime.sendMessage("get_or_create_session_id",n=>{i(n)})})}}async fireEvent(e,i={}){i.session_id||(i.session_id=await this.getSessionId()),i.engagement_time_msec||(i.engagement_time_msec=Yi);try{let n=await fetch(`${this.debug?Ui:Fi}?measurement_id=${Gi}&api_secret=${Wi}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e,params:i}]})});if(!this.debug)return;console.log(await n.text())}catch(n){console.error("Google Analytics request failed with an exception",n)}}async firePageViewEvent(e,i,n={}){return this.fireEvent("page_view",{page_title:e,page_location:i,...n})}async fireErrorEvent(e,i={}){return this.fireEvent("extension_error",{...e,...i})}},Fe=new gt;var Xi=te.__package_name__,oe=class{constructor(e){this.tag="";this.debug=(...e)=>this.internalLog(3,...e);this.log=(...e)=>this.internalLog(2,...e);this.warn=(...e)=>this.internalLog(1,...e);this.error=(...e)=>this.internalLog(0,...e);this.tag=Xi+"."+(typeof e=="string"?e:e.constructor.name),this.listenForBgLogs()}listenForBgLogs(){chrome?.runtime.onMessage.addListener((e,i)=>{i.id!==chrome.runtime.id||e.action!="log"||this.internalLogTagOverride(e.data.level,e.data.tag,...e.data.messages)})}internalLog(e,...i){this.internalLogTagOverride(e,this.tag,...i)}internalLogTagOverride(e,i,...n){let o=new Date(Date.now()),r=["%c%s %s","color: blue",`[${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}]`,i,...n];if(IS_DEV_BUILD)switch(e){case 3:console.debug(...r);break;case 1:console.warn(...r);break;case 2:console.log(...r);break;case 0:console.error(...r);break}else{switch(e){case 0:Fe.fireErrorEvent(n[0],{...n});break}return}}};var Yt=document.createElement("div");Yt.innerHTML='<div class=wb-header><div class=wb-control><span title="Minimize" class=wb-min></span><span title="Maximize" class=wb-max></span><span title="Fullscreen" class=wb-full></span><span title="Close" class=wb-close></span></div><div class=wb-drag><div class=wb-icon></div><div class=wb-title></div></div></div><div class=wb-body></div><div class=wb-footer><feedback-form size="inline"></feedback-form></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>';function Xt(t){return(t||Yt).cloneNode(!0)}var Vt=`
  .winbox {
    position: fixed;
    left: 0;
    top: 0;
    background: #0050ff;
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
    /* using transform make contents blur when applied and requires more gpu memory */
    transition: width 0.3s, height 0.3s, left 0.3s, top 0.3s;
    transition-timing-function: cubic-bezier(0.3, 1, 0.3, 1);
    /* contain "strict" does not make overflow contents selectable */
    contain: layout size;
    /* explicitly set text align to left fixes an issue with iframes alignment when centered */
    text-align: left;
    /* workaround for using passive listeners */
    touch-action: none;
  }
  .wb-header {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 35px;
    line-height: 35px;
    color: #fff;
    overflow: hidden;
    z-index: 1;
  }
  .wb-body {
    position: absolute;
    top: 35px;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
    will-change: contents;
    background: #fff;
    /* when no border is set there is some thin line visible */
    /* always hide top border visually */
    margin-top: 0 !important;
    contain: strict;
    z-index: 0;
  }
  .wb-footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    display: none;
  }
  .winbox.show-footer .wb-body {
    bottom: 35px; /* height of footer */
  }
  .winbox.show-footer .wb-footer {
    display: block;
  }
  body > .wb-body {
    position: relative;
    display: inline-block;
    visibility: hidden;
    contain: none;
  }
  .wb-drag {
    height: 100%;
    padding-left: 10px;
    cursor: move;
  }
  .wb-title {
    font-family: Arial, sans-serif;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .wb-icon {
    display: none;
    width: 20px;
    height: 100%;
    margin: -1px 8px 0 -3px;
    float: left;
    background-repeat: no-repeat;
    background-size: 100%;
    background-position: center;
  }
  .wb-n {
    position: absolute;
    top: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-e {
    position: absolute;
    top: 0;
    right: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-s {
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 10px;
    cursor: n-resize;
    z-index: 2;
  }
  .wb-w {
    position: absolute;
    top: 0;
    left: -5px;
    bottom: 0;
    width: 10px;
    cursor: w-resize;
    z-index: 2;
  }
  .wb-nw {
    position: absolute;
    top: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-ne {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-sw {
    position: absolute;
    bottom: -5px;
    left: -5px;
    width: 15px;
    height: 15px;
    cursor: ne-resize;
    z-index: 2;
  }
  .wb-se {
    position: absolute;
    bottom: -5px;
    right: -5px;
    width: 15px;
    height: 15px;
    cursor: nw-resize;
    z-index: 2;
  }
  .wb-control {
    float: right;
    height: 100%;
    max-width: 100%;
    text-align: center;
  }
  .wb-control * {
    display: inline-block;
    width: 30px;
    height: 100%;
    max-width: 100%;
    background-position: center;
    background-repeat: no-repeat;
    cursor: pointer;
  }
  .wb-min {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);
    background-size: 14px auto;
    background-position: center calc(50% + 6px);
  }
  .wb-max {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);
    background-size: 17px auto;
  }
  .wb-close {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);
    background-size: 15px auto;
    background-position: 5px center;
  }
  .wb-full {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);
    background-size: 16px auto;
  }
  .wb-nav-away {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik0yMTIuMzA5LTE0MC4wMDFxLTMwLjMwOCAwLTUxLjMwOC0yMXQtMjEtNTEuMzA4di01MzUuMzgycTAtMzAuMzA4IDIxLTUxLjMwOHQ1MS4zMDgtMjFoMjUyLjMwNVYtNzYwSDIxMi4zMDlxLTQuNjE2IDAtOC40NjMgMy44NDYtMy44NDYgMy44NDctMy44NDYgOC40NjN2NTM1LjM4MnEwIDQuNjE2IDMuODQ2IDguNDYzIDMuODQ3IDMuODQ2IDguNDYzIDMuODQ2aDUzNS4zODJxNC42MTYgMCA4LjQ2My0zLjg0NiAzLjg0Ni0zLjg0NyAzLjg0Ni04LjQ2M3YtMjUyLjMwNWg1OS45OTl2MjUyLjMwNXEwIDMwLjMwOC0yMSA1MS4zMDh0LTUxLjMwOCAyMUgyMTIuMzA5Wm0xNzYuNDYtMjA2LjYxNS00Mi4xNTMtNDIuMTUzTDcxNy44NDctNzYwSDU2MHYtNTkuOTk5aDI1OS45OTlWLTU2MEg3NjB2LTE1Ny44NDdMMzg4Ljc2OS0zNDYuNjE2WiIvPjwvc3ZnPg==);
    
    background-size: 20px auto;
    filter: invert(1);
  }
  .wb-settings {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iMjQiPjxwYXRoIGQ9Ik00NTAuMDAxLTEzMC4wMDF2LTIxOS45OThoNTkuOTk4djgwaDMyMHY1OS45OThoLTMyMHY4MGgtNTkuOTk4Wm0tMzIwLTgwdi01OS45OThoMjE5Ljk5OHY1OS45OThIMTMwLjAwMVptMTYwLTE2MHYtODBoLTE2MHYtNTkuOTk4aDE2MHYtODBoNTkuOTk4djIxOS45OThoLTU5Ljk5OFptMTYwLTgwdi01OS45OThoMzc5Ljk5OHY1OS45OThINDUwLjAwMVptMTYwLTE2MHYtMjE5Ljk5OGg1OS45OTh2ODBoMTYwdjU5Ljk5OGgtMTYwdjgwaC01OS45OThabS00ODAtODB2LTU5Ljk5OGgzNzkuOTk4djU5Ljk5OEgxMzAuMDAxWiIvPjwvc3ZnPg==);
  
    background-size: 20px auto;
    filter: invert(1);
  }
  /*
  .winbox:not(.max) .wb-max {
    background-image: url(@restore);
    background-size: 20px auto;
    background-position: center bottom 5px;
  }
  */
  /*
  .winbox:fullscreen{
    transition: none !important;
  }
  .winbox:fullscreen .wb-full{
    background-image: url(@minimize);
  }
  .winbox:fullscreen > div,
  .winbox:fullscreen .wb-title,
  */
  .winbox.modal .wb-body ~ div,
  .winbox.modal .wb-drag,
  .winbox.min .wb-body ~ div,
  .winbox.max .wb-body ~ div {
    pointer-events: none;
  }
  .winbox.max .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-full,
  .winbox.min .wb-min {
    display: none;
  }
  .winbox.min .wb-drag {
    cursor: default;
  }
  .winbox.min .wb-body > * {
    display: none;
  }
  .winbox.hide {
    display: none;
  }
  .winbox.max {
    box-shadow: none;
  }
  .winbox.max .wb-body {
    margin: 0 !important;
  }
  .winbox iframe {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 0;
  }
  body.wb-lock .winbox {
    will-change: left, top, width, height;
    transition: none;
  }
  body.wb-lock iframe {
    pointer-events: none;
  }
  .winbox.modal:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    border-radius: inherit;
  }
  .winbox.modal:after {
    content: '';
    position: absolute;
    top: -50vh;
    left: -50vw;
    right: -50vw;
    bottom: -50vh;
    background: #0d1117;
    animation: wb-fade-in 0.2s ease-out forwards;
    z-index: -1;
  }
  .winbox.modal .wb-min,
  .winbox.modal .wb-max,
  .winbox.modal .wb-full {
    display: none;
  }
  @keyframes wb-fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 0.85;
    }
  }
  .no-animation {
    transition: none;
  }
  .no-shadow {
    box-shadow: none;
  }
  .no-header .wb-header {
    display: none;
  }
  .no-header .wb-body {
    top: 0;
  }
  .no-min .wb-min {
    display: none;
  }
  .no-max .wb-max {
    display: none;
  }
  .no-full .wb-full {
    display: none;
  }
  .no-close .wb-close {
    display: none;
  }
  .no-resize .wb-body ~ div {
    display: none;
  }
  .no-move:not(.min) .wb-title {
    pointer-events: none;
  }
  .wb-body .wb-hide {
    display: none;
  }
  .wb-show {
    display: none;
  }
  .wb-body .wb-show {
    display: revert;
  }
`;function le(t,e,i,n){t&&t.addEventListener(e,i,n||!1)}function Ue(t,e,i,n){t&&t.removeEventListener(e,i,n||!1)}function ze(t,e){t.stopPropagation(),t.cancelable&&t.preventDefault()}function ue(t,e){return t.getElementsByClassName(e)[0]}function mt(t,e){t.classList.add(e)}function qt(t,e){return t.classList.contains(e)}function pt(t,e){t.classList.remove(e)}function ie(t,e,i){i=""+i,t["_s_"+e]!==i&&(t.style.setProperty(e,i),t["_s_"+e]=i)}function Zt(t,e){let i=t.firstChild;i?i.nodeValue=e:t.textContent=e}var et=!1,Be=[],Ge={capture:!0,passive:!0},me,Vi=0,We=10,je,De,Ee,Qt,Ne,Ae,Te=class{constructor(e,i){if(!(this instanceof Te))return new Te(e);me||qi();let n,o,r,a,c,f,d,_,p,b,A,x,S,E,M,L,T,N,D,C,P,B,H,O,G,X,ce,Q,R,J,ne,Z,K,j,z,fe,ve,be,ge,se,Se,pe,Me,he,W,F,ee;if(e&&(i&&(c=e,e=i),typeof e=="string"?c=e:(n=e.id,o=e.index,r=e.root,a=e.template,c=c||e.title,f=e.icon,d=e.mount,_=e.html,p=e.url,b=e.shadowel,x=e.framename,S=e.cssurl,E=e.width,M=e.height,L=e.minwidth,T=e.minheight,N=e.maxwidth,D=e.maxheight,C=e.autosize,ce=e.min,Q=e.max,R=e.hidden,J=e.modal,P=e.x||(J?"center":0),B=e.y||(J?"center":0),H=e.top,O=e.left,G=e.bottom,X=e.right,ne=e.background,Z=e.border,K=e.header,j=e.class,fe=e.onclose,ve=e.onfocus,be=e.onblur,ge=e.onmove,se=e.onresize,Se=e.onfullscreen,pe=e.onmaximize,Me=e.onminimize,he=e.onrestore,W=e.onhide,F=e.onshow,ee=e.onload)),this.dom=Xt(a),this.dom.id=this.id=n||"winbox-"+ ++Vi,this.dom.className="winbox"+(j?" "+(typeof j=="string"?j:j.join(" ")):"")+(J?" modal":""),this.dom.winbox=this,this.window=this.dom,this.body=ue(this.dom,"wb-body"),this.header=K||35,(o||o===0)&&(We=o),ne&&this.setBackground(ne),Z?ie(this.body,"margin",Z+(isNaN(Z)?"":"px")):Z=0,K){let Y=ue(this.dom,"wb-header");ie(Y,"height",K+"px"),ie(Y,"line-height",K+"px"),ie(this.body,"top",K+"px")}c&&this.setTitle(c),f&&this.setIcon(f),d?this.mount(d):_?this.body.innerHTML=_:p&&this.setUrl(p,ee),H=H?$(H,Ae):0,G=G?$(G,Ae):0,O=O?$(O,Ne):0,X=X?$(X,Ne):0;let ae=Ne-O-X,re=Ae-H-G;if(N=N?$(N,ae):ae,D=D?$(D,re):re,L=L?$(L,N):150,T=T?$(T,D):this.header,C?((r||me).appendChild(this.body),E=Math.max(Math.min(this.body.clientWidth+Z*2+1,N),L),M=Math.max(Math.min(this.body.clientHeight+this.header+Z+1,D),T),this.dom.appendChild(this.body)):(E=E?$(E,N):Math.max(N/2,L)|0,M=M?$(M,D):Math.max(D/2,T)|0),P=P?$(P,ae,E):O,B=B?$(B,re,M):H,this.x=P,this.y=B,this.width=E,this.height=M,this.minwidth=L,this.minheight=T,this.maxwidth=N,this.maxheight=D,this.top=H,this.right=X,this.bottom=G,this.left=O,this.index=o,this.min=!1,this.max=!1,this.full=!1,this.hidden=!1,this.focused=!1,this.onclose=fe,this.onfocus=ve,this.onblur=be,this.onmove=ge,this.onresize=se,this.onfullscreen=Se,this.onmaximize=pe,this.onminimize=Me,this.onrestore=he,this.onhide=W,this.onshow=F,Q?this.maximize():ce?this.minimize():this.resize().move(),R?this.hide():(this.focus(),(o||o===0)&&(this.index=o,o>We&&(We=o))),ie(this.shadowdom?this.shadowdom:this.dom,"z-index",o),Zi(this),b){let Y=document.createElement(b);Y.style.position="absolute";let ye=document.createElement("style");if(ye.textContent=Vt,Y.appendChild(ye),S){let Ce=document.createElement("link");Ce.rel="stylesheet",Ce.type="text/css",Ce.href=S,Ce.itemprop="url",Y.appendChild(Ce)}Y.appendChild(this.dom),Y.attachShadow({mode:"open"}).innerHTML="<slot></slot>",this.shadowdom=Y,(r||me).appendChild(Y)}else(r||me).appendChild(this.dom);(z=e.oncreate)&&z.call(this,e)}static new(e){return new Te(e)}mount(e){return this.unmount(),e._backstore||(e._backstore=e.parentNode),this.body.textContent="",this.body.appendChild(e),this}unmount(e){let i=this.body.firstChild;if(i){let n=e||i._backstore;n&&n.appendChild(i),i._backstore=e}return this}setTitle(e){let i=ue(this.dom,"wb-title");return Zt(i,this.title=e),this}setIcon(e){let i=ue(this.dom,"wb-icon");return ie(i,"background-image","url("+e+")"),ie(i,"display","inline-block"),this}setBackground(e){return ie(this.dom,"background",e),this}setUrl(e,i){let n=this.body.firstChild;if(n&&n.tagName.toLowerCase()==="iframe")n.src=e;else{let o=this.framename??"";this.body.innerHTML=`<iframe name="${o}" src="${e}"></iframe>`,i&&(this.body.firstChild.onload=i)}return this}focus(e){return e===!1?this.blur():(De!==this&&this.dom&&(De&&De.blur(),ie(this.shadowdom?this.shadowdom:this.dom,"z-index",++We),this.index=We,this.addClass("focus"),De=this,this.focused=!0,this.onfocus&&this.onfocus()),this)}blur(e){return e===!1?this.focus():(De===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),De=null),this)}hide(e){if(e===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")}show(e){if(e===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")}minimize(e){return e===!1?this.restore():(je&&it(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(Be.push(this),wt(),this.dom.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize()),this)}restore(){return je&&it(),this.min&&(tt(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this}maximize(e){return e===!1?this.restore():(je&&it(),this.min&&tt(this),this.max||(this.addClass("max").resize(Ne-this.left-this.right,Ae-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)}fullscreen(e){if(this.min&&(tt(this),this.resize().move()),!je||!it())this.body[Ee](),je=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(e===!1)return this.restore();return this}close(e){if(this.onclose&&this.onclose(e))return!0;this.min&&tt(this),this.unmount(),this.dom.remove(),this.dom.textContent="",this.dom.winbox=null,this.body=null,this.dom=null,De===this&&(De=null)}move(e,i,n){return!e&&e!==0?(e=this.x,i=this.y):n||(this.x=e?e=$(e,Ne-this.left-this.right,this.width):0,this.y=i?i=$(i,Ae-this.top-this.bottom,this.height):0),ie(this.dom,"left",e+"px"),ie(this.dom,"top",i+"px"),this.onmove&&this.onmove(e,i),this}resize(e,i,n){return!e&&e!==0?(e=this.width,i=this.height):n||(this.width=e?e=$(e,this.maxwidth):0,this.height=i?i=$(i,this.maxheight):0,e=Math.max(e,this.minwidth),i=Math.max(i,this.minheight)),ie(this.dom,"width",e+"px"),ie(this.dom,"height",i+"px"),this.onresize&&this.onresize(e,i),this}addControl(e){let i=e.class,n=e.image,o=e.click,r=e.index,a=e.title,c=document.createElement("span"),f=ue(this.dom,"wb-control"),d=this;return i&&(c.className=i),n&&ie(c,"background-image","url("+n+")"),o&&(c.onclick=function(_){o.call(this,_,d)}),a&&(c.title=a),f.insertBefore(c,f.childNodes[r||0]),this}removeControl(e){return e=ue(this.dom,e),e&&e.remove(),this}addClass(e){return mt(this.dom,e),this}removeClass(e){return pt(this.dom,e),this}hasClass(e){return qt(this.dom,e)}toggleClass(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}};function $(t,e,i){if(typeof t=="string")if(t==="center")t=(e-i)/2|0;else if(t==="right"||t==="bottom")t=e-i;else{let n=parseFloat(t);(""+n!==t&&t.substring((""+n).length))==="%"?t=e/100*n|0:t=n}return t}function qi(){me=document.body,me[Ee="requestFullscreen"]||me[Ee="msRequestFullscreen"]||me[Ee="webkitRequestFullscreen"]||me[Ee="mozRequestFullscreen"]||(Ee=""),Qt=Ee&&Ee.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),le(window,"resize",function(){$t(),wt()}),$t()}function Zi(t){xe(t,"drag"),xe(t,"n"),xe(t,"s"),xe(t,"w"),xe(t,"e"),xe(t,"nw"),xe(t,"ne"),xe(t,"se"),xe(t,"sw"),le(ue(t.dom,"wb-min"),"click",function(e){ze(e),t.min?t.focus().restore():t.blur().minimize()}),le(ue(t.dom,"wb-max"),"click",function(e){t.max?t.restore():t.maximize()}),Ee?le(ue(t.dom,"wb-full"),"click",function(e){t.fullscreen()}):t.addClass("no-full"),le(ue(t.dom,"wb-close"),"click",function(e){ze(e),t.close()||(t=null)}),le(t.dom,"click",function(e){t.focus()})}function tt(t){Be.splice(Be.indexOf(t),1),wt(),t.removeClass("min"),t.min=!1,t.dom.title=""}function wt(){let t=Be.length,e={},i={};for(let n=0,o,r;n<t;n++)o=Be[n],r=(o.left||o.right)+":"+(o.top||o.bottom),i[r]?i[r]++:(e[r]=0,i[r]=1);for(let n=0,o,r,a;n<t;n++)o=Be[n],r=(o.left||o.right)+":"+(o.top||o.bottom),a=Math.min((Ne-o.left-o.right)/i[r],250),o.resize(a+1|0,o.header,!0).move(o.left+e[r]*a|0,Ae-o.bottom-o.header,!0),e[r]++}function xe(t,e){let i=ue(t.dom,"wb-"+e);if(!i)return;let n,o,r,a,c,f,d=0;le(i,"mousedown",p),le(i,"touchstart",p,Ge);function _(){a=requestAnimationFrame(_),f&&(t.resize(),f=!1),c&&(t.move(),c=!1)}function p(x){if(ze(x),t.focus(),e==="drag"){if(t.min){t.restore();return}let S=Date.now(),E=S-d;if(d=S,E<300&&!t.dom.classList.contains("no-max")){t.max?t.restore():t.maximize();return}}!t.max&&!t.min&&(mt(me,"wb-lock"),et&&_(),(n=x.touches)&&(n=n[0])?(x=n,le(window,"touchmove",b,Ge),le(window,"touchend",A,Ge)):(le(window,"mousemove",b),le(window,"mouseup",A)),o=x.pageX,r=x.pageY)}function b(x){ze(x),n&&(x=x.touches[0]);let S=x.pageX,E=x.pageY,M=S-o,L=E-r,T=t.width,N=t.height,D=t.x,C=t.y,P,B,H,O;e==="drag"?(t.x+=M,t.y+=L,H=O=1):(e==="e"||e==="se"||e==="ne"?(t.width+=M,P=1):(e==="w"||e==="sw"||e==="nw")&&(t.x+=M,t.width-=M,P=1,H=1),e==="s"||e==="se"||e==="sw"?(t.height+=L,B=1):(e==="n"||e==="ne"||e==="nw")&&(t.y+=L,t.height-=L,B=1,O=1)),P&&(t.width=Math.max(Math.min(t.width,t.maxwidth,Ne-t.x-t.right),t.minwidth),P=t.width!==T),B&&(t.height=Math.max(Math.min(t.height,t.maxheight,Ae-t.y-t.bottom),t.minheight),B=t.height!==N),(P||B)&&(et?f=!0:t.resize()),H&&(t.x=Math.max(Math.min(t.x,Ne-t.width-t.right),t.left),H=t.x!==D),O&&(t.y=Math.max(Math.min(t.y,Ae-t.height-t.bottom),t.top),O=t.y!==C),(H||O)&&(et?c=!0:t.move()),(P||H)&&(o=S),(B||O)&&(r=E)}function A(x){ze(x),pt(me,"wb-lock"),et&&cancelAnimationFrame(a),n?(Ue(window,"touchmove",b,Ge),Ue(window,"touchend",A,Ge)):(Ue(window,"mousemove",b),Ue(window,"mouseup",A))}}function $t(){let t=document.documentElement;Ne=t.clientWidth,Ae=t.clientHeight}function $i(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function it(){if(je.full=!1,$i())return document[Qt](),!0}var ai=Gt(Jt(),1),li=Gt(ri(),1);(function(){"use strict";var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,i=window.Document.prototype.importNode,n=window.Document.prototype.prepend,o=window.Document.prototype.append,r=window.DocumentFragment.prototype.prepend,a=window.DocumentFragment.prototype.append,c=window.Node.prototype.cloneNode,f=window.Node.prototype.appendChild,d=window.Node.prototype.insertBefore,_=window.Node.prototype.removeChild,p=window.Node.prototype.replaceChild,b=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),A=window.Element.prototype.attachShadow,x=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),S=window.Element.prototype.getAttribute,E=window.Element.prototype.setAttribute,M=window.Element.prototype.removeAttribute,L=window.Element.prototype.toggleAttribute,T=window.Element.prototype.getAttributeNS,N=window.Element.prototype.setAttributeNS,D=window.Element.prototype.removeAttributeNS,C=window.Element.prototype.insertAdjacentElement,P=window.Element.prototype.insertAdjacentHTML,B=window.Element.prototype.prepend,H=window.Element.prototype.append,O=window.Element.prototype.before,G=window.Element.prototype.after,X=window.Element.prototype.replaceWith,ce=window.Element.prototype.remove,Q=window.HTMLElement,R=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),J=window.HTMLElement.prototype.insertAdjacentElement,ne=window.HTMLElement.prototype.insertAdjacentHTML,Z=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(s){return Z.add(s)});function K(s){var l=Z.has(s);return s=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(s),!l&&s}var j=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function z(s){var l=s.isConnected;if(l!==void 0)return l;if(j(s))return!0;for(;s&&!(s.__CE_isImportDocument||s instanceof Document);)s=s.parentNode||(window.ShadowRoot&&s instanceof ShadowRoot?s.host:void 0);return!(!s||!(s.__CE_isImportDocument||s instanceof Document))}function fe(s){var l=s.children;if(l)return Array.prototype.slice.call(l);for(l=[],s=s.firstChild;s;s=s.nextSibling)s.nodeType===Node.ELEMENT_NODE&&l.push(s);return l}function ve(s,l){for(;l&&l!==s&&!l.nextSibling;)l=l.parentNode;return l&&l!==s?l.nextSibling:null}function be(s,l,u){for(var m=s;m;){if(m.nodeType===Node.ELEMENT_NODE){var h=m;l(h);var g=h.localName;if(g==="link"&&h.getAttribute("rel")==="import"){if(m=h.import,u===void 0&&(u=new Set),m instanceof Node&&!u.has(m))for(u.add(m),m=m.firstChild;m;m=m.nextSibling)be(m,l,u);m=ve(s,h);continue}else if(g==="template"){m=ve(s,h);continue}if(h=h.__CE_shadowRoot)for(h=h.firstChild;h;h=h.nextSibling)be(h,l,u)}m=m.firstChild?m.firstChild:ve(s,m)}}function ge(){var s=!(we==null||!we.noDocumentConstructionObserver),l=!(we==null||!we.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=l,this.I=!s}function se(s,l,u,m){var h=window.ShadyDOM;if(s.shadyDomFastWalk&&h&&h.inUse){if(l.nodeType===Node.ELEMENT_NODE&&u(l),l.querySelectorAll)for(s=h.nativeMethods.querySelectorAll.call(l,"*"),l=0;l<s.length;l++)u(s[l])}else be(l,u,m)}function Se(s,l){s.j=!0,s.m.push(l)}function pe(s,l){s.j=!0,s.g.push(l)}function Me(s,l){s.j&&se(s,l,function(u){return he(s,u)})}function he(s,l){if(s.j&&!l.__CE_patched){l.__CE_patched=!0;for(var u=0;u<s.m.length;u++)s.m[u](l);for(u=0;u<s.g.length;u++)s.g[u](l)}}function W(s,l){var u=[];for(se(s,l,function(h){return u.push(h)}),l=0;l<u.length;l++){var m=u[l];m.__CE_state===1?s.connectedCallback(m):ae(s,m)}}function F(s,l){var u=[];for(se(s,l,function(h){return u.push(h)}),l=0;l<u.length;l++){var m=u[l];m.__CE_state===1&&s.disconnectedCallback(m)}}function ee(s,l,u){u=u===void 0?{}:u;var m=u.J,h=u.upgrade||function(w){return ae(s,w)},g=[];for(se(s,l,function(w){if(s.j&&he(s,w),w.localName==="link"&&w.getAttribute("rel")==="import"){var v=w.import;v instanceof Node&&(v.__CE_isImportDocument=!0,v.__CE_registry=document.__CE_registry),v&&v.readyState==="complete"?v.__CE_documentLoadHandled=!0:w.addEventListener("load",function(){var y=w.import;if(!y.__CE_documentLoadHandled){y.__CE_documentLoadHandled=!0;var I=new Set;m&&(m.forEach(function(U){return I.add(U)}),I.delete(y)),ee(s,y,{J:I,upgrade:h})}})}else g.push(w)},m),l=0;l<g.length;l++)h(g[l])}function ae(s,l){try{var u=l.ownerDocument,m=u.__CE_registry,h=m&&(u.defaultView||u.__CE_isImportDocument)?Je(m,l.localName):void 0;if(h&&l.__CE_state===void 0){h.constructionStack.push(l);try{try{if(new h.constructorFunction!==l)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{h.constructionStack.pop()}}catch(y){throw l.__CE_state=2,y}if(l.__CE_state=1,l.__CE_definition=h,h.attributeChangedCallback&&l.hasAttributes()){var g=h.observedAttributes;for(h=0;h<g.length;h++){var w=g[h],v=l.getAttribute(w);v!==null&&s.attributeChangedCallback(l,w,null,v,null)}}z(l)&&s.connectedCallback(l)}}catch(y){Y(y)}}ge.prototype.connectedCallback=function(s){var l=s.__CE_definition;if(l.connectedCallback)try{l.connectedCallback.call(s)}catch(u){Y(u)}},ge.prototype.disconnectedCallback=function(s){var l=s.__CE_definition;if(l.disconnectedCallback)try{l.disconnectedCallback.call(s)}catch(u){Y(u)}},ge.prototype.attributeChangedCallback=function(s,l,u,m,h){var g=s.__CE_definition;if(g.attributeChangedCallback&&-1<g.observedAttributes.indexOf(l))try{g.attributeChangedCallback.call(s,l,u,m,h)}catch(w){Y(w)}};function re(s,l,u,m){var h=l.__CE_registry;if(h&&(m===null||m==="http://www.w3.org/1999/xhtml")&&(h=Je(h,u)))try{var g=new h.constructorFunction;if(g.__CE_state===void 0||g.__CE_definition===void 0)throw Error("Failed to construct '"+u+"': The returned value was not constructed with the HTMLElement constructor.");if(g.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+u+"': The constructed element's namespace must be the HTML namespace.");if(g.hasAttributes())throw Error("Failed to construct '"+u+"': The constructed element must not have any attributes.");if(g.firstChild!==null)throw Error("Failed to construct '"+u+"': The constructed element must not have any children.");if(g.parentNode!==null)throw Error("Failed to construct '"+u+"': The constructed element must not have a parent node.");if(g.ownerDocument!==l)throw Error("Failed to construct '"+u+"': The constructed element's owner document is incorrect.");if(g.localName!==u)throw Error("Failed to construct '"+u+"': The constructed element's local name is incorrect.");return g}catch(w){return Y(w),l=m===null?t.call(l,u):e.call(l,m,u),Object.setPrototypeOf(l,HTMLUnknownElement.prototype),l.__CE_state=2,l.__CE_definition=void 0,he(s,l),l}return l=m===null?t.call(l,u):e.call(l,m,u),he(s,l),l}function Y(s){var l="",u="",m=0,h=0;s instanceof Error?(l=s.message,u=s.sourceURL||s.fileName||"",m=s.line||s.lineNumber||0,h=s.column||s.columnNumber||0):l="Uncaught "+String(s);var g=void 0;ErrorEvent.prototype.initErrorEvent===void 0?g=new ErrorEvent("error",{cancelable:!0,message:l,filename:u,lineno:m,colno:h,error:s}):(g=document.createEvent("ErrorEvent"),g.initErrorEvent("error",!1,!0,l,u,m),g.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),g.error===void 0&&Object.defineProperty(g,"error",{configurable:!0,enumerable:!0,get:function(){return s}}),window.dispatchEvent(g),g.defaultPrevented||console.error(s)}function ye(){var s=this;this.g=void 0,this.F=new Promise(function(l){s.l=l})}ye.prototype.resolve=function(s){if(this.g)throw Error("Already resolved.");this.g=s,this.l(s)};function Ce(s){var l=document;this.l=void 0,this.h=s,this.g=l,ee(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function zt(s){s.l&&s.l.disconnect()}Ce.prototype.G=function(s){var l=this.g.readyState;for(l!=="interactive"&&l!=="complete"||zt(this),l=0;l<s.length;l++)for(var u=s[l].addedNodes,m=0;m<u.length;m++)ee(this.h,u[m])};function V(s){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(l){return l()},this.i=!1,this.v=[],this.h=s,this.D=s.I?new Ce(s):void 0}V.prototype.H=function(s,l){var u=this;if(!(l instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");jt(this,s),this.s.set(s,l),this.v.push(s),this.i||(this.i=!0,this.o(function(){return Ht(u)}))},V.prototype.define=function(s,l){var u=this;if(!(l instanceof Function))throw new TypeError("Custom element constructors must be functions.");jt(this,s),Bt(this,s,l),this.v.push(s),this.i||(this.i=!0,this.o(function(){return Ht(u)}))};function jt(s,l){if(!K(l))throw new SyntaxError("The element name '"+l+"' is not valid.");if(Je(s,l))throw Error("A custom element with name '"+(l+"' has already been defined."));if(s.A)throw Error("A custom element is already being defined.")}function Bt(s,l,u){s.A=!0;var m;try{var h=u.prototype;if(!(h instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var g=function(U){var Pe=h[U];if(Pe!==void 0&&!(Pe instanceof Function))throw Error("The '"+U+"' callback must be a function.");return Pe},w=g("connectedCallback"),v=g("disconnectedCallback"),y=g("adoptedCallback"),I=(m=g("attributeChangedCallback"))&&u.observedAttributes||[]}catch(U){throw U}finally{s.A=!1}return u={localName:l,constructorFunction:u,connectedCallback:w,disconnectedCallback:v,adoptedCallback:y,attributeChangedCallback:m,observedAttributes:I,constructionStack:[]},s.u.set(l,u),s.C.set(u.constructorFunction,u),u}V.prototype.upgrade=function(s){ee(this.h,s)};function Ht(s){if(s.i!==!1){s.i=!1;for(var l=[],u=s.v,m=new Map,h=0;h<u.length;h++)m.set(u[h],[]);for(ee(s.h,document,{upgrade:function(y){if(y.__CE_state===void 0){var I=y.localName,U=m.get(I);U?U.push(y):s.u.has(I)&&l.push(y)}}}),h=0;h<l.length;h++)ae(s.h,l[h]);for(h=0;h<u.length;h++){for(var g=u[h],w=m.get(g),v=0;v<w.length;v++)ae(s.h,w[v]);(g=s.B.get(g))&&g.resolve(void 0)}u.length=0}}V.prototype.get=function(s){if(s=Je(this,s))return s.constructorFunction},V.prototype.whenDefined=function(s){if(!K(s))return Promise.reject(new SyntaxError("'"+s+"' is not a valid custom element name."));var l=this.B.get(s);if(l)return l.F;l=new ye,this.B.set(s,l);var u=this.u.has(s)||this.s.has(s);return s=this.v.indexOf(s)===-1,u&&s&&l.resolve(void 0),l.F},V.prototype.polyfillWrapFlushCallback=function(s){this.D&&zt(this.D);var l=this.o;this.o=function(u){return s(function(){return l(u)})}};function Je(s,l){var u=s.u.get(l);if(u)return u;if(u=s.s.get(l)){s.s.delete(l);try{return Bt(s,l,u())}catch(m){Y(m)}}}V.prototype.define=V.prototype.define,V.prototype.upgrade=V.prototype.upgrade,V.prototype.get=V.prototype.get,V.prototype.whenDefined=V.prototype.whenDefined,V.prototype.polyfillDefineLazy=V.prototype.H,V.prototype.polyfillWrapFlushCallback=V.prototype.polyfillWrapFlushCallback;function dt(s,l,u){function m(h){return function(g){for(var w=[],v=0;v<arguments.length;++v)w[v]=arguments[v];v=[];for(var y=[],I=0;I<w.length;I++){var U=w[I];if(U instanceof Element&&z(U)&&y.push(U),U instanceof DocumentFragment)for(U=U.firstChild;U;U=U.nextSibling)v.push(U);else v.push(U)}for(h.apply(this,w),w=0;w<y.length;w++)F(s,y[w]);if(z(this))for(w=0;w<v.length;w++)y=v[w],y instanceof Element&&W(s,y)}}u.prepend!==void 0&&(l.prepend=m(u.prepend)),u.append!==void 0&&(l.append=m(u.append))}function Si(s){Document.prototype.createElement=function(l){return re(s,this,l,null)},Document.prototype.importNode=function(l,u){return l=i.call(this,l,!!u),this.__CE_registry?ee(s,l):Me(s,l),l},Document.prototype.createElementNS=function(l,u){return re(s,this,u,l)},dt(s,Document.prototype,{prepend:n,append:o})}function Mi(s){function l(m){return function(h){for(var g=[],w=0;w<arguments.length;++w)g[w]=arguments[w];w=[];for(var v=[],y=0;y<g.length;y++){var I=g[y];if(I instanceof Element&&z(I)&&v.push(I),I instanceof DocumentFragment)for(I=I.firstChild;I;I=I.nextSibling)w.push(I);else w.push(I)}for(m.apply(this,g),g=0;g<v.length;g++)F(s,v[g]);if(z(this))for(g=0;g<w.length;g++)v=w[g],v instanceof Element&&W(s,v)}}var u=Element.prototype;O!==void 0&&(u.before=l(O)),G!==void 0&&(u.after=l(G)),X!==void 0&&(u.replaceWith=function(m){for(var h=[],g=0;g<arguments.length;++g)h[g]=arguments[g];g=[];for(var w=[],v=0;v<h.length;v++){var y=h[v];if(y instanceof Element&&z(y)&&w.push(y),y instanceof DocumentFragment)for(y=y.firstChild;y;y=y.nextSibling)g.push(y);else g.push(y)}for(v=z(this),X.apply(this,h),h=0;h<w.length;h++)F(s,w[h]);if(v)for(F(s,this),h=0;h<g.length;h++)w=g[h],w instanceof Element&&W(s,w)}),ce!==void 0&&(u.remove=function(){var m=z(this);ce.call(this),m&&F(s,this)})}function Ci(s){function l(h,g){Object.defineProperty(h,"innerHTML",{enumerable:g.enumerable,configurable:!0,get:g.get,set:function(w){var v=this,y=void 0;if(z(this)&&(y=[],se(s,this,function(Pe){Pe!==v&&y.push(Pe)})),g.set.call(this,w),y)for(var I=0;I<y.length;I++){var U=y[I];U.__CE_state===1&&s.disconnectedCallback(U)}return this.ownerDocument.__CE_registry?ee(s,this):Me(s,this),w}})}function u(h,g){h.insertAdjacentElement=function(w,v){var y=z(v);return w=g.call(this,w,v),y&&F(s,v),z(w)&&W(s,v),w}}function m(h,g){function w(v,y){for(var I=[];v!==y;v=v.nextSibling)I.push(v);for(y=0;y<I.length;y++)ee(s,I[y])}h.insertAdjacentHTML=function(v,y){if(v=v.toLowerCase(),v==="beforebegin"){var I=this.previousSibling;g.call(this,v,y),w(I||this.parentNode.firstChild,this)}else if(v==="afterbegin")I=this.firstChild,g.call(this,v,y),w(this.firstChild,I);else if(v==="beforeend")I=this.lastChild,g.call(this,v,y),w(I||this.firstChild,null);else if(v==="afterend")I=this.nextSibling,g.call(this,v,y),w(this.nextSibling,I);else throw new SyntaxError("The value provided ("+String(v)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}A&&(Element.prototype.attachShadow=function(h){if(h=A.call(this,h),s.j&&!h.__CE_patched){h.__CE_patched=!0;for(var g=0;g<s.m.length;g++)s.m[g](h)}return this.__CE_shadowRoot=h}),x&&x.get?l(Element.prototype,x):R&&R.get?l(HTMLElement.prototype,R):pe(s,function(h){l(h,{enumerable:!0,configurable:!0,get:function(){return c.call(this,!0).innerHTML},set:function(g){var w=this.localName==="template",v=w?this.content:this,y=e.call(document,this.namespaceURI,this.localName);for(y.innerHTML=g;0<v.childNodes.length;)_.call(v,v.childNodes[0]);for(g=w?y.content:y;0<g.childNodes.length;)f.call(v,g.childNodes[0])}})}),Element.prototype.setAttribute=function(h,g){if(this.__CE_state!==1)return E.call(this,h,g);var w=S.call(this,h);E.call(this,h,g),g=S.call(this,h),s.attributeChangedCallback(this,h,w,g,null)},Element.prototype.setAttributeNS=function(h,g,w){if(this.__CE_state!==1)return N.call(this,h,g,w);var v=T.call(this,h,g);N.call(this,h,g,w),w=T.call(this,h,g),s.attributeChangedCallback(this,g,v,w,h)},Element.prototype.removeAttribute=function(h){if(this.__CE_state!==1)return M.call(this,h);var g=S.call(this,h);M.call(this,h),g!==null&&s.attributeChangedCallback(this,h,g,null,null)},L&&(Element.prototype.toggleAttribute=function(h,g){if(this.__CE_state!==1)return L.call(this,h,g);var w=S.call(this,h),v=w!==null;return g=L.call(this,h,g),v!==g&&s.attributeChangedCallback(this,h,w,g?"":null,null),g}),Element.prototype.removeAttributeNS=function(h,g){if(this.__CE_state!==1)return D.call(this,h,g);var w=T.call(this,h,g);D.call(this,h,g);var v=T.call(this,h,g);w!==v&&s.attributeChangedCallback(this,g,w,v,h)},J?u(HTMLElement.prototype,J):C&&u(Element.prototype,C),ne?m(HTMLElement.prototype,ne):P&&m(Element.prototype,P),dt(s,Element.prototype,{prepend:B,append:H}),Mi(s)}var Ft={};function Di(s){function l(){var u=this.constructor,m=document.__CE_registry.C.get(u);if(!m)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var h=m.constructionStack;if(h.length===0)return h=t.call(document,m.localName),Object.setPrototypeOf(h,u.prototype),h.__CE_state=1,h.__CE_definition=m,he(s,h),h;var g=h.length-1,w=h[g];if(w===Ft)throw Error("Failed to construct '"+m.localName+"': This element was already constructed.");return h[g]=Ft,Object.setPrototypeOf(w,u.prototype),he(s,w),w}l.prototype=Q.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:l}),window.HTMLElement=l}function Ii(s){function l(u,m){Object.defineProperty(u,"textContent",{enumerable:m.enumerable,configurable:!0,get:m.get,set:function(h){if(this.nodeType===Node.TEXT_NODE)m.set.call(this,h);else{var g=void 0;if(this.firstChild){var w=this.childNodes,v=w.length;if(0<v&&z(this)){g=Array(v);for(var y=0;y<v;y++)g[y]=w[y]}}if(m.set.call(this,h),g)for(h=0;h<g.length;h++)F(s,g[h])}}})}Node.prototype.insertBefore=function(u,m){if(u instanceof DocumentFragment){var h=fe(u);if(u=d.call(this,u,m),z(this))for(m=0;m<h.length;m++)W(s,h[m]);return u}return h=u instanceof Element&&z(u),m=d.call(this,u,m),h&&F(s,u),z(this)&&W(s,u),m},Node.prototype.appendChild=function(u){if(u instanceof DocumentFragment){var m=fe(u);if(u=f.call(this,u),z(this))for(var h=0;h<m.length;h++)W(s,m[h]);return u}return m=u instanceof Element&&z(u),h=f.call(this,u),m&&F(s,u),z(this)&&W(s,u),h},Node.prototype.cloneNode=function(u){return u=c.call(this,!!u),this.ownerDocument.__CE_registry?ee(s,u):Me(s,u),u},Node.prototype.removeChild=function(u){var m=u instanceof Element&&z(u),h=_.call(this,u);return m&&F(s,u),h},Node.prototype.replaceChild=function(u,m){if(u instanceof DocumentFragment){var h=fe(u);if(u=p.call(this,u,m),z(this))for(F(s,m),m=0;m<h.length;m++)W(s,h[m]);return u}h=u instanceof Element&&z(u);var g=p.call(this,u,m),w=z(this);return w&&F(s,m),h&&F(s,u),w&&W(s,u),g},b&&b.get?l(Node.prototype,b):Se(s,function(u){l(u,{enumerable:!0,configurable:!0,get:function(){for(var m=[],h=this.firstChild;h;h=h.nextSibling)h.nodeType!==Node.COMMENT_NODE&&m.push(h.textContent);return m.join("")},set:function(m){for(;this.firstChild;)_.call(this,this.firstChild);m!=null&&m!==""&&f.call(this,document.createTextNode(m))}})})}var we=window.customElements;function Ut(){var s=new ge;Di(s),Si(s),dt(s,DocumentFragment.prototype,{prepend:r,append:a}),Ii(s),Ci(s),window.CustomElementRegistry=V,s=new V(s),document.__CE_registry=s,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:s})}we&&!we.forcePolyfill&&typeof we.define=="function"&&typeof we.get=="function"||Ut(),window.__CE_installPolyfill=Ut}).call(self);var oi=`<form data-multi-step class="form inline">
  <div class="row-container">
    <div class="information">
      <div class="logo">
        <img src="" />
        <p></p>
      </div>
      <p data-step="1">How are we doing?</p>
      <p data-step="2">Glad you like it! Can you help us share the \u2764\uFE0F?</p>
      <input name="feedback" data-step="3" placeholder="How can we improve?" />
      <p data-step="4">Thanks for the feedback!</p>
    </div>
    <div class="action">
      <div data-step="1">
        <span class="star" data-star-index="1"></span>
        <span class="star" data-star-index="2"></span>
        <span class="star" data-star-index="3"></span>
        <span class="star" data-star-index="4"></span>
        <span class="star" data-star-index="5"></span>
      </div>
      <div data-step="2">
        <button id="rate-on-store" type="button" data-next-step="4">
          Rate on webstore
        </button>
        <button id="decline-rate-on-rate" type="button" data-next-step="4">
          No thanks
        </button>
      </div>
      <button id="submit-form" type="button" data-step="3" data-next-step="4">
        Submit
      </button>
    </div>
  </div>
</form>
`;var si=`/* Start css reset */
/* 1. Use a more-intuitive box-sizing model. */
*,
*::before,
*::after {
  box-sizing: border-box;
}
/* 2. Remove default margin */
* {
  margin: 0;
}
/* 3. Allow percentage-based heights in the application */
html,
body {
  height: 100%;
}
/* Typographic tweaks! 4. Add accessible line-height 5. Improve text rendering */
body {
  line-height: 20px;
  -webkit-font-smoothing: antialiased;
}
/* 6. Improve media defaults */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}
/* 7. Remove built-in form typography styles */
input,
button,
textarea,
select {
  font-size: 12px;
}
/* 8. Avoid text overflows */
p,
h1,
h2,
h3,
h4,
h5,
h6 {
  overflow-wrap: break-word;
}
/* End css reset */

.form {
  width: 100%;
  font-family: Verdana, sans-serif;
}
[data-step],
.form[data-current-step="4"] .action {
  display: none;
}
.form[data-current-step="1"] [data-step="1"],
.form[data-current-step="2"] [data-step="2"],
.form[data-current-step="3"] [data-step="3"],
.form[data-current-step="4"] [data-step="4"] {
  display: block;
}
.row-container {
  align-items: center;
  background: #cce;
  display: grid;
  gap: 8px;
  margin: 0;
  padding: 4px 10px;
}

.information {
  align-items: center;
  display: grid;
  gap: 8px;
  grid-auto-flow: column;
}
.action {
  align-items: center;
  display: flex;
}
.logo {
  align-items: center;
  display: flex;
  gap: 8px;
}
.logo img {
  width: 15px;
}
.logo p {
  display: none;
}
button {
  background-color: transparent;
  border-radius: 5px;
  margin-right: 8px;
}
.star {
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
}
.star:before {
  content: "\u2606";
}
.full.star:before {
  content: "\u2605";
  color: gold;
}

.inline .row-container,
.inline .row-container.active {
  display: flex;
  min-height: 35px;
}
.inline .row-container .information {
  display: flex;
  flex-grow: 100;
}
.row-container .information input {
  flex: 1;
}
.inline .row-container[data-step="4"] .information {
  flex-grow: 0;
}

.small .row-container .information {
  display: flex;
}

.medium .row-container .information {
  grid-auto-flow: row;
}
.medium .logo p {
  display: block;
}
p {
  font-size: 12px;
}

div[data-step="2"] {
  white-space: nowrap;
}
`;var rt={};ji(rt,{"@appDesc":()=>mn,"@appName":()=>fn,"@appShortName":()=>gn,"@testMarkup":()=>pn,Automatically_Hide_Previews:()=>Rn,Baidu_Search:()=>xn,Bing_Search:()=>bn,By_default__the_version_of_Google_search_used_is_always_signed_out_for_privacy_and_security_reasons__Though_this_may_result_in_always_seeing_sign_in_prompts_:()=>Gn,Close_on_Escape_Key:()=>In,Disable_Previews_on_this_site:()=>Wn,Disabled_on_Websites:()=>Xn,Displays_the_view_in_Chrome_Side_Panel_instead_of_a_floating_box_:()=>zn,Extension_will_not_run_on_these_sites__you_can_disable_a_site_by_adding_to_this_list_:()=>Vn,For_websites_that___really___do_not_want_to_be_previewed__e_g__stackoverflow_com__this_forces_a_preview__Nerd_alert__this_is_a_frame_busting_buster_:()=>Fn,Google_Search:()=>vn,Hides_the_preview_panel_when_you_scroll_away_or_interact_with_the_main_page_:()=>On,Left_side:()=>Dn,Panel_Position:()=>Sn,Preview_Height____:()=>Tn,Preview_Width____:()=>Nn,Preview_in_Side_Panel:()=>Pn,Preview_on_Hover_Delay:()=>jn,Report_an_Issue:()=>Qn,Right_side:()=>Cn,Search__amp__Link_Preview_Options:()=>Zn,Search_engine:()=>wn,Show_Sample_Preview:()=>$n,Successfully_updated_settings:()=>qn,The_detail_information_about_the_checkbox_here_:()=>Yn,The_height_of_the_preview_panel_relative_to_the_page_:()=>Ln,The_search_engine_that_would_be_used_for_inline_search_previews_:()=>_n,The_side_of_the_page_in_which_to_display_the_preview_:()=>Mn,The_width_of_the_preview_panel_relative_to_the_page_:()=>An,Use_the_ESC__escape__key_to_close_the_preview_panel_:()=>kn,When_automatic_preview_on_hover_is_enabled__this_is_the_delay_before_the_preview_is_shown_:()=>Bn,Yahoo_Search:()=>yn,Yandex_Search:()=>En,_Advanced__Disable_Incognito_Google:()=>Un,_Advanced__Force_Preview:()=>Hn,default:()=>Jn});var fn={message:"Search & Link Preview",description:"The name of the extension"},gn={message:"Link Previews",description:"The short-version name of the extension name"},mn={message:"See previews of links and instantly performs searches on the same page using this previewer instead of opening new tabs",description:"A description of its function"},pn={message:"<div><p>Hello world</p>This is the <strong>language</strong> of the web</div>"},wn={message:"Search engine"},_n={message:"The search engine that would be used for inline search previews."},vn={message:"Google Search"},bn={message:"Bing Search"},yn={message:"Yahoo Search"},xn={message:"Baidu Search"},En={message:"Yandex Search"},Nn={message:"Preview Width (%)"},An={message:"The width of the preview panel relative to the page."},Tn={message:"Preview Height (%)"},Ln={message:"The height of the preview panel relative to the page."},Sn={message:"Panel Position"},Mn={message:"The side of the page in which to display the preview."},Cn={message:"Right side"},Dn={message:"Left side"},In={message:"Close on Escape Key"},kn={message:"Use the ESC (escape) key to close the preview panel."},Rn={message:"Automatically Hide Previews"},On={message:"Hides the preview panel when you scroll away or interact with the main page."},Pn={message:"Preview in Side Panel"},zn={message:"Displays the view in Chrome Side Panel instead of a floating box."},jn={message:"Preview-on-Hover Delay"},Bn={message:"When automatic preview on hover is enabled, this is the delay before the preview is shown."},Hn={message:"[Advanced] Force Preview"},Fn={message:"For websites that **really** do not want to be previewed (e.g. stackoverflow.com) this forces a preview. Nerd alert: this is a frame-busting buster."},Un={message:"[Advanced] Disable Incognito Google"},Gn={message:"By default, the version of Google search used is always signed-out for privacy and security reasons. Though this may result in always seeing sign-in prompts."},Wn={message:"Disable Previews on this site"},Yn={message:"The detail information about the checkbox here."},Xn={message:"Disabled on Websites"},Vn={message:"Extension will not run on these sites, you can disable a site by adding to this list."},qn={message:"Successfully updated settings"},Zn={message:"Search &amp; Link Preview Options"},$n={message:"Show Sample Preview"},Qn={message:"Report an Issue"},Jn={"@appName":fn,"@appShortName":gn,"@appDesc":mn,"@testMarkup":pn,Search_engine:wn,The_search_engine_that_would_be_used_for_inline_search_previews_:_n,Google_Search:vn,Bing_Search:bn,Yahoo_Search:yn,Baidu_Search:xn,Yandex_Search:En,Preview_Width____:Nn,The_width_of_the_preview_panel_relative_to_the_page_:An,Preview_Height____:Tn,The_height_of_the_preview_panel_relative_to_the_page_:Ln,Panel_Position:Sn,The_side_of_the_page_in_which_to_display_the_preview_:Mn,Right_side:Cn,Left_side:Dn,Close_on_Escape_Key:In,Use_the_ESC__escape__key_to_close_the_preview_panel_:kn,Automatically_Hide_Previews:Rn,Hides_the_preview_panel_when_you_scroll_away_or_interact_with_the_main_page_:On,Preview_in_Side_Panel:Pn,Displays_the_view_in_Chrome_Side_Panel_instead_of_a_floating_box_:zn,Preview_on_Hover_Delay:jn,When_automatic_preview_on_hover_is_enabled__this_is_the_delay_before_the_preview_is_shown_:Bn,_Advanced__Force_Preview:Hn,For_websites_that___really___do_not_want_to_be_previewed__e_g__stackoverflow_com__this_forces_a_preview__Nerd_alert__this_is_a_frame_busting_buster_:Fn,_Advanced__Disable_Incognito_Google:Un,By_default__the_version_of_Google_search_used_is_always_signed_out_for_privacy_and_security_reasons__Though_this_may_result_in_always_seeing_sign_in_prompts_:Gn,Disable_Previews_on_this_site:Wn,The_detail_information_about_the_checkbox_here_:Yn,Disabled_on_Websites:Xn,Extension_will_not_run_on_these_sites__you_can_disable_a_site_by_adding_to_this_list_:Vn,Successfully_updated_settings:qn,Search__amp__Link_Preview_Options:Zn,Show_Sample_Preview:$n,Report_an_Issue:Qn};var bt=new oe("i18n");function Kn(t){let e=/^[a-zA-Z0-9_]+$/;return t.split("").map(i=>e.test(i)?i:"_").join("")}var ot=t=>{if(!t)return bt.error("A valid key is required for i18n, got",t),t;let e=t.startsWith("@")?t:Kn(t);if(chrome?.i18n&&chrome.i18n.getMessage(e)!=="")return chrome.i18n.getMessage(e);bt.warn("chrome.i18n is not available in the current context, falling back to en-US"),Object.keys(rt).forEach(i=>{});for(let[i,n]of Object.entries(rt))if(i===e)return n.message;return bt.error("No translation available for key:",t),t},Pr=ot("@@extension_id");var yt=class extends HTMLElement{constructor(){super();this.logger=new oe("feedback-form");this.attachShadow({mode:"open"})}setProgressHandler(i){this.progressHandler=i}static get observedAttributes(){return["size","app-name","logo-url","store-link","form-link"]}connectedCallback(){this.logger.debug("Feedback form added to page."),this.updateStyle(this)}disconnectedCallback(){this.logger.debug("Feedback form removed from page.")}adoptedCallback(){this.logger.debug("Feedback form moved to new page.")}updateStyle(i){let n=document.createElement("style");n.textContent=si;let o=document.createRange();o.selectNode(document.getElementsByTagName("body").item(0));let r=o.createContextualFragment(oi),a=i.shadowRoot;a.append(n,r);let c=i.getAttribute("size")??"inline",f=i.getAttribute("app-name")??ot("@appName"),d=i.getAttribute("logo-url")??chrome.runtime.getURL("assets/logo-24x24.png"),_=i.getAttribute("store-link")??"https://chrome.google.com/webstore/detail/"+ot("@@extension_id"),p=i.getAttribute("form-link")??"https://formspree.io/f/mayzdndj";this.logger.debug(`Attributes: size=${c}, app=${f}, logo=${d}`);let b=a.querySelector("[data-multi-step]");b.classList.remove("inline","small","medium"),b.classList.add(c),b.querySelector("img").src=d,b.querySelector(".logo p").innerHTML=f;let A=b.getAttribute("data-current-step");A||(A=1,b.setAttribute("data-current-step",A));let x=[...b.querySelectorAll(".star")],S=[...b.querySelectorAll("[data-next-step]")];if(x.length>0){let E=()=>x.forEach(T=>T.classList=["star"]),M=T=>{let N=T.target.getAttribute("data-star-index");E(),x.forEach((D,C)=>C<N?D.classList.add("full"):null)},L=T=>{let N=T.target.getAttribute("data-star-index");this.progressHandler&&this.progressHandler("started",N),A=N<5?3:2,b.setAttribute("data-current-step",A)};x.forEach(T=>T.addEventListener("mouseover",M)),x.forEach(T=>T.addEventListener("click",L)),b.addEventListener("mouseleave",E)}S.forEach(E=>E.addEventListener("click",M=>{A=M.target.getAttribute("data-next-step"),b.setAttribute("data-current-step",A),E.id==="rate-on-store"&&window.open(_);let L={feedback:b.querySelector("input").value,appName:f};E.id==="submit-form"&&fetch(p,{method:"POST",body:JSON.stringify(L)}).then(function(T){return this.logger.debug("response",T.json())}).then(function(T){this.logger.debug("response 2",T.json())}),A==4&&setTimeout(()=>{this.progressHandler&&this.progressHandler("completed",L)},1300)}))}};customElements.define("feedback-form",yt);var Et="feedback_data";var xt=class{constructor(){this.storageService=chrome.storage.sync}put(e,i){if(i==null)return Promise.reject("Attempting to save a null value");if(!e)return Promise.reject("Attempting to use a null key");let n={};return n[e]=i,this.storageService.set(n)}async get(e){return(await this.storageService.get(e))[e]}getAll(){return this.storageService.get(null)}async getAndUpdate(e,i){let n=await this.get(e);return this.put(e,await i(n))}},q=new xt;var Ye=te.__package_name__+"/mainframe";Te.prototype.setUrl=function(t,e){let i=this.body.firstChild;return i&&i.tagName.toLowerCase()==="iframe"?i.src=t:(this.body.innerHTML='<iframe name="'+Ye+'" src="'+t+'"></iframe>',e&&(this.body.firstChild.onload=e)),this};var Nt=class{constructor(){this.logger=new oe(this);this.headerIconUrlBase="https://www.google.com/s2/favicons?domain=";this.isVisible=!1;this.navStack=[];this.displayReaderMode=!1;this.isDemo=!1;this.searchUrl={google:"https://www.google.com/search?igu=1&q=",bing:"https://www.bing.com/search?q=",yahoo:"https://search.yahoo.com/search?p=",baidu:"https://www.baidu.com/s?wd=",yandex:"https://yandex.com/search/?text=",duckduckgo:"https://duckduckgo.com/?q=",ecosia:"https://www.ecosia.org/search?q="};this.onEscHandler=e=>{e=e||window.event;var i=!1;"key"in e?i=e.key==="Escape"||e.key==="Esc":i=e.keyCode===27,i&&this.handleMessage({action:"escape",href:document.location.href,sourceFrame:Ye})}}init(){if(this.inIframe()){this.logger.log("Not inserting previewr in iframe: ",window.location.href);return}this.listenForCspError(),this.listenForWindowMessages(),document.addEventListener("keydown",this.onEscHandler),document.addEventListener("click",e=>this.clickHandler(e)),document.addEventListener("scroll",e=>this.handleScroll(e))}listenForCspError(){document.addEventListener("securitypolicyviolation",e=>{window.name===Ye&&this.logger.error("CSP error",e,e.blockedURI)})}async clickHandler(e){(await q.get("automatically-hide-previews")??!1)&&this.dialog&&!this.dialog.dom.contains(e.target)&&this.dialog.close()}async handleScroll(e){(await q.get("automatically-hide-previews")??!1)&&this.dialog&&!this.dialog.dom.contains(e.target)&&this.dialog.close()}listenForWindowMessages(){window.addEventListener("message",e=>{if(e.origin!==window.location.origin){this.logger.debug("Ignoring message from different origin",e.origin,e.data);return}if(e.data.application!==te.__package_name__){this.logger.debug("Ignoring origin messsage not initiated by Better Previews",e.data);return}this.logger.log("#WindowMessage: ",e),this.handleMessage(e.data)},!1)}async handleMessage(e){let i;if(e.mode==="demo"&&(this.isDemo=!0),e.action==="copy"){navigator.clipboard.writeText(e.data);return}else if(e.action==="preview")i=e.data;else if(e.action==="search"){let o=await q.get("search-engine")??"google";i=this.searchUrl[o]+e.data,o==="google"&&await q.get("disable-incognito-google")==!0&&(i="https://www.google.com/search?q="+e.data)}else if(e.action==="load")e.sourceFrame===Ye&&this.dialog&&(this.dialog.setTitle(e.data.title),this.dialog.setIcon(this.headerIconUrlBase+new URL(e.href).hostname));else if(e.action==="navigate")i=e.href;else if(e.action==="escape"){(await q.get("close-on-esc")??!0)&&this.dialog?.close();return}else this.logger.warn("Unhandled action",e);if(!i||(0,ai.sanitizeUrl)(i)==="about:blank")return;let n;try{n=new URL(i)}catch(o){this.logger.error(o);return}return this.url&&this.url.href!==n.href&&this.navStack.push(this.url),this.previewUrl(n)}async previewUrl(e){this.logger.log("#previewUrl: ",e),this.url=e;let i=await this.getWinboxOptions(e);if(this.displayReaderMode){let o=new li.Readability(window.document.cloneNode(!0)).parse();o||(console.error("Article is null"),i.html="<h1>Failed to parse article</h1>"),i.html=`<h1>${o.title}</h1> <p>${o.byline}</p> ${o.content}`}else i.url=this.url;this.dialog?(this.logger.debug("restoring dialog"),this.dialog.restore(),this.dialog.setUrl(e.href),this.dialog.setTitle(e.hostname),this.dialog.setIcon(this.headerIconUrlBase+e.hostname)):(this.logger.debug("creating new dialog with options:",i),this.dialog=new Te(e.hostname,i),this.dialog.addControl({index:2,class:"wb-nav-away",title:"Open in New Tab",image:"",click:(n,o)=>{this.logger.log("#onOpenInNewTab: url",this.url),window.open(this.url,"_blank")}}),this.dialog.addControl({index:3,class:"wb-settings",title:"Extension Settings",image:"",click:(n,o)=>{this.logger.log("#onOpenSettings: url",this.url),chrome.runtime.sendMessage("open_options_page")}})),this.dialog.removeControl("nav-back"),this.navStack.length>0&&this.dialog.addControl({index:0,class:"nav-back",image:"",title:"Go Back",click:(n,o)=>{this.navBack()}}),await this.registerFeedbackUI()}async registerFeedbackUI(){(await q.get(Et))?.status==="eligible"&&this.dialog?.addClass("show-footer"),(this.dialog?.dom.querySelector("feedback-form")).setProgressHandler((o,r)=>{if(o==="started"){this.logger.log("started: this",this,chrome?.storage?.sync);let a={status:"honored",timestamp:Date.now(),rating:r};q.put(Et,a),Fe.fireEvent("user_feedback",{action:"rate_experience",star_rating:r})}o==="completed"&&(this.dialog?.removeClass("show-footer"),Fe.fireEvent("user_feedback",{action:"submit_feedback",feedback_text:r}))})}navBack(){let e=this.navStack.pop();e&&this.previewUrl(e)}inIframe(){try{return window.self!==window.top}catch{return!0}}getMaxZIndex(){return new Promise(e=>{let i=Math.max(...Array.from(document.querySelectorAll("body *"),n=>parseFloat(window.getComputedStyle(n).zIndex)).filter(n=>!Number.isNaN(n)),0);e(i)})}async getWinboxOptions(e,i){let n=(await q.get("previewr-width")??"55")+"%",o=(await q.get("previewr-height")??"80")+"%",r=await q.get("previewr-position")??"right",a="80px";this.isDemo&&(n="45%",o="40%",a="500px");let c={icon:this.headerIconUrlBase+e.hostname,y:a,width:n,height:o,class:["no-max","no-full"],index:await this.getMaxZIndex(),hidden:!1,shadowel:"search-preview-window",framename:Ye,onclose:()=>{this.navStack=[],this.url=void 0,this.dialog=void 0}};return r==="right"?(c.x="right",c.right=10):(c.x="left",c.left=10),c}};new Nt().init();var At=class{constructor(){this.iframeName=te.__package_name__+"/mainframe";this.logger=new oe(this);this.redirectClicks=e=>{var i=this.getLinkTarget(e);!i||!i.href||i.href.startsWith("#")||(e.stopImmediatePropagation(),e.preventDefault(),this.logger.debug("Prevented click propagation and posting navigate"),this.sendMessage({action:"navigate",href:i.href,source:window.location.href}))}}registerListeners(){!this.inIframe()||this.getFrameName()===this.iframeName&&(this.maybeEnableFrameBustingBuster(),document.addEventListener("click",this.redirectClicks,!0),window.addEventListener("load",()=>{this.sendMessage({action:"load",data:{title:this.getTitle()}})}),window.addEventListener("unload",()=>{this.sendMessage({action:"unload"})}))}async maybeEnableFrameBustingBuster(){if(!(await q.get("enable-anti-frame-busting")??!1))return;let i=0;window.onbeforeunload=function(){i++},setInterval(function(){i>0&&(i-=2,window.top.location="https://httpstat.us/204")},1)}inIframe(){try{return window.self!==window.top}catch{return!0}}getFrameName(){return window.name}getLinkTarget(e){var i=e.target;do if(i.nodeName.toUpperCase()==="A"&&i.href)return i;while(i=i.parentElement);return null}sendMessage(e){this.logger.debug("#sendMessage",e),chrome.runtime.sendMessage({application:te.__package_name__,href:document.location.href,sourceFrame:this.getFrameName(),...e})}getTitle(){if(document.title)return document.title;let e=document.querySelector("meta[property='og:site_name'][content]");return e?e.content:window.location.origin}},er=new At;er.registerListeners();function Ve(t){return t.split("-")[1]}function St(t){return t==="y"?"height":"width"}function Oe(t){return t.split("-")[0]}function qe(t){return["top","bottom"].includes(Oe(t))?"x":"y"}function ci(t,e,i){let{reference:n,floating:o}=t,r=n.x+n.width/2-o.width/2,a=n.y+n.height/2-o.height/2,c=qe(e),f=St(c),d=n[f]/2-o[f]/2,_=c==="x",p;switch(Oe(e)){case"top":p={x:r,y:n.y-o.height};break;case"bottom":p={x:r,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:a};break;case"left":p={x:n.x-o.width,y:a};break;default:p={x:n.x,y:n.y}}switch(Ve(e)){case"start":p[c]-=d*(i&&_?-1:1);break;case"end":p[c]+=d*(i&&_?-1:1)}return p}var hi=async(t,e,i)=>{let{placement:n="bottom",strategy:o="absolute",middleware:r=[],platform:a}=i,c=r.filter(Boolean),f=await(a.isRTL==null?void 0:a.isRTL(e)),d=await a.getElementRects({reference:t,floating:e,strategy:o}),{x:_,y:p}=ci(d,n,f),b=n,A={},x=0;for(let S=0;S<c.length;S++){let{name:E,fn:M}=c[S],{x:L,y:T,data:N,reset:D}=await M({x:_,y:p,initialPlacement:n,placement:b,strategy:o,middlewareData:A,rects:d,platform:a,elements:{reference:t,floating:e}});_=L??_,p=T??p,A={...A,[E]:{...A[E],...N}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(b=D.placement),D.rects&&(d=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:o}):D.rects),{x:_,y:p}=ci(d,b,f)),S=-1)}return{x:_,y:p,placement:b,strategy:o,middlewareData:A}};function ui(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Xe(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Mt(t,e){var i;e===void 0&&(e={});let{x:n,y:o,platform:r,rects:a,elements:c,strategy:f}=t,{boundary:d="clippingAncestors",rootBoundary:_="viewport",elementContext:p="floating",altBoundary:b=!1,padding:A=0}=e,x=ui(A),S=c[b?p==="floating"?"reference":"floating":p],E=Xe(await r.getClippingRect({element:(i=await(r.isElement==null?void 0:r.isElement(S)))==null||i?S:S.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:d,rootBoundary:_,strategy:f})),M=p==="floating"?{...a.floating,x:n,y:o}:a.reference,L=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),T=await(r.isElement==null?void 0:r.isElement(L))&&await(r.getScale==null?void 0:r.getScale(L))||{x:1,y:1},N=Xe(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:M,offsetParent:L,strategy:f}):M);return{top:(E.top-N.top+x.top)/T.y,bottom:(N.bottom-E.bottom+x.bottom)/T.y,left:(E.left-N.left+x.left)/T.x,right:(N.right-E.right+x.right)/T.x}}var tr=Math.min,ir=Math.max;function Lt(t,e,i){return ir(t,tr(e,i))}var Ct=t=>({name:"arrow",options:t,async fn(e){let{element:i,padding:n=0}=t||{},{x:o,y:r,placement:a,rects:c,platform:f}=e;if(i==null)return{};let d=ui(n),_={x:o,y:r},p=qe(a),b=St(p),A=await f.getDimensions(i),x=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=c.reference[b]+c.reference[p]-_[p]-c.floating[b],M=_[p]-c.reference[p],L=await(f.getOffsetParent==null?void 0:f.getOffsetParent(i)),T=L?p==="y"?L.clientHeight||0:L.clientWidth||0:0;T===0&&(T=c.floating[b]);let N=E/2-M/2,D=d[x],C=T-A[b]-d[S],P=T/2-A[b]/2+N,B=Lt(D,P,C),H=Ve(a)!=null&&P!=B&&c.reference[b]/2-(P<D?d[x]:d[S])-A[b]/2<0;return{[p]:_[p]-(H?P<D?D-P:C-P:0),data:{[p]:B,centerOffset:P-B}}}}),nr=["top","right","bottom","left"],no=nr.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),rr={left:"right",right:"left",bottom:"top",top:"bottom"};function st(t){return t.replace(/left|right|bottom|top/g,e=>rr[e])}function or(t,e,i){i===void 0&&(i=!1);let n=Ve(t),o=qe(t),r=St(o),a=o==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=st(a)),{main:a,cross:st(a)}}var sr={start:"end",end:"start"};function Tt(t){return t.replace(/start|end/g,e=>sr[e])}var Dt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i;let{placement:n,middlewareData:o,rects:r,initialPlacement:a,platform:c,elements:f}=e,{mainAxis:d=!0,crossAxis:_=!0,fallbackPlacements:p,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:x=!0,...S}=t,E=Oe(n),M=Oe(a)===a,L=await(c.isRTL==null?void 0:c.isRTL(f.floating)),T=p||(M||!x?[st(a)]:function(O){let G=st(O);return[Tt(O),G,Tt(G)]}(a));p||A==="none"||T.push(...function(O,G,X,ce){let Q=Ve(O),R=function(J,ne,Z){let K=["left","right"],j=["right","left"],z=["top","bottom"],fe=["bottom","top"];switch(J){case"top":case"bottom":return Z?ne?j:K:ne?K:j;case"left":case"right":return ne?z:fe;default:return[]}}(Oe(O),X==="start",ce);return Q&&(R=R.map(J=>J+"-"+Q),G&&(R=R.concat(R.map(Tt)))),R}(a,x,A,L));let N=[a,...T],D=await Mt(e,S),C=[],P=((i=o.flip)==null?void 0:i.overflows)||[];if(d&&C.push(D[E]),_){let{main:O,cross:G}=or(n,r,L);C.push(D[O],D[G])}if(P=[...P,{placement:n,overflows:C}],!C.every(O=>O<=0)){var B;let O=(((B=o.flip)==null?void 0:B.index)||0)+1,G=N[O];if(G)return{data:{index:O,overflows:P},reset:{placement:G}};let X="bottom";switch(b){case"bestFit":{var H;let ce=(H=P.map(Q=>[Q,Q.overflows.filter(R=>R>0).reduce((R,J)=>R+J,0)]).sort((Q,R)=>Q[1]-R[1])[0])==null?void 0:H[0].placement;ce&&(X=ce);break}case"initialPlacement":X=a}if(n!==X)return{reset:{placement:X}}}return{}}}};var It=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){let{x:i,y:n}=e,o=await async function(r,a){let{placement:c,platform:f,elements:d}=r,_=await(f.isRTL==null?void 0:f.isRTL(d.floating)),p=Oe(c),b=Ve(c),A=qe(c)==="x",x=["left","top"].includes(p)?-1:1,S=_&&A?-1:1,E=typeof a=="function"?a(r):a,{mainAxis:M,crossAxis:L,alignmentAxis:T}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...E};return b&&typeof T=="number"&&(L=b==="end"?-1*T:T),A?{x:L*S,y:M*x}:{x:M*x,y:L*S}}(e,t);return{x:i+o.x,y:n+o.y,data:o}}}};function ar(t){return t==="x"?"y":"x"}var kt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:i,y:n,placement:o}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:c={fn:E=>{let{x:M,y:L}=E;return{x:M,y:L}}},...f}=t,d={x:i,y:n},_=await Mt(e,f),p=qe(Oe(o)),b=ar(p),A=d[p],x=d[b];if(r){let E=p==="y"?"bottom":"right";A=Lt(A+_[p==="y"?"top":"left"],A,A-_[E])}if(a){let E=b==="y"?"bottom":"right";x=Lt(x+_[b==="y"?"top":"left"],x,x-_[E])}let S=c.fn({...e,[p]:A,[b]:x});return{...S,data:{x:S.x-i,y:S.y-n}}}}};function de(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _e(t){return de(t).getComputedStyle(t)}function Re(t){return _i(t)?(t.nodeName||"").toLowerCase():""}var at;function wi(){if(at)return at;let t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(at=t.brands.map(e=>e.brand+"/"+e.version).join(" "),at):navigator.userAgent}function Le(t){return t instanceof de(t).HTMLElement}function Ie(t){return t instanceof de(t).Element}function _i(t){return t instanceof de(t).Node}function di(t){return typeof ShadowRoot>"u"?!1:t instanceof de(t).ShadowRoot||t instanceof ShadowRoot}function ct(t){let{overflow:e,overflowX:i,overflowY:n,display:o}=_e(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(o)}function lr(t){return["table","td","th"].includes(Re(t))}function Rt(t){let e=/firefox/i.test(wi()),i=_e(t),n=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||!!n&&n!=="none"||e&&i.willChange==="filter"||e&&!!i.filter&&i.filter!=="none"||["transform","perspective"].some(o=>i.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{let r=i.contain;return r!=null&&r.includes(o)})}function vi(){return!/^((?!chrome|android).)*safari/i.test(wi())}function Ot(t){return["html","body","#document"].includes(Re(t))}var fi=Math.min,Ze=Math.max,lt=Math.round;function bi(t){let e=_e(t),i=parseFloat(e.width),n=parseFloat(e.height),o=t.offsetWidth,r=t.offsetHeight,a=lt(i)!==o||lt(n)!==r;return a&&(i=o,n=r),{width:i,height:n,fallback:a}}function yi(t){return Ie(t)?t:t.contextElement}var xi={x:1,y:1};function He(t){let e=yi(t);if(!Le(e))return xi;let i=e.getBoundingClientRect(),{width:n,height:o,fallback:r}=bi(e),a=(r?lt(i.width):i.width)/n,c=(r?lt(i.height):i.height)/o;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}function $e(t,e,i,n){var o,r;e===void 0&&(e=!1),i===void 0&&(i=!1);let a=t.getBoundingClientRect(),c=yi(t),f=xi;e&&(n?Ie(n)&&(f=He(n)):f=He(t));let d=c?de(c):window,_=!vi()&&i,p=(a.left+(_&&((o=d.visualViewport)==null?void 0:o.offsetLeft)||0))/f.x,b=(a.top+(_&&((r=d.visualViewport)==null?void 0:r.offsetTop)||0))/f.y,A=a.width/f.x,x=a.height/f.y;if(c){let S=de(c),E=n&&Ie(n)?de(n):n,M=S.frameElement;for(;M&&n&&E!==S;){let L=He(M),T=M.getBoundingClientRect(),N=getComputedStyle(M);T.x+=(M.clientLeft+parseFloat(N.paddingLeft))*L.x,T.y+=(M.clientTop+parseFloat(N.paddingTop))*L.y,p*=L.x,b*=L.y,A*=L.x,x*=L.y,p+=T.x,b+=T.y,M=de(M).frameElement}}return{width:A,height:x,top:b,right:p+A,bottom:b+x,left:p,x:p,y:b}}function ke(t){return((_i(t)?t.ownerDocument:t.document)||window.document).documentElement}function ht(t){return Ie(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ei(t){return $e(ke(t)).left+ht(t).scrollLeft}function cr(t,e,i){let n=Le(e),o=ke(e),r=$e(t,!0,i==="fixed",e),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};if(n||!n&&i!=="fixed")if((Re(e)!=="body"||ct(o))&&(a=ht(e)),Le(e)){let f=$e(e,!0);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else o&&(c.x=Ei(o));return{x:r.left+a.scrollLeft-c.x,y:r.top+a.scrollTop-c.y,width:r.width,height:r.height}}function Qe(t){if(Re(t)==="html")return t;let e=t.assignedSlot||t.parentNode||(di(t)?t.host:null)||ke(t);return di(e)?e.host:e}function gi(t){return Le(t)&&_e(t).position!=="fixed"?t.offsetParent:null}function mi(t){let e=de(t),i=gi(t);for(;i&&lr(i)&&_e(i).position==="static";)i=gi(i);return i&&(Re(i)==="html"||Re(i)==="body"&&_e(i).position==="static"&&!Rt(i))?e:i||function(n){let o=Qe(n);for(;Le(o)&&!Ot(o);){if(Rt(o))return o;o=Qe(o)}return null}(t)||e}function Ni(t){let e=Qe(t);return Ot(e)?t.ownerDocument.body:Le(e)&&ct(e)?e:Ni(e)}function Ai(t,e){var i;e===void 0&&(e=[]);let n=Ni(t),o=n===((i=t.ownerDocument)==null?void 0:i.body),r=de(n);return o?e.concat(r,r.visualViewport||[],ct(n)?n:[]):e.concat(n,Ai(n))}function pi(t,e,i){return e==="viewport"?Xe(function(n,o){let r=de(n),a=ke(n),c=r.visualViewport,f=a.clientWidth,d=a.clientHeight,_=0,p=0;if(c){f=c.width,d=c.height;let b=vi();(b||!b&&o==="fixed")&&(_=c.offsetLeft,p=c.offsetTop)}return{width:f,height:d,x:_,y:p}}(t,i)):Ie(e)?function(n,o){let r=$e(n,!0,o==="fixed"),a=r.top+n.clientTop,c=r.left+n.clientLeft,f=Le(n)?He(n):{x:1,y:1},d=n.clientWidth*f.x,_=n.clientHeight*f.y,p=c*f.x,b=a*f.y;return{top:b,left:p,right:p+d,bottom:b+_,x:p,y:b,width:d,height:_}}(e,i):Xe(function(n){var o;let r=ke(n),a=ht(n),c=(o=n.ownerDocument)==null?void 0:o.body,f=Ze(r.scrollWidth,r.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),d=Ze(r.scrollHeight,r.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),_=-a.scrollLeft+Ei(n),p=-a.scrollTop;return _e(c||r).direction==="rtl"&&(_+=Ze(r.clientWidth,c?c.clientWidth:0)-f),{width:f,height:d,x:_,y:p}}(ke(t)))}var hr={getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:n,strategy:o}=t,r=i==="clippingAncestors"?function(d,_){let p=_.get(d);if(p)return p;let b=Ai(d).filter(E=>Ie(E)&&Re(E)!=="body"),A=null,x=_e(d).position==="fixed",S=x?Qe(d):d;for(;Ie(S)&&!Ot(S);){let E=_e(S),M=Rt(S);(x?M||A:M||E.position!=="static"||!A||!["absolute","fixed"].includes(A.position))?A=E:b=b.filter(L=>L!==S),S=Qe(S)}return _.set(d,b),b}(e,this._c):[].concat(i),a=[...r,n],c=a[0],f=a.reduce((d,_)=>{let p=pi(e,_,o);return d.top=Ze(p.top,d.top),d.right=fi(p.right,d.right),d.bottom=fi(p.bottom,d.bottom),d.left=Ze(p.left,d.left),d},pi(e,c,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:n}=t,o=Le(i),r=ke(i);if(i===r)return e;let a={scrollLeft:0,scrollTop:0},c={x:1,y:1},f={x:0,y:0};if((o||!o&&n!=="fixed")&&((Re(i)!=="body"||ct(r))&&(a=ht(i)),Le(i))){let d=$e(i);c=He(i),f.x=d.x+i.clientLeft,f.y=d.y+i.clientTop}return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-a.scrollLeft*c.x+f.x,y:e.y*c.y-a.scrollTop*c.y+f.y}},isElement:Ie,getDimensions:function(t){return bi(t)},getOffsetParent:mi,getDocumentElement:ke,getScale:He,async getElementRects(t){let{reference:e,floating:i,strategy:n}=t,o=this.getOffsetParent||mi,r=this.getDimensions;return{reference:cr(e,await o(i),n),floating:{x:0,y:0,...await r(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>_e(t).direction==="rtl"};var Ti=(t,e,i)=>{let n=new Map,o={platform:hr,...i},r={...o.platform,_c:n};return hi(t,e,{...o,platform:r})};var Li=`/* Floatie CSS */
#sp-floatie-container {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  background: #222222;
  color: white;
  border-radius: 4px;
  padding: 2px;
  font-size: 11px;
  font-family: sans-serif;
}

#sp-floatie-arrow {
  position: absolute;
  background: rgb(255, 34, 34);
  background: linear-gradient(
    -45deg,
    rgba(34, 34, 34, 1) 0%,
    rgba(34, 34, 34, 1) 51%,
    rgba(0, 0, 0, 0) 53%,
    rgba(0, 0, 0, 0) 80%
  );
  width: 8px;
  height: 8px;
  transform: rotate(45deg);
}

.sp-floatie-action {
  display: block;
  background-color: #222222;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 8px;
  padding-right: 8px;
  margin: 0 0 !important;
}

.hide-1 {
  transition: opacity 2s;
  opacity: 0;
}
.hide-2 {
  transition: opacity 3s;
  opacity: 0;
}
.hide-3 {
  transition: opacity 4s;
  opacity: 0;
}
.hide-4 {
  transition: opacity 5s;
  opacity: 0;
}
.hide-5 {
  transition: opacity 6s;
  opacity: 0;
}

.sp-floatie-action:hover {
  background-color: #777;
}
`;var ut=class{constructor(){this.isCopyActionEnabled=!1;this.logger=new oe(this);let e=`
        <div id="sp-floatie-container">
            <div id="sp-floatie-arrow"></div>
            <div id="sp-floatie-search" class="sp-floatie-action" data-action="search">Search</div>
            <div id="sp-floatie-preview" class="sp-floatie-action" data-action="preview">Preview</div>
                        <div id="sp-floatie-copy" class="sp-floatie-action" data-action="copy">Copy</div>
        </div>
        `,i=document.createRange();i.selectNode(document.getElementsByTagName("body").item(0)),this.documentFragment=i.createContextualFragment(e);let n=this.documentFragment.getElementById("sp-floatie-container"),o=this.documentFragment.getElementById("sp-floatie-search"),r=this.documentFragment.getElementById("sp-floatie-preview"),a=this.documentFragment.getElementById("sp-floatie-copy"),c=this.documentFragment.getElementById("sp-floatie-arrow");if(!n||!o||!r||!a||!c)throw new Error("Impossible error obtaining action buttons from DOM");this.container=n,this.searchButton=o,this.previewButton=r,this.copyButton=a,this.tooltipArrow=c,this.logger.debug("Initialized floatie")}startListening(){if(this.inIframe())return;let e=document.createElement("better-previews-tooltip"),i=document.createElement("style");i.textContent=Li,e.appendChild(i),e.appendChild(this.documentFragment),e.attachShadow({mode:"open"}).innerHTML="<slot></slot>",document.body.appendChild(e),window.onscroll=()=>this.hideAll(),window.onresize=()=>this.hideAll(),window.oncontextmenu=()=>this.hideAll(),document.onmouseup=n=>this.deferredMaybeShow(n),document.onkeydown=()=>this.hideAll(),this.setupLinkPreviews()}setupLinkPreviews(){let e=document.querySelectorAll("a"),i=null,n=null,o=null;e.forEach(r=>{!this.isGoodUrl(r.href)||!r.innerText.trim()||(r.addEventListener("mouseover",a=>{o&&(clearTimeout(o),o=null),i=setTimeout(async()=>{let c=await q.get("preview-on-hover")??!1;if(this.showActions(r.getBoundingClientRect(),a,r.href,[this.previewButton]),c){let f=await q.get("preview-on-hover-delay")??3;this.container.classList.add("hide-"+f),n=setTimeout(()=>{this.container.className="",this.container.style.display="none",this.sendMessage("preview",r.href)},f*1e3)}},500)}),r.addEventListener("mouseout",()=>{i&&(clearTimeout(i),i=null),n&&(clearTimeout(n),this.container.className="",this.container.style.display="none",n=null),o=setTimeout(()=>{this.hideAll()},2e3)}))})}stopListening(){document.body.removeChild(this.documentFragment),document.removeEventListener("onmouseup",()=>{}),window.removeEventListener("onscroll",()=>{}),window.removeEventListener("onresize",()=>{})}deferredMaybeShow(e){this.showTimeout=window.setTimeout(()=>this.maybeShow(e),100)}maybeShow(e){if(this.hideAll(),typeof window.getSelection>"u")return;let i=window.getSelection();if(i.isCollapsed)return;let n=i.toString().trim(),r=i.getRangeAt(0).getBoundingClientRect();this.logger.debug("Selected: ",n);let a=[];this.shouldShowPreview(e,n)?a.push(this.previewButton):this.shouldShowSearch(e,n)&&a.push(this.searchButton),this.shouldShowCopy(n)&&a.push(this.copyButton),this.showActions(r,e,n,a)}getAbsoluteUrl(e){let i=new RegExp("^(?:[a-z+]+:)?//","i"),n;try{if(i.test(e))n=new URL(e);else return null}catch{return null}return n}isGoodUrl(e){if(!e||!e.trim())return!1;let i=this.getAbsoluteUrl(e);return!(i===null||i.protocol!=="http:"&&i.protocol!=="https:"||i.hostname===window.location.hostname)}shouldShowCopy(e){return this.isCopyActionEnabled&&e.length>0}shouldShowPreview(e,i){let n=o=>{var r=o.target;do if(r.nodeName.toUpperCase()==="A"&&this.isGoodUrl(r.href))return!0;while(r=r.parentElement);return!1};return this.isGoodUrl(i)||n(e)}getPreviewUrl(e,i){let n=o=>{var r=o.target;do if(r.nodeName.toUpperCase()==="A"&&this.isGoodUrl(r.href))return r.href;while(r=r.parentElement)};return this.isGoodUrl(i)?this.getAbsoluteUrl(i)?.href:n(e)}shouldShowSearch(e,i){let n=c=>c.length>0&&c.length<100,o=c=>String(c).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=c=>!isNaN(Date.parse(c)),a=c=>/[a-zA-Z]/.test(c);return n(i)&&a(i)&&!o(i)&&!r(i)&&!this.shouldShowPreview(e,i)}showActions(e,i,n,o){this.hideAll(),o.length!==0&&(this.showContainer(e),o.forEach(r=>{r.style.display="inline-block",r.onclick=()=>{if(typeof window.getSelection<"u"){let a=window.getSelection();if(a.isCollapsed||(n=a.toString().trim()),r.innerText=="Preview"){let c=this.getPreviewUrl(i,n);c&&(n=c)}}this.sendMessage(r.getAttribute("data-action")||"unknown-action",n),this.hideAll()}}))}sendMessage(e,i){window.postMessage({application:te.__package_name__,action:e,data:i},window.location.origin)}showContainer(e){this.container.style.display="block";let i=()=>new Promise(o=>{let r=Math.max(...Array.from(document.querySelectorAll("body *"),a=>parseFloat(window.getComputedStyle(a).zIndex)).filter(a=>!Number.isNaN(a)),0);o(r)});Ti({getBoundingClientRect(){return{width:e.width,height:e.height,x:e.x,y:e.y,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}},this.container,{placement:"top",strategy:"absolute",middleware:[It(12),Dt(),kt({padding:5}),Ct({element:this.tooltipArrow})]}).then(({x:o,y:r,placement:a,middlewareData:c})=>{Object.assign(this.container.style,{top:`${r}px`,left:`${o}px`});let f=c.arrow,d="bottom";switch(a.split("-")[0]){case"top":d="bottom";break;case"left":d="right";break;case"bottom":d="top";break;case"right":d="left";break}Object.assign(this.tooltipArrow.style,{left:f?.x!=null?`${f.x}px`:"",top:f?.y!=null?`${f.y}px`:"",right:"",bottom:"",[d]:"-4px"}),i().then(_=>{this.container.style.zIndex=""+(_+10),this.tooltipArrow.style.zIndex=""+(_-1)})})}hideAll(){clearTimeout(this.showTimeout),this.container.style.display="none",this.copyButton.style.display="none",this.searchButton.style.display="none",this.previewButton.style.display="none"}inIframe(){try{return window.self!==window.top}catch{return!0}}};var Pt=class{constructor(){this.floatie=new ut;this.logger=new oe(this);this.unsupportedHosts=["mail.google.com"]}async start(){if(await this.isDisabledDomain()){this.logger.debug("Better Previews is disabled on ",window.location.host);return}this.floatie.startListening(),this.inIframe()||chrome.runtime.onMessage.addListener((e,i,n)=>{this.logger.debug("Re-posting message for DOM: ",e),window.postMessage({application:te.__package_name__,...e}),n("ok")})}stop(){this.floatie.stopListening()}async isDisabledDomain(){let e=await q.get("blocked-sites")??"";if(!e)return!1;let i=window.location.hostname;return e.includes(i)}inIframe(){try{return window.self!==window.top}catch{return!0}}},dr=new Pt;dr.start();})();
